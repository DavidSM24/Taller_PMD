{"version":3,"file":"default-src_app_administrator_exchangeGift_exchange-gif-update_exchange-gif-update_page_ts.js","mappings":"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","sources":["./src/app/administrator/exchangeGift/exchange-gif-update/exchange-gif-update.page.ts","./src/app/services/exchange-gift.service.ts","./src/app/administrator/exchangeGift/exchange-gif-update/exchange-gif-update.page.html"],"sourcesContent":["import { Component, ViewChild, OnInit, Input } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { IonToggle, ModalController, PickerController, PickerOptions } from '@ionic/angular';\r\nimport { Agency } from 'src/app/models/Agency';\r\nimport { ExchangeGift } from 'src/app/models/ExchangeGift';\r\nimport { Gift } from 'src/app/models/Gift';\r\nimport { AgencyService } from 'src/app/services/agency.service';\r\nimport { ExchangeGiftService } from 'src/app/services/exchange-gift.service';\r\nimport { GiftService } from 'src/app/services/gift.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n@Component({\r\n  selector: 'app-exchange-gif-update',\r\n  templateUrl: './exchange-gif-update.page.html',\r\n  styleUrls: ['./exchange-gif-update.page.scss'],\r\n})\r\nexport class ExchangeGifUpdatePage implements OnInit {\r\n  @Input() exchange: ExchangeGift;\r\n  public formEditExchange:FormGroup;\r\n  public mygift:Gift;\r\n  public myagency:Agency;\r\n  public gifts: Gift[];\r\n  public agencies: Agency[];\r\n  public errorGift:boolean;\r\n\r\n  @ViewChild(IonToggle) toggle: IonToggle;\r\n  constructor(private excser: ExchangeGiftService,\r\n    private fb: FormBuilder,\r\n    private uts:UtilService,\r\n    private pickerController:PickerController,\r\n    private giftserv:GiftService,\r\n    private ageserv:AgencyService,\r\n    private modalCtrl: ModalController,\r\n    private as:AgencyService) {\r\n\r\n      this.formEditExchange=this.fb.group({\r\n        dateExchange: [\"\",Validators.required],\r\n        observations: [\"\"]\r\n      });\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n      try {\r\n      this.mygift=this.exchange.gift;\r\n      this.myagency=this.exchange.agency;\r\n\r\n      this.formEditExchange = this.fb.group({\r\n        dateExchange: [this.exchange.dateExchange, Validators.required],\r\n        observations: [this.exchange.observations, Validators.required],\r\n        delivered: [this.exchange.delivered, Validators.required]\r\n      });\r\n      } catch (error) {\r\n        \r\n      }\r\n    }\r\n\r\n    public async EditExgift(): Promise<void> {\r\n      if(this.mygift!=null&&this.myagency!=null){\r\n        this.uts.presentLoading();\r\n      let Exchangeeditado: ExchangeGift = {\r\n        id:this.exchange.id,\r\n        dateExchange: this.formEditExchange.get(\"dateExchange\").value,\r\n        observations: this.formEditExchange.get(\"observations\").value,\r\n        delivered: this.toggle.checked,\r\n        agency: this.myagency,\r\n        gift: this.mygift\r\n      }\r\n      Exchangeeditado = await this.excser.createOrUpdate(Exchangeeditado);\r\n      if (Exchangeeditado.id) {\r\n        this.formEditExchange.reset();\r\n        this.uts.presentToast('Pedido modificado correctamente.', 'success',\"checkmark-circle-outline\");\r\n      }\r\n      else {\r\n        this.uts.presentToast('Un error ha surgido al intentar actualiar el pedido. Compruebe la disponibilidad del regalo.', 'danger','ban');\r\n      }\r\n      this.uts.hideLoading();\r\n      this.modalCtrl.dismiss({\r\n        newExchange:Exchangeeditado\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  async showGiftsPicker() {\r\n    let options: PickerOptions = {\r\n      buttons: [\r\n        {\r\n          text: \"Cancel\",\r\n          role: 'cancel',\r\n          handler:(value:any) => {\r\n            if(!this.mygift){\r\n              this.errorGift=true;\r\n            }\r\n          }\r\n        },\r\n        {\r\n          text:'Ok',\r\n          handler:(value:any) => {\r\n            this.mygift=value.Regalos.value;\r\n            this.errorGift=false;\r\n          }\r\n        }\r\n      ],\r\n      columns:[{\r\n        name:'Regalos',\r\n        options:this.getGiftColumnOptions()\r\n      }]\r\n    };\r\n\r\n    let picker = await this.pickerController.create(options);\r\n    picker.present()\r\n\r\n  }\r\n\r\n  getGiftColumnOptions(){\r\n    let options = [];\r\n    this.gifts.forEach(x => {\r\n      options.push({text:x.name,value:x});\r\n    });\r\n    return options;\r\n  }\r\n  async ionViewWillEnter() {\r\n\r\n    this.uts.presentLoading();\r\n    this.gifts=await this.giftserv.getAll();\r\n    this.agencies=await this.ageserv.getAll();\r\n\r\n    if(this.agencies.length<=0&&this.gifts.length<=0){\r\n      this.uts.presentToast('','danger','ban');\r\n    }\r\n    this.uts.hideLoading();\r\n    \r\n    \r\n  }\r\n\r\n  async showAgenciesPicker() {\r\n    let options: PickerOptions = {\r\n      buttons: [\r\n        {\r\n          text: \"Cancel\",\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text:'Ok',\r\n          handler:(value:any) => {\r\n            this.myagency=value.Agencias.value;\r\n          }\r\n        }\r\n      ],\r\n      columns:[{\r\n        name:'Agencias',\r\n        options:this.getAgenciesColumnOptions()\r\n      }]\r\n    };\r\n\r\n    let picker = await this.pickerController.create(options);\r\n    picker.present()\r\n  }\r\n\r\n  getAgenciesColumnOptions(){\r\n    let options = [];\r\n    this.agencies.forEach(x => {\r\n      options.push({text:x.myInsuranceCompany.cia_Name+\" - \"+x.location,value:x});\r\n    });\r\n    return options;\r\n  }\r\n  close() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Agency } from '../models/Agency';\r\nimport { ExchangeGift } from '../models/ExchangeGift';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ExchangeGiftService {\r\n\r\n  endpoint: string = \"/exchangeGifts\";\r\n\r\n  URLDatabase: string;\r\n  constructor(public http: HttpClient) {\r\n    this.URLDatabase = environment.herokuConfig.url;\r\n   }\r\nprivate async getListData(endpoint: string): Promise<ExchangeGift[]> {\r\n    let users: ExchangeGift[] = [];\r\n\r\n    return new Promise(resolve => {\r\n      this.http.get(endpoint).subscribe((data: any[]) => {\r\n\r\n        if (data != null && data.length > 0) {\r\n\r\n          for (let miexgift of data) {\r\n            const tmp: ExchangeGift = {\r\n              id: miexgift.id,\r\n              dateExchange: miexgift.dateExchange,\r\n              observations:miexgift.observations,\r\n              delivered: miexgift.delivered,\r\n              agency: miexgift.agency,\r\n              gift: miexgift.gift\r\n            }\r\n\r\n            users.push(tmp);\r\n          }\r\n        }\r\n        \r\n        resolve(users);\r\n      }, error => {\r\n        \r\n      });\r\n    });\r\n  }\r\n  public getAllPaged(element: number, page: number):Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint + \"/element/\" + element + \"/page/\" + page);\r\n  }\r\n  public getAll():Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint);\r\n  }\r\n\r\n  public getByDateFilter(date:string):Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint+ \"/date/\"+ date);\r\n  }\r\n\r\n  public getByPoints(points:string):Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint+ \"/points/\"+ points);\r\n  }\r\n\r\n  public getByAgencyUsername(auname:string):Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint+ \"/auname/\"+ auname);\r\n  }\r\n\r\n  public async getById(id: number): Promise<ExchangeGift> {\r\n\r\n    let exchangegift: ExchangeGift = null;\r\n\r\n    return new Promise(resolve => {\r\n\r\n      this.http.get(this.URLDatabase + this.endpoint + \"/id/\" + id).subscribe((miexgift: any) => {\r\n\r\n        if (miexgift.id) {\r\n          const tmp: ExchangeGift = {\r\n            id: miexgift.id,\r\n            dateExchange: miexgift.dateExchange,\r\n              observations:miexgift.observations,\r\n              delivered: miexgift.delivered,\r\n              agency: miexgift.agency,\r\n              gift: miexgift.gift\r\n          }\r\n          exchangegift = tmp;\r\n        }\r\n        \r\n        resolve(exchangegift);\r\n      }, error => {\r\n        \r\n        \r\n        resolve(exchangegift);\r\n      });\r\n    });\r\n  }\r\n  public getByDeliveredPaged(delivered:Boolean, element: number, page: number):Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint +\"/delivered/\"+ delivered + \"/element/\" + element + \"/paged/\" + page);\r\n  }\r\n\r\n  public getByGiftName(gname:string):Promise<ExchangeGift[]>{\r\n    return this.getListData(this.URLDatabase + this.endpoint +\"/gname/\"+ gname);\r\n  }\r\n\r\n  public getByAgencyPaged(agency:Agency, element: number, page: number):Promise<ExchangeGift[]>{\r\n    if(agency!=null){\r\n      return this.getListData(this.URLDatabase + this.endpoint +\"/id_agency/\"+ agency.id + \"/element/\" + element + \"/paged/\" + page);\r\n    }else{\r\n      let result:Promise<ExchangeGift[]>\r\n      return result;\r\n    }\r\n\r\n  }\r\n  public async createOrUpdate(exgift:ExchangeGift):Promise<ExchangeGift>{\r\n\r\n    \r\n\r\n    if (exgift != null) {\r\n\r\n      const body={\r\n        id:exgift.id,\r\n        dateExchange:exgift.dateExchange,\r\n        observations:exgift.observations,\r\n        delivered:exgift.delivered,\r\n        agency:{\r\n          id:exgift.agency.id\r\n        },\r\n        gift:{\r\n          id:exgift.gift.id\r\n        }\r\n      }\r\n\r\n      return new Promise(resolve => {\r\n\r\n        this.http.post(this.URLDatabase + this.endpoint, body).subscribe((data: any) => {\r\n          exgift.id=data.id;\r\n          resolve(exgift);\r\n        }, error => {\r\n          \r\n          resolve(null);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  public async delete(exgift:ExchangeGift):Promise<boolean>{\r\n\r\n    if(exgift!=null){\r\n      const body={\r\n        id:exgift.id\r\n      }\r\n\r\n      return new Promise(resolve => {\r\n        this.http.delete<ExchangeGift>(this.URLDatabase + this.endpoint, {body}).subscribe(() => {\r\n          resolve(true);\r\n        }, error => {\r\n          \r\n          resolve(false);\r\n        });\r\n      });\r\n    }\r\n\r\n\r\n  }\r\n}\r\n","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>\\r\\n      Editar Pedido\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <div class=\\\"body\\\">\\r\\n    <form [formGroup]=\\\"formEditExchange\\\" class=\\\"ion-padding\\\">\\r\\n      <div class=\\\"formulario\\\">\\r\\n      <ion-grid>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1.5\\\" sizeLg=\\\"1.5\\\">\\r\\n            <ion-label>Fecha de Intercambio:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"10.5\\\" sizeLg=\\\"10.5\\\">\\r\\n            <ion-input formControlName=\\\"dateExchange\\\" class=\\\"customInput\\\" type=\\\"date\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <p style=\\\"color:red;\\\" *ngIf=\\\"this.formEditExchange.get('dateExchange').invalid&&formEditExchange.get('dateExchange').touched\\\">\\r\\n              *Campo obligatorio. Seleccione una fecha válida.\\r\\n            </p>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1.5\\\" sizeLg=\\\"1.5\\\">\\r\\n            <ion-label>Observaciones:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"10.5\\\" sizeLg=\\\"10.5\\\">\\r\\n            <ion-textarea formControlName=\\\"observations\\\"  class=\\\"customInput\\\" type=\\\"text\\\"></ion-textarea>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1.5\\\" sizeLg=\\\"1.5\\\">\\r\\n            Entregado:\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"10.5\\\" sizeLg=\\\"10.5\\\">\\r\\n            <ion-item  lines=\\\"none\\\">\\r\\n              No<ion-toggle [checked]=\\\"this.exchange.delivered\\\"></ion-toggle>Si\\r\\n           </ion-item>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1.5\\\" sizeLg=\\\"1.5\\\">\\r\\n            <ion-label>Agencia:</ion-label>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"rem\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showAgenciesPicker()\\\" *ngIf=\\\"this.myagency==null\\\">\\r\\n              Seleccionar\\r\\n            </ion-button>\\r\\n            <ion-button disabled=\\\"true\\\" expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showAgenciesPicker()\\\" *ngIf=\\\"this.myagency!=null\\\">\\r\\n              {{this.myagency.myInsuranceCompany.cia_Name +\\\" - \\\"+ this.myagency.location}}\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1.5\\\" sizeLg=\\\"1.5\\\">\\r\\n            <ion-label>Regalo:</ion-label>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"rem\\\">\\r\\n            <ion-button disabled=\\\"true\\\" expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showGiftsPicker()\\\" *ngIf=\\\"this.mygift==null\\\">\\r\\n              Seleccionar\\r\\n            </ion-button>\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showGiftsPicker()\\\" *ngIf=\\\"this.mygift!=null\\\">\\r\\n              {{this.mygift.name}}\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <p style=\\\"color:red;\\\" *ngIf=\\\"this.errorGift\\\">\\r\\n              *Campo obligatorio. Seleccione un regalo a canjear.\\r\\n            </p>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button (click)=\\\"close()\\\" expand=\\\"block\\\" shape=\\\"round\\\"  style=\\\"margin-top: 2% !important;\\\" class=\\\"button\\\">\\r\\n              Cancelar\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button (click)=\\\"EditExgift()\\\" expand=\\\"block\\\" shape=\\\"round\\\"  style=\\\"margin-top: 2% !important;\\\" class=\\\"button\\\">\\r\\n              Actualizar\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n    </div>\\r\\n    </form>\\r\\n</div>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}