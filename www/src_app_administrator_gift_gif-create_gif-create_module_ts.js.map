{"version":3,"file":"src_app_administrator_gift_gif-create_gif-create_module_ts.js","mappings":"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","sources":["./src/app/administrator/gift/gif-create/gif-create-routing.module.ts","./src/app/administrator/gift/gif-create/gif-create.module.ts","./src/app/administrator/gift/gif-create/gif-create.page.ts","./src/app/administrator/gift/gif-create/gif-create.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { GifCreatePage } from './gif-create.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: GifCreatePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class GifCreatePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { GifCreatePageRoutingModule } from './gif-create-routing.module';\r\n\r\nimport { GifCreatePage } from './gif-create.page';\r\nimport { GiftService } from '../../../services/gift.service';\r\nimport { UtilService } from '../../../services/util.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    GifCreatePageRoutingModule,\r\n\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  providers:[UtilService],\r\n  declarations: [GifCreatePage]\r\n})\r\nexport class GifCreatePageModule {}\r\n","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { IonToggle } from '@ionic/angular';\r\nimport { Gift } from 'src/app/models/Gift';\r\nimport { GiftService } from 'src/app/services/gift.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-gif-create',\r\n  templateUrl: './gif-create.page.html',\r\n  styleUrls: ['./gif-create.page.scss'],\r\n})\r\nexport class GifCreatePage {\r\n\r\n  @ViewChild(IonToggle) toggle: IonToggle;\r\n\r\n  public formGift: FormGroup;\r\n  public img:string;\r\n  public formTest: FormGroup;\r\n  public file: any=null;\r\n  private extension:string;\r\n  public errorMsg:boolean;\r\n\r\n  constructor(\r\n    private gs: GiftService,\r\n    private fb: FormBuilder,\r\n    private uts:UtilService,\r\n    private router:Router) {\r\n\r\n      this.formGift = this.fb.group({\r\n        name: [\"\", [Validators.required, Validators.minLength(3),Validators.maxLength(50)]],\r\n        points: [\"\", [Validators.required,Validators.min(1),Validators.pattern(\"[0-9]+\")]]\r\n      });\r\n    }\r\n\r\n  public async create(): Promise<void> {\r\n\r\n    if(this.formGift.get(\"points\").value>0){\r\n      await this.uts.presentLoading();\r\n\r\n      if(this.extension){\r\n        if(this.extension==(\"image/jpg\")\r\n        ||this.extension==(\"image/jpeg\")\r\n        ||this.extension==\"image/png\"){\r\n\r\n          \r\n\r\n          let newGift:Gift = {\r\n            name: this.formGift.get(\"name\").value,\r\n            points: this.formGift.get(\"points\").value,\r\n            available: this.toggle.checked,\r\n            picture: '',\r\n            exchangeGifts: []\r\n          }\r\n\r\n          newGift=await this.gs.createOrUpdate(newGift,this.file);\r\n          if(newGift.id){\r\n            this.gs.added=true;\r\n            \r\n            this.formGift.reset();\r\n            this.uts.presentToast('El regalo se ha creado correctamente.','success',\"checkmark-circle-outline\");\r\n          }\r\n          else{\r\n            this.uts.presentToast('Un error ha surgido al intentar crear el regalo.','danger','ban');\r\n          }\r\n        }\r\n      }\r\n\r\n      await this.uts.hideLoading();\r\n    }\r\n    else this.uts.presentToast(\"Los puntos deben ser mayores de 0.\",\"danger\",'ban');\r\n\r\n\r\n  }\r\n\r\n  public async test_Update() {\r\n    let toDrop: Gift[] = await this.gs.getAll();\r\n    let last: Gift = toDrop[toDrop.length - 1];\r\n    last.name=\"hola1\";\r\n    \r\n    if (toDrop != null) {\r\n      last=await this.gs.createOrUpdate(last,this.file);\r\n      \r\n      this.img=\"https://res.cloudinary.com/duq0pz1vi/image/upload/v1645471738/\"+last.picture;\r\n    }\r\n  }\r\n\r\n  public async test_Delete() {\r\n    let toDrop: Gift[] = await this.gs.getAll();\r\n    let last: Gift = toDrop[toDrop.length - 1];\r\n    \r\n    if (toDrop != null) {\r\n      \r\n    }\r\n  }\r\n\r\n  public changeListener($event) : void {\r\n    try {\r\n      if($event){\r\n\r\n        let extension:string=$event.target.files[0].type.toString();\r\n        if(extension==(\"image/jpeg\")\r\n        ||extension==(\"image/png\")){\r\n          this.file = $event.target.files[0];\r\n          this.extension=this.file.type;\r\n          this.img=URL.createObjectURL(this.file);\r\n          this.errorMsg=false;\r\n        }\r\n        else{\r\n          this.file=null;\r\n          this.errorMsg=true;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      //alert\r\n      this.errorMsg=true;\r\n      this.file=null;\r\n    }\r\n\r\n    \r\n  }\r\n\r\n}\r\n","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>\\r\\n      Crear Regalo\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n\\r\\n  <div class=\\\"body\\\">\\r\\n    <div class=\\\"ion-padding\\\" *ngIf=\\\"this.img!=null\\\">\\r\\n      <div class=\\\"center\\\">\\r\\n\\r\\n        <ion-card>\\r\\n          <ion-img  [src]=\\\"this.img\\\"></ion-img>\\r\\n        </ion-card>\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n    <form [formGroup]=\\\"formGift\\\" class=\\\"ion-padding\\\">\\r\\n      <div class=\\\"formulario\\\">\\r\\n      <ion-grid>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Nombre:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input type=\\\"text\\\" class=\\\"customInput\\\" formControlName=\\\"name\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <p style=\\\"color:red;\\\" *ngIf=\\\"this.formGift.get('name').invalid&&formGift.get('name').touched\\\">\\r\\n              *Campo obligatorio. Debe introducir entre 3 y 50 caracteres.\\r\\n            </p>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Puntos:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"number\\\" formControlName=\\\"points\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <p style=\\\"color:red;\\\" *ngIf=\\\"this.formGift.get('points').invalid&&formGift.get('points').touched\\\">\\r\\n              *Campo obligatorio. El valor mínimo es 1 punto.\\r\\n            </p>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"9\\\" sizeLg=\\\"1.5\\\">\\r\\n            Disponible:\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"3\\\" sizeLg=\\\"9.5  \\\">\\r\\n            <ion-item  lines=\\\"none\\\">\\r\\n              No<ion-toggle></ion-toggle>Si\\r\\n           </ion-item>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n\\r\\n          <ion-col size=\\\"12\\\">\\r\\n            <ion-input type=\\\"file\\\" accept=\\\".jpg,.jpeg,.png\\\" (change)=\\\"changeListener($event)\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <p style=\\\"color:red;\\\" *ngIf=\\\"this.errorMsg\\\">\\r\\n              *Campo obligatorio. Debe seleccionar un archivo válido para imagen (png, jpg, etc.).\\r\\n            </p>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" style=\\\"margin-top: 2% !important;\\\" routerLink=\\\"/tab-administrator/gift/list\\\" class=\\\"button\\\">\\r\\n              Volver\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" style=\\\"margin-top: 2% !important;\\\" (click)=\\\"create()\\\" class=\\\"button\\\" [disabled]=\\\"this.formGift.invalid||this.file==null\\\">\\r\\n              Crear Regalo\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n\\r\\n        </ion-row>\\r\\n\\r\\n      </ion-grid>\\r\\n    </div>\\r\\n    </form>\\r\\n\\r\\n</div>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}