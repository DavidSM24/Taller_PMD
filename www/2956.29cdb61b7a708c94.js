"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2956],{2956:(L,h,s)=>{s.r(h),s.d(h,{AgencyListPageModule:()=>x});var u=s(6019),f=s(9010),a=s(2651),g=s(8725),l=s(4762),A=s(2483),e=s(865),y=s(9574),Z=s(371),m=s(9311);function p(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row",22),e.TgZ(1,"ion-col",23),e.TgZ(2,"ion-text",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().edit(n)}),e._UZ(3,"ion-icon",25),e.qZA(),e.qZA(),e.TgZ(4,"ion-col",26),e.TgZ(5,"ion-text"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"ion-col",26),e.TgZ(8,"ion-text"),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",26),e.TgZ(11,"ion-text"),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",26),e.TgZ(14,"ion-text"),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"ion-col",23),e.TgZ(17,"ion-text",27),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().showDeleteMenu(n)}),e._UZ(18,"ion-icon",28),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(6),e.hij(" ",t.zipCode," "),e.xp6(3),e.hij(" ",t.myInsuranceCompany.cia_Name," "),e.xp6(3),e.hij(" ",t.location," "),e.xp6(3),e.hij(" ",t.points," ")}}const T=[{path:"",component:(()=>{class o{constructor(t,i,c,n,d,P){this.as=t,this.AlertCtrl=i,this.modalCtrl=c,this.pt=n,this.uts=d,this.authS=P,this.agencies=[],this.oldAgencies=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,l.mG)(this,void 0,void 0,function*(){console.log(this.as.added),this.as.added?(this.reset(null),this.as.added=!1):(this.niTems=Math.ceil(this.pt.height()/20+10),yield this.loadAgencies())})}loadAgencies(t){return(0,l.mG)(this,void 0,void 0,function*(){let i=[];0==this.agencies.length&&(yield this.uts.presentLoading(),this.infinite.disabled=!1,this.oldInfinite=!1,i=yield this.as.getAllPaged(this.niTems,0),this.agencies=this.agencies.concat(i),this.oldAgencies=[],this.oldAgencies=this.oldAgencies.concat(i)),i.length<this.niTems&&(this.infinite.disabled=!0,this.oldInfinite=!0),t&&t.target.complete(),yield this.uts.hideLoading()})}edit(t){return(0,l.mG)(this,void 0,void 0,function*(){try{const i=yield this.modalCtrl.create({component:A.L,cssClass:"fullscreen",componentProps:{agency:t}});yield i.present();const c=yield i.onDidDismiss();if(null!=c.data){let n=this.agencies.indexOf(t);this.agencies[n]=c.data.newAgency}}catch(i){console.log(i)}})}delete(t){return(0,l.mG)(this,void 0,void 0,function*(){yield this.uts.presentLoading();const i=yield this.as.delete(t);let c=this.agencies.indexOf(t,0);yield this.uts.hideLoading(),i?(c>-1&&this.agencies.splice(c,1),this.uts.presentToast("Agencia eliminada correctamente.","success")):this.uts.presentToast("Error al eliminar la agencia...","danger")})}showDeleteMenu(t){return(0,l.mG)(this,void 0,void 0,function*(){yield(yield this.AlertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfDesea eliminar esta Agencia?",buttons:[{text:"Eliminar",cssClass:"rojo",handler:()=>{this.delete(t)}},{text:"Cancelar",cssClass:"secondary",role:"cancel"}]})).present()})}infiniteLoad(t){return(0,l.mG)(this,void 0,void 0,function*(){let i=[];this.infinite.disabled||(i=yield this.as.getAllPaged(this.niTems,this.agencies.length),this.agencies=this.agencies.concat(i),this.oldAgencies=this.oldAgencies.concat(i),i.length<30&&(this.infinite.disabled=!0,this.oldInfinite=!0))})}onSearchChange(t){this.searchStr=t.detail.value}reset(t){return(0,l.mG)(this,void 0,void 0,function*(){this.infinite.disabled=!1,this.oldInfinite=!1,this.agencies=[],this.loadAgencies(t)})}logout(){this.authS.logout()}searchChange(t){return(0,l.mG)(this,void 0,void 0,function*(){this.searchStr=t.detail.value;let i=[];this.agencies=[];let c=this.searchStr.length;c>0?(yield this.uts.presentLoading(),i=yield this.as.getByUserNamePaged(this.searchStr,99999,0),i.forEach(n=>{this.agencies.includes(n)||this.agencies.push(n)}),i=yield this.as.getByAddress(this.searchStr),i.forEach(n=>{this.agencies.includes(n)||this.agencies.push(n)}),i=yield this.as.getByCompany(this.searchStr),i.forEach(n=>{this.agencies.includes(n)||this.agencies.push(n)}),i=yield this.as.getByLocation(this.searchStr),i.forEach(n=>{this.agencies.includes(n)||this.agencies.push(n)}),+this.searchStr>=0&&(i=yield this.as.getByPoints(+this.searchStr),i.forEach(n=>{this.agencies.includes(n)||this.agencies.push(n)})),+this.searchStr>=0&&(i=yield this.as.getByZipcode(+this.searchStr),i.forEach(n=>{this.agencies.includes(n)||this.agencies.push(n)})),this.infinite.disabled=!0,yield this.uts.hideLoading()):c<1&&(this.agencies=[],this.agencies=this.agencies.concat(this.oldAgencies),this.infinite.disabled=this.oldInfinite,yield this.uts.hideLoading())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.Y),e.Y36(a.Br),e.Y36(a.IN),e.Y36(a.t4),e.Y36(Z.f),e.Y36(m.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-agency-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(a.ju,5),2&t){let c;e.iGM(c=e.CRH())&&(i.infinite=c.first)}},decls:38,vars:3,consts:[[3,"translucent"],["color","primary"],["slot","end",1,"icon-div-container",2,"margin-right","1%"],["title","Nuevo","routerLink","/tab-administrator/user/create"],["slot","end",1,"icon-logout",2,"pointer-events","none","zoom","1.5","cursor","pointer","content","url(../../../../assets/icon/add-circle-outline.png)"],["title","Lista de Usuarios","routerLink","/tab-administrator/user/list"],["slot","end",1,"icon-logout",2,"pointer-events","none","zoom","1.3","cursor","pointer","content","url( ../../../../assets/icon/user_list.png)"],["title","Cerrar Sesi\xf3n",3,"click"],["slot","end","name","log-out-outline",1,"icon-logout",2,"pointer-events","none","zoom","1.7","cursor","pointer"],["color","primary",3,"ionChange"],["placeholder","Encuentra la agencia que est\xe1s buscando...","debounce","600","inputmode","text","type","text","showCancelButton","always",3,"ionChange"],[1,"header-row"],["size","1",2,"border","0px !important"],["size","2.5",2,"border","0px !important"],["size","2.5",2,"border","0px !important","margin-left","-1.5% !important"],[2,"background-color","white",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"body"],[1,"ion-text-center"],["let","","class","row",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],["let","",1,"row"],["size","1"],["title","Editar",1,"icon-div-container",3,"click"],["name","pencil",2,"color","#22388c","pointer-events","none"],["size","2.5"],["title","Eliminar",1,"icon-div-container",3,"click"],["name","trash","color","danger",2,"pointer-events","none"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3,"Lista de Agencias"),e.qZA(),e.TgZ(4,"ion-buttons",2),e.TgZ(5,"div",3),e._UZ(6,"ion-icon",4),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"ion-icon",6),e.qZA(),e.TgZ(9,"div",7),e.NdJ("click",function(){return i.logout()}),e._UZ(10,"ion-icon",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"ion-toolbar",9),e.NdJ("ionChange",function(n){return i.searchChange(n)}),e.TgZ(12,"ion-searchbar",10),e.NdJ("ionChange",function(n){return i.onSearchChange(n)}),e.qZA(),e.TgZ(13,"ion-row",11),e.TgZ(14,"ion-col",12),e._UZ(15,"ion-text"),e.qZA(),e.TgZ(16,"ion-col",13),e.TgZ(17,"ion-text"),e._uU(18,"C\xf3digo Zip"),e.qZA(),e.qZA(),e.TgZ(19,"ion-col",13),e.TgZ(20,"ion-text"),e._uU(21,"Compa\xf1\xeda"),e.qZA(),e.qZA(),e.TgZ(22,"ion-col",13),e.TgZ(23,"ion-text"),e._uU(24,"Localidad"),e.qZA(),e.qZA(),e.TgZ(25,"ion-col",14),e.TgZ(26,"ion-text"),e._uU(27,"Puntos"),e.qZA(),e.qZA(),e.TgZ(28,"ion-col",12),e._UZ(29,"ion-text"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"ion-content",15),e.TgZ(31,"ion-refresher",16),e.NdJ("ionRefresh",function(n){return i.reset(n)}),e._UZ(32,"ion-refresher-content"),e.qZA(),e.TgZ(33,"div",17),e.TgZ(34,"ion-grid",18),e.YNc(35,p,19,4,"ion-row",19),e.qZA(),e.TgZ(36,"ion-infinite-scroll",20),e.NdJ("ionInfinite",function(n){return i.infiniteLoad(n)}),e._UZ(37,"ion-infinite-scroll-content",21),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("translucent",!1),e.xp6(30),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngForOf",i.agencies))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.YI,g.rH,a.gu,a.VI,a.j9,a.Nd,a.wI,a.yW,a.W2,a.nJ,a.Wo,a.jY,u.sg,a.ju,a.MB],styles:['ion-col[_ngcontent-%COMP%]{border-bottom:1px solid #4b4b4d}ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;font-size:1.2rem;text-align:center}.row[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem}.body[_ngcontent-%COMP%]{background-color:#fff;font-family:"Roboto",sans-serif;color:#4b4b4d}']}),o})(),children:[{path:"agency-saw",loadChildren:()=>s.e(9969).then(s.bind(s,9969)).then(o=>o.AgencySawPageModule)},{path:"agency-update",loadChildren:()=>s.e(8592).then(s.bind(s,9226)).then(o=>o.AgencyUpdatePageModule)},{path:"agency-create",loadChildren:()=>s.e(8592).then(s.bind(s,1939)).then(o=>o.AgencyCreatePageModule)}]}];let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(T)],g.Bz]}),o})();var v=s(8816);let x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Z.f],imports:[[u.ez,a.Pc,C,f.u5,f.UX,v.h]]}),o})()}}]);