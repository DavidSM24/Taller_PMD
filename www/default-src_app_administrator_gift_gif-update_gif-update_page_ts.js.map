{"version":3,"file":"default-src_app_administrator_gift_gif-update_gif-update_page_ts.js","mappings":"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","sources":["./src/app/administrator/gift/gif-update/gif-update.page.ts","./src/app/services/gift.service.ts","./src/app/services/util.service.ts","./src/app/administrator/gift/gif-update/gif-update.page.html"],"sourcesContent":["import { Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { IonToggle, ModalController } from '@ionic/angular';\r\nimport { Gift } from 'src/app/models/Gift';\r\nimport { GiftService } from 'src/app/services/gift.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-gif-update',\r\n  templateUrl: './gif-update.page.html',\r\n  styleUrls: ['./gif-update.page.scss'],\r\n})\r\nexport class GifUpdatePage implements OnInit {\r\n\r\n  @ViewChild(IonToggle) toggle: IonToggle;\r\n  @Input() gift: Gift;\r\n\r\n  public formGift: FormGroup;\r\n  public edited: boolean;\r\n  public img: string;\r\n  public formTest: FormGroup;\r\n  public file: any = null;\r\n  private extension: string;\r\n\r\n  constructor(\r\n    private modalCtrl: ModalController,\r\n    private gs: GiftService,\r\n    private fb: FormBuilder,\r\n    private uts: UtilService,\r\n    private http: HttpClient) {\r\n\r\n    this.formGift = this.fb.group({\r\n      name: [\"\", Validators.required],\r\n      points: [\"\", Validators.required],\r\n    });\r\n  }\r\n\r\n  async ngOnInit() {\r\n    \r\n    try {\r\n      \r\n      this.file = await this.http.get(\"https://res.cloudinary.com/duq0pz1vi/image/upload/v1645471738/\" + this.gift.picture, { responseType: 'blob' }).subscribe((resp: any) => {\r\n        this.file = resp;\r\n  \r\n      });\r\n  \r\n      this.formGift = this.fb.group({\r\n        name: [this.gift.name, Validators.required],\r\n        points: [this.gift.points, Validators.required],\r\n      }); \r\n    } catch (error) {\r\n      \r\n    }\r\n\r\n    \r\n  }\r\n  async ionViewWillEnter() {\r\n    this.img = \"https://res.cloudinary.com/duq0pz1vi/image/upload/v1645471738/\"+this.gift.picture;\r\n  }\r\n  \r\n  public async edit(): Promise<void> {\r\n\r\n    this.uts.presentLoading();\r\n\r\n    console.log(\"entro?\");\r\n\r\n    let newGift: Gift = {\r\n      id:this.gift.id,\r\n      name: this.formGift.get(\"name\").value,\r\n      points: this.formGift.get(\"points\").value,\r\n      available: this.toggle.checked,\r\n      picture: '',\r\n      exchangeGifts: this.gift.exchangeGifts\r\n    }\r\n\r\n    newGift = await this.gs.createOrUpdate(newGift, this.file);\r\n    if (newGift.id) {\r\n      this.formGift.reset();\r\n      this.uts.presentToast('El regalo se ha creado correctamente.', 'success');\r\n    }\r\n    else {\r\n      this.uts.presentToast('Un error ha surgido al intentar crear el regalo.', 'danger');\r\n    }\r\n\r\n    this.uts.hideLoading();\r\n\r\n    this.modalCtrl.dismiss({\r\n      newGift:newGift\r\n    })\r\n  }\r\n\r\n  close() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n\r\n  public changeListener($event): void {\r\n    try {\r\n      if ($event) {\r\n\r\n        let extension: string = $event.target.files[0].type.toString();\r\n        if (extension == (\"image/jpeg\")\r\n          || extension == (\"image/png\")) {\r\n          this.file = $event.target.files[0];\r\n          this.extension = this.file.type;\r\n          this.img=URL.createObjectURL(this.file);\r\n        }\r\n        else {\r\n          this.file = null;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      //alert\r\n      this.file = null;\r\n    }\r\n\r\n    console.log(this.file.type);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Gift } from '../models/Gift';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GiftService {\r\n\r\n  endpoint: string = \"/gifts\";\r\n\r\n  URLDatabase: string;\r\n\r\n  constructor(public http: HttpClient) {\r\n    this.URLDatabase = environment.herokuConfig.url;\r\n  }\r\n\r\n  private async getListData(endpoint: string): Promise<Gift[]> {\r\n    let gifts: Gift[] = [];\r\n\r\n    return new Promise(resolve => {\r\n      this.http.get(endpoint).subscribe((data: any[]) => {\r\n\r\n        if (data != null && data.length > 0) {\r\n\r\n          for (let g of data) {\r\n            const tmp: Gift = {\r\n              id: g.id,\r\n              name: g.name,\r\n              points: g.points,\r\n              picture: g.picture,\r\n              exchangeGifts: [],\r\n              available: g.available\r\n            }\r\n\r\n            for (let eg of g.exchangeGifts) {\r\n              tmp.exchangeGifts.push(eg);\r\n            }\r\n\r\n            gifts.push(tmp);\r\n          }\r\n        }\r\n        console.log(data);\r\n        resolve(gifts);\r\n      }, error => {\r\n        console.log(error);\r\n      });\r\n    });\r\n  }\r\n\r\n  public async getAll(): Promise<Gift[]> {\r\n\r\n    return this.getListData(this.URLDatabase + this.endpoint);\r\n  }\r\n\r\n  public async getAllPaged(limit: number, offset: number): Promise<Gift[]> {\r\n    return this.getListData(this.URLDatabase + this.endpoint + \"/element/\" + limit + \"/page/\" + offset);\r\n  }\r\n\r\n  public async getById(id: number): Promise<Gift> {\r\n\r\n    let gift: Gift = null;\r\n\r\n    return new Promise(resolve => {\r\n      this.http.get(this.URLDatabase + this.endpoint + \"/id/\" + id).subscribe((data: any) => {\r\n\r\n        if (data.id) {\r\n          const tmp: Gift = {\r\n            id: data.id,\r\n            name: data.name,\r\n            points: data.points,\r\n            picture: data.picture,\r\n            exchangeGifts: [],\r\n            available: data.available\r\n          }\r\n\r\n          for (let eg of data.exchangeGifts) {\r\n            tmp.exchangeGifts.push(eg);\r\n          }\r\n\r\n          gift = tmp;\r\n        }\r\n\r\n        console.log(gift);\r\n\r\n        resolve(gift);\r\n      }, error => {\r\n        console.log(error);\r\n        console.log(gift);\r\n        resolve(gift);\r\n      });\r\n    });\r\n  }\r\n\r\n  public async getByNamePaged(name: string, limit: number, offset: number): Promise<Gift[]> {\r\n    return this.getListData(this.URLDatabase+ this.endpoint + \"/name/\" + name + \"/element/\" + limit + \"/page/\" + offset);\r\n  }\r\n\r\n  public async getByAvailablePaged(available: boolean, limit: number, offset: number): Promise<Gift[]> {\r\n    return this.getListData(this.URLDatabase + this.endpoint + \"/available/\" + available + \"/element/\" + limit + \"/page/\" + offset);\r\n  }\r\n\r\n  public async createOrUpdate(gift: Gift, ImageFile: any): Promise<Gift> {\r\n    console.log(gift);\r\n    if (\r\n      gift == null\r\n      || gift.name == null\r\n      || gift.name == (\"\")\r\n      || ImageFile==null\r\n    ) {\r\n      console.log(\"El campo name esta nulo o no contiene caracteres.\");\r\n      return gift\r\n    }\r\n\r\n    else {\r\n      const body:Gift = gift;\r\n      return new Promise(resolve => {\r\n\r\n        let formData = new FormData();\r\n        formData.append('g', new Blob([JSON.stringify(gift)], {\r\n          type: 'application/json'\r\n        }));\r\n        formData.append('file', ImageFile);\r\n\r\n        this.http.post(this.URLDatabase+this.endpoint, formData).subscribe((data: any) => {\r\n\r\n          console.log(data);\r\n\r\n          resolve(data);\r\n        }, error => {\r\n          console.log(error);\r\n          resolve(error);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  public delete(gift: Gift): Promise<boolean> {\r\n\r\n    return new Promise(resolve => {\r\n\r\n      this.http.delete<Gift>(this.URLDatabase + this.endpoint, { body: gift }).subscribe(() => {\r\n        resolve(true);\r\n      }, error => {\r\n        console.log(error);\r\n        resolve(false);\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LoadingController, ToastController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UtilService {\r\n\r\n  private miLoading: HTMLIonLoadingElement;\r\n  private miToast: HTMLIonToastElement;\r\n\r\n  constructor(\r\n    private loading: LoadingController,\r\n    private toast: ToastController\r\n  ) { }\r\n\r\n  async presentLoading() {\r\n    this.miLoading = await this.loading.create({\r\n      message: ''\r\n    });\r\n    await this.miLoading.present();\r\n  }\r\n\r\n  async hideLoading(){\r\n    this.miLoading.dismiss();\r\n  }\r\n\r\n  async presentToast(msg: string, clr: string) {\r\n    const miToast = await this.toast.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      color: clr\r\n    });\r\n    miToast.present();\r\n  }\r\n}\r\n","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>\\r\\n      Editar Regalo\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  \\r\\n  <div class=\\\"body\\\">\\r\\n    <div class=\\\"ion-padding\\\">    \\r\\n      <center>\\r\\n        <ion-img class=\\\"img\\\" [src]=\\\"this.img\\\"></ion-img>\\r\\n      </center>\\r\\n    </div>\\r\\n    <form [formGroup]=\\\"formGift\\\" class=\\\"ion-padding\\\">\\r\\n      <div class=\\\"formulario\\\">\\r\\n      <ion-grid>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Nombre:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input type=\\\"text\\\" class=\\\"customInput\\\" formControlName=\\\"name\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Puntos:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"number\\\" formControlName=\\\"points\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"9\\\" sizeLg=\\\"1\\\">\\r\\n            Disponible\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"3\\\" sizeLg=\\\"11  \\\">\\r\\n            <ion-item  lines=\\\"none\\\">\\r\\n              No<ion-toggle [checked]=\\\"this.gift.available\\\"></ion-toggle>Si\\r\\n           </ion-item>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n        \\r\\n          <ion-col size=\\\"12\\\">\\r\\n            <ion-input type=\\\"file\\\" accept=\\\".jpg,.jpeg,.png\\\" (change)=\\\"changeListener($event)\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        \\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          \\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" style=\\\"margin-top: 2% !important;\\\" (click)=\\\"close()\\\" class=\\\"button\\\" [disabled]=\\\"this.formGift.invalid||this.file==null\\\">\\r\\n              Cancelar\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n          \\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" style=\\\"margin-top: 2% !important;\\\" (click)=\\\"edit()\\\" class=\\\"button\\\" [disabled]=\\\"this.formGift.invalid||this.file==null\\\">\\r\\n              ACTUALIZAR\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n    </div>\\r\\n    </form>\\r\\n  \\r\\n</div>\\r\\n</ion-content>\\r\\n\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}