"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1939],{1939:(q,l,a)=>{a.r(l),a.d(l,{AgencyCreatePageModule:()=>T});var g=a(6019),r=a(9010),i=a(2651),d=a(8725),u=a(4762),e=a(865),p=a(9574),m=a(7639),Z=a(371);function h(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().showPicker()}),e._uU(1," Seleccionar "),e.qZA()}}function A(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().showPicker()}),e._uU(1),e.qZA()}if(2&o){const n=e.oxw();e.xp6(1),e.hij(" ",n.insurance.cia_Name," ")}}const y=[{path:"",component:(()=>{class o{constructor(n,t,s,C,b,v){this.as=n,this.fb=t,this.is=s,this.pickerController=C,this.uts=b,this.nav=v,this.insurance=null,this.formAgency=this.fb.group({zipCode:["",r.kI.required],address:["",r.kI.required],location:["",r.kI.required],phoneNumber:["",r.kI.required]})}ngOnInit(){}ionViewWillEnter(){return(0,u.mG)(this,void 0,void 0,function*(){console.log("en agency-cretae"),yield this.uts.presentLoading(),this.companies=yield this.is.getAll(),this.companies.length<=0&&(yield this.uts.hideLoading(),this.uts.presentToast("Para crear agencias, deben existir compa\xf1\xedas de seguros.","danger","ban"),this.nav.back()),yield this.uts.hideLoading()})}create(){return(0,u.mG)(this,void 0,void 0,function*(){if(yield this.uts.presentLoading(),null!=this.insurance){let n=yield this.as.getById(7),t={zipCode:this.formAgency.get("zipCode").value,address:this.formAgency.get("address").value,location:this.formAgency.get("location").value,phoneNumber:this.formAgency.get("phoneNumber").value,amount:0,points:0,pointsRedeemed:0,myInsuranceCompany:this.insurance,myCarRepairs:[],myExchangesGifts:[],myUser:n.myUser,active:this.toggle.checked};console.log(t),t=yield this.as.createOrUpdate(t),t.id?(this.formAgency.reset(),this.uts.presentToast("La agencia se ha creado correctamente.","success","checkmark-circle-outline"),this.as.added=!0):this.uts.presentToast("Un error ha surgido al intentar crear la agencia.","danger","ban"),yield this.uts.hideLoading()}})}showPicker(){return(0,u.mG)(this,void 0,void 0,function*(){let n={buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:s=>{this.insurance=s.Compa\u00f1\u00edas.value}}],columns:[{name:"Compa\xf1\xedas",options:this.getColumnOptions()}]};(yield this.pickerController.create(n)).present()})}getColumnOptions(){let n=[];return this.companies.forEach(t=>{n.push({text:t.cia_Name,value:t})}),n}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(p.Y),e.Y36(r.qu),e.Y36(m.r),e.Y36(i.up),e.Y36(Z.f),e.Y36(i.SH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-agency-create"]],viewQuery:function(n,t){if(1&n&&e.Gf(i.ho,5),2&n){let s;e.iGM(s=e.CRH())&&(t.toggle=s.first)}},decls:55,vars:6,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["sizeSm","1","sizeLg","1"],["sizeSm","11","sizeLg","11"],["type","number","formControlName","zipCode",1,"customInput"],["pattern",".{3,50}","type","text","formControlName","address",1,"customInput"],["type","text","formControlName","location",1,"customInput"],["type","number","formControlName","phoneNumber",1,"customInput"],["sizeSm","9","sizeLg","1"],["sizeSm","3","sizeLg","11  "],["lines","none"],["sizeSm","2","sizeLg","2"],["expand","block","shape","round",3,"click",4,"ngIf"],["size","6"],["expand","block","shape","round",1,"button"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"disabled","click"],["expand","block","shape","round",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3," Prueba Agencia "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"div",5),e.TgZ(8,"ion-grid"),e.TgZ(9,"ion-row",6),e.TgZ(10,"ion-col",7),e.TgZ(11,"ion-label"),e._uU(12,"C\xf3digo Zip:"),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",8),e._UZ(14,"ion-input",9),e.qZA(),e.qZA(),e.TgZ(15,"ion-row",6),e.TgZ(16,"ion-col",7),e.TgZ(17,"ion-label"),e._uU(18,"Direcci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(19,"ion-col",8),e._UZ(20,"ion-input",10),e.qZA(),e.qZA(),e.TgZ(21,"ion-row",6),e.TgZ(22,"ion-col",7),e.TgZ(23,"ion-label"),e._uU(24,"Localidad:"),e.qZA(),e.qZA(),e.TgZ(25,"ion-col",8),e._UZ(26,"ion-input",11),e.qZA(),e.qZA(),e.TgZ(27,"ion-row",6),e.TgZ(28,"ion-col",7),e.TgZ(29,"ion-label"),e._uU(30,"N\xfamero de Tel\xe9fono:"),e.qZA(),e.qZA(),e.TgZ(31,"ion-col",8),e._UZ(32,"ion-input",12),e.qZA(),e.qZA(),e.TgZ(33,"ion-row",6),e.TgZ(34,"ion-col",13),e._uU(35," Activa: "),e.qZA(),e.TgZ(36,"ion-col",14),e.TgZ(37,"ion-item",15),e._uU(38," No"),e._UZ(39,"ion-toggle"),e._uU(40,"Si "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"ion-row",6),e.TgZ(42,"ion-col",16),e.TgZ(43,"ion-label"),e._uU(44,"Compa\xf1\xeda de Seguros:"),e.qZA(),e.qZA(),e.TgZ(45,"ion-col",16),e.YNc(46,h,2,0,"ion-button",17),e.YNc(47,A,2,1,"ion-button",17),e.qZA(),e.qZA(),e.TgZ(48,"ion-row",6),e.TgZ(49,"ion-col",18),e.TgZ(50,"ion-button",19),e._uU(51," Cancelar "),e.qZA(),e.qZA(),e.TgZ(52,"ion-col",18),e.TgZ(53,"ion-button",20),e.NdJ("click",function(){return t.create()}),e._uU(54," Crear Agencia "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("formGroup",t.formAgency),e.xp6(40),e.Q6J("ngIf",null==t.insurance),e.xp6(1),e.Q6J("ngIf",null!=t.insurance),e.xp6(6),e.Q6J("disabled",t.formAgency.invalid||null==t.insurance))},directives:[i.Gu,i.sr,i.wd,i.W2,r._Y,r.JL,r.sg,i.jY,i.Nd,i.wI,i.Q$,i.pK,i.as,r.JJ,r.u,i.j9,r.c5,i.Ie,i.ho,i.w,g.O5,i.YG],styles:['.body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.button[_ngcontent-%COMP%]{--background: #22388c}.customInput[_ngcontent-%COMP%]{border:1px solid gray;border-color:"primary";border-radius:2.5rem}']}),o})()}];let f=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(y)],d.Bz]}),o})(),T=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[p.Y,m.r,Z.f],imports:[[g.ez,i.Pc,f,r.UX]]}),o})()}}]);