{"version":3,"file":"src_app_administrator_gift_gif-list_gif-list_module_ts.js","mappings":"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","sources":["./src/app/administrator/gift/gif-list/gif-list-routing.module.ts","./src/app/administrator/gift/gif-list/gif-list.module.ts","./src/app/administrator/gift/gif-list/gif-list.page.ts","./src/app/administrator/gift/gif-list/gif-list.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { GifListPage } from './gif-list.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: GifListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class GifListPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { GifListPageRoutingModule } from './gif-list-routing.module';\r\n\r\nimport { GifListPage } from './gif-list.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    GifListPageRoutingModule\r\n  ],\r\n  declarations: [GifListPage]\r\n})\r\nexport class GifListPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { AlertController, IonInfiniteScroll, LoadingController, ModalController, ToastController } from '@ionic/angular';\r\nimport { Gift } from 'src/app/models/Gift';\r\nimport { GiftService } from '../../../services/gift.service';\r\nimport { GifUpdatePage } from '../gif-update/gif-update.page';\r\n\r\n@Component({\r\n  selector: 'app-gif-list',\r\n  templateUrl: './gif-list.page.html',\r\n  styleUrls: ['./gif-list.page.scss'],\r\n})\r\nexport class GifListPage implements OnInit {\r\n\r\n  @ViewChild(IonInfiniteScroll) infinite: IonInfiniteScroll;\r\n\r\n  private n:number=0;\r\n  public gifts: Gift[] = [];\r\n\r\n  searchStr = \"\";\r\n  private miLoading: HTMLIonLoadingElement;\r\n\r\n  constructor(\r\n    private gs: GiftService,\r\n    private toast: ToastController,\r\n    private AlertCtrl: AlertController,\r\n    private modalCtrl: ModalController,\r\n    private loading: LoadingController) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    await this.loadgifts();\r\n    this.n=this.gifts.length;\r\n  }\r\n\r\n  public async loadgifts(event?) {\r\n    \r\n    let newgifts:Gift[]=[];\r\n    \r\n    if(this.gifts.length==0){ //inicio\r\n      \r\n      if(!event){ //si event, el reset ya tiene loading...\r\n        this.presentLoading();\r\n      }\r\n      \r\n      this.infinite.disabled=false;\r\n      newgifts=await this.gs.getAllPaged(15,0);\r\n      \r\n      this.gifts=this.gifts.concat(newgifts);\r\n\r\n    }\r\n\r\n    if(newgifts.length<15){\r\n      this.infinite.disabled=true;\r\n    }\r\n\r\n    if(event){\r\n      event.target.complete();\r\n    }\r\n    else{\r\n      this.loading.dismiss();\r\n    }\r\n  }\r\n\r\n  public async edit(gift:Gift){\r\n    const modal = await this.modalCtrl.create({\r\n      component: GifUpdatePage,\r\n      componentProps: {\r\n        gift:gift\r\n      }\r\n    });\r\n\r\n    await modal.present();\r\n\r\n    const resp=await modal.onDidDismiss();\r\n\r\n    if(resp.data!=null){\r\n      let i:number=this.gifts.indexOf(gift);\r\n      this.gifts[i]=resp.data.newGift;\r\n    }\r\n  }\r\n\r\n  public async delete(gift:Gift){\r\n    await this.presentLoading();\r\n    const result:boolean=await this.gs.delete(gift);\r\n    let i=this.gifts.indexOf(gift,0);\r\n    \r\n    await this.miLoading.dismiss();\r\n    if(result){\r\n      if(i>-1){\r\n        this.gifts.splice(i,1);\r\n      }\r\n      this.presentToast(\"Regalo eliminada correctamente.\",\"success\");\r\n    }\r\n    else{\r\n      this.presentToast(\"Error al eliminar el regalo...\",\"danger\");\r\n    }\r\n  }\r\n\r\n  public async showDeleteMenu(gift: Gift) {\r\n    const alert = await this.AlertCtrl.create({\r\n      header: 'Confirmación',\r\n      message: '¿Desea eliminar este Regalo?',\r\n      buttons: [\r\n        {\r\n          text: 'Eliminar',\r\n          //cssClass: 'rojo',\r\n          handler: () => {\r\n            this.delete(gift);\r\n          }\r\n        },\r\n\r\n        {\r\n          text: 'Cancelar',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  public async infiniteLoad($event) {\r\n    let newgifts:Gift[]=[];\r\n    if(!this.infinite.disabled){\r\n      newgifts=await this.gs.getAllPaged(15,this.gifts.length);\r\n      this.gifts=this.gifts.concat(newgifts);\r\n\r\n      if(newgifts.length<15){\r\n        this.infinite.disabled=true;\r\n      }\r\n    }\r\n  }\r\n\r\n  async presentLoading() {\r\n    this.miLoading = await this.loading.create({\r\n      message: ''\r\n    });\r\n    await this.miLoading.present();\r\n  }\r\n\r\n  async presentToast(msg: string, clr: string) {\r\n    const miToast = await this.toast.create({\r\n      message: msg,\r\n      duration: 2000,\r\n      color: clr\r\n    });\r\n    miToast.present();\r\n  }\r\n\r\n  public onSearchChange(event) {\r\n    this.searchStr = event.detail.value;\r\n  }\r\n\r\n  public async reset(event){\r\n    this.n=0;\r\n    this.infinite.disabled=false;\r\n    this.gifts=[];\r\n    this.loadgifts(event);\r\n  }\r\n\r\n}\r\n","export default \"<ion-header [translucent]=\\\"false\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Lista de Regalos</ion-title>\\r\\n\\r\\n    <ion-buttons style=\\\"margin-right: 1%;\\\" slot=\\\"end\\\">\\r\\n      <ion-icon class=\\\"icon-logout\\\" slot=\\\"end\\\" name=\\\"add-circle\\\" style=\\\"zoom:1.5\\\"></ion-icon>\\r\\n      <ion-icon class=\\\"icon-logout\\\" slot=\\\"end\\\" name=\\\"person\\\" style=\\\"zoom:1.5\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-searchbar color=\\\"dark\\\" placeholder=\\\"Encuentra la agencia que estás buscando...\\\" inputmode=\\\"text\\\" type=\\\"text\\\" (ionChange)=\\\"onSearchChange($event)\\\" showCancelButton=\\\"always\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"reset($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <ion-list> \\r\\n\\r\\n    <ion-item-sliding *ngFor=\\\"let gift of this.gifts;let i=index\\\" color=\\\"primary\\\">\\r\\n      <ion-item-options side=\\\"start\\\">\\r\\n        <ion-item-option (click)=\\\"edit(gift)\\\">\\r\\n          <ion-icon name=\\\"create\\\" style=\\\"zoom:3.0\\\"></ion-icon>\\r\\n        </ion-item-option>\\r\\n      </ion-item-options>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label>\\r\\n          <h2>{{gift.name}}</h2>\\r\\n          <p>{{gift.points}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item-options side=\\\"end\\\">\\r\\n        <ion-item-option color=\\\"danger\\\" expandable (click)=\\\"showDeleteMenu(gift)\\\">\\r\\n          <ion-icon name=\\\"remove-circle\\\" style=\\\"zoom:3.0\\\"></ion-icon>\\r\\n        </ion-item-option>\\r\\n      </ion-item-options>\\r\\n    </ion-item-sliding>\\r\\n\\r\\n\\r\\n  </ion-list>\\r\\n\\r\\n\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"infiniteLoad($event)\\\">\\r\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}