"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[832],{832:(C,f,r)=>{r.r(f),r.d(f,{ExchangeGiftListPageModule:()=>L});var d=r(6019),Z=r(9010),o=r(2651),u=r(8725),g=r(4762),m=r(8015),e=r(865),E=r(922),x=r(371),_=r(9311);function y(s,h){1&s&&e._UZ(0,"ion-icon",31)}function T(s,h){if(1&s){const i=e.EpF();e.TgZ(0,"ion-row",23),e.NdJ("click",function(){const c=e.CHM(i).$implicit;return e.oxw(2).show(c)}),e.TgZ(1,"ion-col",24),e.TgZ(2,"div",25),e.YNc(3,y,1,0,"ion-icon",26),e.qZA(),e.qZA(),e.TgZ(4,"ion-col",27),e.TgZ(5,"ion-text",28),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"ion-col",29),e.TgZ(8,"ion-text",28),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",30),e.TgZ(11,"ion-text",28),e._uU(12),e.qZA(),e.qZA(),e.qZA()}if(2&s){const i=h.$implicit;e.xp6(3),e.Q6J("ngIf",i.delivered),e.xp6(3),e.hij(" ",i.gift.name," "),e.xp6(3),e.hij(" ",i.gift.points," "),e.xp6(3),e.hij(" ",i.dateExchange," ")}}function v(s,h){if(1&s&&(e.TgZ(0,"ion-grid",21),e.YNc(1,T,13,4,"ion-row",22),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.exchanges)}}const A=[{path:"",component:(()=>{class s{constructor(i,t,a,c,l,n){this.exs=i,this.AlertCtrl=t,this.pt=a,this.uts=c,this.authS=l,this.modalCtrl=n,this.exchanges=[],this.oldExchanges=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,g.mG)(this,void 0,void 0,function*(){this.niTems=Math.ceil(this.pt.height()/20+10),yield this.loadExchanges(),console.log(this.exchanges)})}loadExchanges(i){return(0,g.mG)(this,void 0,void 0,function*(){let t=[];0==this.exchanges.length&&(yield this.uts.presentLoading(),console.log(this.authS.agency),t=yield this.exs.getByAgencyPaged(this.authS.agency,this.niTems,0),this.exchanges=this.exchanges.concat(t),this.exchanges=this.sortList(this.exchanges),this.oldExchanges=[],this.oldExchanges=this.oldExchanges.concat(t)),t.length<this.niTems&&(this.infinite.disabled=!0,this.oldInfinite=!0),i&&i.target.complete(),yield this.uts.hideLoading()})}infiniteLoad(i){return(0,g.mG)(this,void 0,void 0,function*(){let t=[];this.infinite.disabled||(t=yield this.exs.getAllPaged(this.niTems,this.exchanges.length),t=this.sortList(t),this.exchanges=this.exchanges.concat(t),this.oldExchanges=this.oldExchanges.concat(t),t.length<30&&(this.infinite.disabled=!0,this.oldInfinite=!0))})}reset(i){return(0,g.mG)(this,void 0,void 0,function*(){this.infinite.disabled=!1,this.oldInfinite=!1,this.exchanges=[],this.oldExchanges=[],this.loadExchanges(i)})}searchChange(){return(0,g.mG)(this,void 0,void 0,function*(){console.log("entro en searchbar");let i=[],t=[],a=this.select.value;this.searchStr=this.sb.value;let c=[];this.exchanges=[];let l=this.searchStr.length;l>0?(yield this.uts.presentLoading(),c=yield this.exs.getByDateFilter(this.searchStr),c.forEach(n=>{i.includes(n)||n.agency.id==this.authS.agency.id&&i.push(n)}),+this.searchStr>=0&&(c=yield this.exs.getByPoints(this.searchStr),c.forEach(n=>{i.includes(n)||n.agency.id==this.authS.agency.id&&i.push(n)})),c=yield this.exs.getByGiftName(this.searchStr),c.forEach(n=>{let p=!0;i.forEach(b=>{(b.id=n.id)&&(p=!1)}),p&&n.agency.id==this.authS.agency.id&&i.push(n)}),c=yield this.exs.getByAgencyUsername(this.searchStr),c.forEach(n=>{i.includes(n)||n.agency.id==this.authS.agency.id&&i.push(n)}),"true"==a?(i.forEach(n=>{n.delivered&&t.push(n)}),this.exchanges=t):"false"==a?(i.forEach(n=>{n.delivered||t.push(n)}),this.exchanges=t):this.exchanges=i,this.infinite.disabled=!1,yield this.uts.hideLoading()):l<1&&(i=i.concat(this.oldExchanges),"true"==a?(i.forEach(n=>{n.delivered&&t.push(n)}),this.exchanges=t):"false"==a?(i.forEach(n=>{n.delivered||t.push(n)}),this.exchanges=t):this.exchanges=i,this.infinite.disabled=this.oldInfinite,yield this.uts.hideLoading()),this.exchanges=this.sortList(this.exchanges)})}show(i){return(0,g.mG)(this,void 0,void 0,function*(){try{const t=yield this.modalCtrl.create({component:m.C,componentProps:{exchangesaw:i}});if(yield t.present(),null!=(yield t.onDidDismiss()).data){let c=this.exchanges.indexOf(i),l=this.oldExchanges.indexOf(i);yield this.uts.presentLoading(),this.exchanges.splice(c,1),this.oldExchanges.splice(l,1),yield this.uts.hideLoading()}}catch(t){console.log(t)}})}sortList(i){return null!=i&&i.length>1&&(i=i.sort((t,a)=>t.dateExchange>a.dateExchange?1:t.dateExchange<a.dateExchange?-1:t.id>a.id?1:t.id<a.id?-1:0)),i}logout(){this.authS.logout()}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(E.y),e.Y36(o.Br),e.Y36(o.t4),e.Y36(x.f),e.Y36(_.e),e.Y36(o.IN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-exchange-gift-list"]],viewQuery:function(i,t){if(1&i&&(e.Gf(o.ju,5),e.Gf(o.t9,5),e.Gf(o.VI,5)),2&i){let a;e.iGM(a=e.CRH())&&(t.infinite=a.first),e.iGM(a=e.CRH())&&(t.select=a.first),e.iGM(a=e.CRH())&&(t.sb=a.first)}},decls:39,vars:2,consts:[[3,"translucent"],["color","medium"],["slot","end","title","Cerrar Sesi\xf3n",2,"margin-right","1%","cursor","pointer",3,"click"],["slot","end","name","log-out-outline",2,"color","rgb(255, 255, 255)","zoom","1.7","cursor","pointer"],["size","9"],["placeholder","Encuentra el canjeo que est\xe1s buscando...","inputmode","text","type","text","debounce","1000","showCancelButton","always",3,"ionChange"],["sizeSm","3","sizeLg","3",1,"selector"],[2,"height","85%","margin-top","1.1%"],["interface","popover","multiple","false",3,"ionChange"],["value","true"],["value","false"],["value","all"],[1,"header-row"],["size","1",2,"border","0px !important"],["size","4",2,"border","0px !important"],["size","3",2,"border","0px !important"],["slot","fixed",3,"ionRefresh"],[1,"body"],["class","ion-text-center",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],[1,"ion-text-center"],["let","","class","row",3,"click",4,"ngFor","ngForOf"],["let","",1,"row",3,"click"],["size","1"],["title","Entregado"],["class","icon-c","style","color:blueviolet","name","gift",4,"ngIf"],["ize","4"],[1,"pointer"],["size","3"],["size","4"],["name","gift",1,"icon-c",2,"color","blueviolet"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3,"Lista de Canjees"),e.qZA(),e.TgZ(4,"ion-buttons",2),e.NdJ("click",function(){return t.logout()}),e._UZ(5,"ion-icon",3),e.qZA(),e.qZA(),e.TgZ(6,"ion-toolbar",1),e.TgZ(7,"ion-row"),e.TgZ(8,"ion-col",4),e.TgZ(9,"ion-searchbar",5),e.NdJ("ionChange",function(){return t.searchChange()}),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",6),e.TgZ(11,"ion-item",7),e.TgZ(12,"ion-label"),e._uU(13,"Entregado:"),e.qZA(),e.TgZ(14,"ion-select",8),e.NdJ("ionChange",function(){return t.searchChange()}),e.TgZ(15,"ion-select-option",9),e._uU(16,"Si"),e.qZA(),e.TgZ(17,"ion-select-option",10),e._uU(18,"No"),e.qZA(),e.TgZ(19,"ion-select-option",11),e._uU(20,"Todos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-row",12),e._UZ(22,"ion-col",13),e.TgZ(23,"ion-col",14),e.TgZ(24,"ion-text"),e._uU(25,"Regalo"),e.qZA(),e.qZA(),e.TgZ(26,"ion-col",15),e.TgZ(27,"ion-text"),e._uU(28,"Puntos"),e.qZA(),e.qZA(),e.TgZ(29,"ion-col",14),e.TgZ(30,"ion-text"),e._uU(31,"Fecha del pedido"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"ion-content"),e.TgZ(33,"ion-refresher",16),e.NdJ("ionRefresh",function(c){return t.reset(c)}),e._UZ(34,"ion-refresher-content"),e.qZA(),e.TgZ(35,"div",17),e.YNc(36,v,2,1,"ion-grid",18),e.TgZ(37,"ion-infinite-scroll",19),e.NdJ("ionInfinite",function(c){return t.infiniteLoad(c)}),e._UZ(38,"ion-infinite-scroll-content",20),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("translucent",!1),e.xp6(36),e.Q6J("ngIf",t.exchanges.length>0))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.gu,o.Nd,o.wI,o.VI,o.j9,o.Ie,o.Q$,o.t9,o.QI,o.n0,o.yW,o.W2,o.nJ,o.Wo,d.O5,o.ju,o.MB,o.jY,d.sg],styles:['ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;font-size:1.2rem;text-align:center}.row[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;background-color:#fff!important;border:1px solid #b3b3b3;border-radius:25px;margin:.6% 1%;cursor:pointer}.body[_ngcontent-%COMP%]{background-color:#f5fbfe!important;font-family:"Roboto",sans-serif;color:#4b4b4d;min-height:100%}ion-icon[_ngcontent-%COMP%]{pointer-events:none}']}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),s})(),L=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[x.f],imports:[[d.ez,Z.u5,o.Pc,P]]}),s})()}}]);