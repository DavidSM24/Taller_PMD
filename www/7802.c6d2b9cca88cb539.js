"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7802],{7802:(_,u,l)=>{l.r(u),l.d(u,{GifListPageModule:()=>y});var g=l(6019),Z=l(9010),s=l(2651),h=l(8725),f=l(4762),p=l(6667),i=l(865),T=l(4483),m=l(371),v=l(9311);function A(o,c){1&o&&i._UZ(0,"ion-icon",39)}function C(o,c){1&o&&i._UZ(0,"ion-icon",40)}function G(o,c){if(1&o){const t=i.EpF();i.TgZ(0,"ion-row",27),i.TgZ(1,"ion-col",28),i.TgZ(2,"ion-text"),i.TgZ(3,"div",29),i.NdJ("click",function(){const r=i.CHM(t).$implicit;return i.oxw().edit(r)}),i.TgZ(4,"ion-icon",30),i.NdJ("click",function(){const r=i.CHM(t).$implicit;return i.oxw().edit(r)}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(5,"ion-col",31),i.TgZ(6,"ion-text"),i._uU(7),i.qZA(),i.qZA(),i.TgZ(8,"ion-col",32),i.TgZ(9,"ion-text"),i._uU(10),i.qZA(),i.qZA(),i.TgZ(11,"ion-col",31),i.TgZ(12,"div",33),i.YNc(13,A,1,0,"ion-icon",34),i.qZA(),i.TgZ(14,"div",35),i.YNc(15,C,1,0,"ion-icon",36),i.qZA(),i.qZA(),i.TgZ(16,"ion-col",28),i.TgZ(17,"ion-text"),i.TgZ(18,"div",37),i.NdJ("click",function(){const r=i.CHM(t).$implicit;return i.oxw().showDeleteMenu(r)}),i.TgZ(19,"ion-icon",38),i.NdJ("click",function(){const r=i.CHM(t).$implicit;return i.oxw().showDeleteMenu(r)}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&o){const t=c.$implicit;i.xp6(7),i.hij(" ",t.name," "),i.xp6(3),i.hij(" ",t.points," "),i.xp6(3),i.Q6J("ngIf",t.available),i.xp6(2),i.Q6J("ngIf",!t.available)}}const x=[{path:"",component:(()=>{class o{constructor(t,e,n,r,d,a){this.gs=t,this.AlertCtrl=e,this.modalCtrl=n,this.pt=r,this.uts=d,this.authS=a,this.n=0,this.gifts=[],this.oldGifts=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,f.mG)(this,void 0,void 0,function*(){console.log(this.gs.added),this.gs.added?(this.reset(null),this.gs.added=!1):(this.niTems=Math.ceil(this.pt.height()/20+10),yield this.loadgifts())})}getAdded(t){this.gifts=t}loadgifts(t){return(0,f.mG)(this,void 0,void 0,function*(){let e=[];0==this.gifts.length&&(yield this.uts.presentLoading(),this.infinite.disabled=!1,this.oldInfinite=!1,e=yield this.gs.getAllPaged(this.niTems,0),this.gifts=this.gifts.concat(e),this.gifts=this.sortList(this.gifts),this.oldGifts=[],this.oldGifts=this.oldGifts.concat(e)),e.length<this.niTems&&(this.infinite.disabled=!0,this.oldInfinite=!0),t&&t.target.complete(),yield this.uts.hideLoading()})}edit(t){return(0,f.mG)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:p.f,cssClass:"fullscreen",componentProps:{gift:t}});yield e.present();const n=yield e.onDidDismiss();if(null!=n.data){let r=this.gifts.indexOf(t);this.gifts[r]=n.data.newGift}})}delete(t){return(0,f.mG)(this,void 0,void 0,function*(){yield this.uts.presentLoading();const e=yield this.gs.delete(t);let n=this.gifts.indexOf(t,0);yield this.uts.hideLoading(),e?(n>-1&&this.gifts.splice(n,1),this.uts.presentToast("Regalo eliminada correctamente.","success")):this.uts.presentToast("Error al eliminar el regalo...","danger")})}showDeleteMenu(t){return(0,f.mG)(this,void 0,void 0,function*(){yield(yield this.AlertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfDesea eliminar este Regalo?",buttons:[{text:"Eliminar",cssClass:"rojo",handler:()=>{this.delete(t)}},{text:"Cancelar",cssClass:"secondary",role:"cancel"}]})).present()})}infiniteLoad(t){return(0,f.mG)(this,void 0,void 0,function*(){let e=[];this.infinite.disabled||(e=yield this.gs.getAllPaged(this.niTems,this.gifts.length),e=this.sortList(e),this.gifts=this.gifts.concat(e),this.oldGifts=this.oldGifts.concat(e),e.length<this.niTems&&(this.infinite.disabled=!0,this.oldInfinite=!0))})}onSearchChange(){return(0,f.mG)(this,void 0,void 0,function*(){let t=[],e=[],n=this.select.value;this.searchStr=this.sb.value,console.log(this.searchStr);let r=[];this.gifts=[];let d=this.searchStr.length;d>0?(yield this.uts.presentLoading(),r=yield this.gs.getByNamePaged(this.searchStr,9999,0),r.forEach(a=>{t.includes(a)||t.push(a)}),+this.searchStr>=0&&(r=yield this.gs.getByPoints(+this.searchStr),r.forEach(a=>{t.includes(a)||t.push(a)})),"true"==n?(t.forEach(a=>{a.available&&e.push(a)}),this.gifts=e):"false"==n?(t.forEach(a=>{a.available||e.push(a)}),this.gifts=e):this.gifts=t,this.infinite.disabled=!0,yield this.uts.hideLoading()):d<1&&(t=t.concat(this.oldGifts),this.infinite.disabled=this.oldInfinite,"true"==n?(t.forEach(a=>{a.available&&e.push(a)}),this.gifts=e):"false"==n?(t.forEach(a=>{a.available||e.push(a)}),this.gifts=e):this.gifts=t,this.gifts=this.sortList(this.gifts),yield this.uts.hideLoading())})}reset(t){return(0,f.mG)(this,void 0,void 0,function*(){this.infinite.disabled=!1,this.oldInfinite=!1,this.gifts=[],this.loadgifts(t)})}logout(){this.authS.logout()}sortList(t){return null!=t&&t.length>1&&(t=t.sort((e,n)=>e.name>n.name?1:e.name<n.name?-1:e.id>n.id?1:e.id<n.id?-1:0)),t}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(T.R),i.Y36(s.Br),i.Y36(s.IN),i.Y36(s.t4),i.Y36(m.f),i.Y36(v.e))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-gif-list"]],viewQuery:function(t,e){if(1&t&&(i.Gf(s.ju,5),i.Gf(s.t9,5),i.Gf(s.VI,5)),2&t){let n;i.iGM(n=i.CRH())&&(e.infinite=n.first),i.iGM(n=i.CRH())&&(e.select=n.first),i.iGM(n=i.CRH())&&(e.sb=n.first)}},decls:47,vars:3,consts:[[3,"translucent"],["color","primary"],["slot","end",1,"icon-div-container",2,"margin-right","1%"],["title","Nuevo","routerLink","/tab-administrator/gift/create"],["slot","end",1,"icon-logout",2,"pointer-events","none","zoom","1.5","cursor","pointer","content","url(../../../../assets/icon/add-circle-outline.png)"],["title","Cerrar Sesi\xf3n",3,"click"],["slot","end","name","log-out-outline",1,"icon-logout",2,"pointer-events","none","zoom","1.7","cursor","pointer"],["size","9.5"],["placeholder","Encuentra el regalo que est\xe1s buscando...","debounce","600","inputmode","text","type","text","showCancelButton","always",3,"ionChange"],[2,"height","85%","margin-top","1.1%"],["interface","popover","multiple","false",3,"ionChange"],["value","true"],["value","false"],["value","all"],[1,"header-row"],["rowItem",""],["size","1",2,"border","0px !important"],["size","3.3",2,"border","0px !important"],["size","3.4",2,"border","0px !important","margin-left","-0.5% !important"],["size","3.3",2,"border","0px !important","margin-left","-1% !important"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"body"],[1,"ion-text-center"],["let","","class","row",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],["let","",1,"row"],["size","1"],["title","Editar",2,"cursor","pointer",3,"click"],["name","pencil",2,"color","#22388c",3,"click"],["size","3.3"],["size","3.4"],["title","Disponible"],["name","checkmark-circle","style","color: #39ff14;",4,"ngIf"],["title","Sin stock"],["name","close-circle","style","color: red;",4,"ngIf"],["title","Eliminar",2,"cursor","pointer",3,"click"],["name","trash","color","danger",3,"click"],["name","checkmark-circle",2,"color","#39ff14"],["name","close-circle",2,"color","red"]],template:function(t,e){1&t&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar",1),i.TgZ(2,"ion-title"),i._uU(3,"Lista de Regalos"),i.qZA(),i.TgZ(4,"ion-buttons",2),i.TgZ(5,"div",3),i._UZ(6,"ion-icon",4),i.qZA(),i.TgZ(7,"div",5),i.NdJ("click",function(){return e.logout()}),i._UZ(8,"ion-icon",6),i.qZA(),i.qZA(),i.qZA(),i.TgZ(9,"ion-toolbar",1),i.TgZ(10,"ion-row"),i.TgZ(11,"ion-col",7),i.TgZ(12,"ion-searchbar",8),i.NdJ("ionChange",function(){return e.onSearchChange()}),i.qZA(),i.qZA(),i.TgZ(13,"ion-col"),i.TgZ(14,"ion-item",9),i.TgZ(15,"ion-label"),i._uU(16,"Disponible:"),i.qZA(),i.TgZ(17,"ion-select",10),i.NdJ("ionChange",function(){return e.onSearchChange()}),i.TgZ(18,"ion-select-option",11),i._uU(19,"Si"),i.qZA(),i.TgZ(20,"ion-select-option",12),i._uU(21,"No"),i.qZA(),i.TgZ(22,"ion-select-option",13),i._uU(23,"Todos"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(24,"ion-row",14,15),i.TgZ(26,"ion-col",16),i._UZ(27,"ion-text"),i.qZA(),i.TgZ(28,"ion-col",17),i.TgZ(29,"ion-text"),i._uU(30,"Nombre"),i.qZA(),i.qZA(),i.TgZ(31,"ion-col",18),i.TgZ(32,"ion-text"),i._uU(33,"Puntos"),i.qZA(),i.qZA(),i.TgZ(34,"ion-col",19),i.TgZ(35,"ion-text"),i._uU(36,"Disponible"),i.qZA(),i.qZA(),i.TgZ(37,"ion-col",16),i._UZ(38,"ion-text"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(39,"ion-content",20),i.TgZ(40,"ion-refresher",21),i.NdJ("ionRefresh",function(r){return e.reset(r)}),i._UZ(41,"ion-refresher-content"),i.qZA(),i.TgZ(42,"div",22),i.TgZ(43,"ion-grid",23),i.YNc(44,G,20,4,"ion-row",24),i.qZA(),i.TgZ(45,"ion-infinite-scroll",25),i.NdJ("ionInfinite",function(r){return e.infiniteLoad(r)}),i._UZ(46,"ion-infinite-scroll-content",26),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.Q6J("translucent",!1),i.xp6(39),i.Q6J("fullscreen",!0),i.xp6(5),i.Q6J("ngForOf",e.gifts))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YI,h.rH,s.gu,s.Nd,s.wI,s.VI,s.j9,s.Ie,s.Q$,s.t9,s.QI,s.n0,s.yW,s.W2,s.nJ,s.Wo,s.jY,g.sg,s.ju,s.MB,g.O5],styles:['ion-col[_ngcontent-%COMP%]{border-bottom:1px solid #4b4b4d}ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;font-size:1.2rem;text-align:center}.row[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem}.body[_ngcontent-%COMP%]{background-color:#fff;font-family:"Roboto",sans-serif;color:#4b4b4d}ion-icon[_ngcontent-%COMP%]{pointer-events:none}']}),o})(),children:[{path:"gift-create",loadChildren:()=>l.e(7266).then(l.bind(l,7266)).then(o=>o.GifCreatePageModule)},{path:"gift-saw",loadChildren:()=>l.e(6060).then(l.bind(l,6060)).then(o=>o.GifSawPageModule)},{path:"gift-update",loadChildren:()=>l.e(8592).then(l.bind(l,3082)).then(o=>o.GifUpdatePageModule)}]}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[[h.Bz.forChild(x)],h.Bz]}),o})();var L=l(8816);let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({providers:[m.f],imports:[[g.ez,s.Pc,P,Z.u5,Z.UX,L.h]]}),o})()}}]);