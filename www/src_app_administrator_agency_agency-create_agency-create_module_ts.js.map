{"version":3,"file":"src_app_administrator_agency_agency-create_agency-create_module_ts.js","mappings":"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","sources":["./src/app/administrator/agency/agency-create/agency-create-routing.module.ts","./src/app/administrator/agency/agency-create/agency-create.module.ts","./src/app/administrator/agency/agency-create/agency-create.page.ts","./src/app/administrator/agency/agency-create/agency-create.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AgencyCreatePage } from './agency-create.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AgencyCreatePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AgencyCreatePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AgencyCreatePageRoutingModule } from './agency-create-routing.module';\r\n\r\nimport { AgencyCreatePage } from './agency-create.page';\r\nimport { InsuranceCompanyService } from '../../../services/insurance-company.service';\r\nimport { AgencyService } from 'src/app/services/agency.service';\r\nimport { UserService } from '../../../services/user.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    AgencyCreatePageRoutingModule,\r\n    ReactiveFormsModule\r\n\r\n  ],\r\n  providers:[AgencyService,InsuranceCompanyService,UtilService],\r\n  declarations: [AgencyCreatePage]\r\n})\r\nexport class AgencyCreatePageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { IonToggle, NavController, PickerColumnOption, PickerController, PickerOptions } from '@ionic/angular';\r\nimport { Agency } from 'src/app/models/Agency';\r\nimport { InsuranceCompany } from 'src/app/models/InsuranceCompany';\r\nimport { AgencyService } from 'src/app/services/agency.service';\r\nimport { InsuranceCompanyService } from 'src/app/services/insurance-company.service';\r\nimport { UtilService } from '../../../services/util.service';\r\n\r\n@Component({\r\n  selector: 'app-agency-create',\r\n  templateUrl: './agency-create.page.html',\r\n  styleUrls: ['./agency-create.page.scss'],\r\n})\r\nexport class AgencyCreatePage {\r\n\r\n  @ViewChild(IonToggle) toggle: IonToggle;\r\n\r\n  public insurance:InsuranceCompany=null;\r\n  public formAgency: FormGroup;\r\n  public companies: InsuranceCompany[];\r\n\r\n  constructor(\r\n    private as: AgencyService,\r\n    private fb: FormBuilder,\r\n    private is: InsuranceCompanyService,\r\n    private pickerController:PickerController,\r\n    private uts:UtilService,\r\n    private nav:NavController) {\r\n\r\n      this.formAgency = this.fb.group({\r\n        zipCode: [\"\", Validators.required,],\r\n        address: [\"\", Validators.required],\r\n        location: [\"\", Validators.required],\r\n        phoneNumber: [\"\", Validators.required]\r\n      });\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n\r\n    \r\n\r\n    await this.uts.presentLoading();\r\n    this.companies=await this.is.getAll();\r\n    if(this.companies.length<=0){\r\n      await this.uts.hideLoading();\r\n      this.uts.presentToast('Para crear agencias, deben existir compañías de seguros.','danger','ban');\r\n      this.nav.back();\r\n    }\r\n    await this.uts.hideLoading();\r\n  }\r\n\r\n  public async create(): Promise<void> {\r\n\r\n    await this.uts.presentLoading();\r\n\r\n    if(this.insurance!=null){\r\n      let ag: Agency = await this.as.getById(7);\r\n\r\n\r\n      let newAgency: Agency = {\r\n        zipCode: this.formAgency.get(\"zipCode\").value,\r\n        address: this.formAgency.get(\"address\").value,\r\n        location: this.formAgency.get(\"location\").value,\r\n        phoneNumber: this.formAgency.get(\"phoneNumber\").value,\r\n        amount: 0,\r\n        points: 0,\r\n        pointsRedeemed: 0,\r\n        myInsuranceCompany: this.insurance,\r\n        myCarRepairs: [],\r\n        myExchangesGifts: [],\r\n        myUser: ag.myUser,\r\n        active: this.toggle.checked\r\n      }\r\n\r\n      \r\n\r\n      newAgency = await this.as.createOrUpdate(newAgency);\r\n      if(newAgency.id){\r\n        this.formAgency.reset();\r\n        this.uts.presentToast('La agencia se ha creado correctamente.','success',\"checkmark-circle-outline\");\r\n        this.as.added=true;\r\n\r\n      }\r\n      else{\r\n        this.uts.presentToast('Un error ha surgido al intentar crear la agencia.','danger','ban');\r\n      }\r\n\r\n      await this.uts.hideLoading();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  async showPicker() {\r\n    let options: PickerOptions = {\r\n      buttons: [\r\n        {\r\n          text: \"Cancel\",\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text:'Ok',\r\n          handler:(value:any) => {\r\n            this.insurance=value.Compañías.value;\r\n          }\r\n        }\r\n      ],\r\n      columns:[{\r\n        name:'Compañías',\r\n        options:this.getColumnOptions()\r\n      }]\r\n    };\r\n\r\n    let picker = await this.pickerController.create(options);\r\n    picker.present()\r\n  }\r\n\r\n  getColumnOptions(){\r\n    let options = [];\r\n    this.companies.forEach(x => {\r\n      options.push({text:x.cia_Name,value:x});\r\n    });\r\n    return options;\r\n  }\r\n\r\n}\r\n\r\nexport interface PickerColumn {\r\n  name: string;\r\n  align?: string;\r\n  selectedIndex?: number;\r\n  prevSelected?: number;\r\n  prefix?: string;\r\n  suffix?: string;\r\n  options: PickerColumnOption[];\r\n  cssClass?: string | string[];\r\n  columnWidth?: string;\r\n  prefixWidth?: string;\r\n  suffixWidth?: string;\r\n  optionsWidth?: string;\r\n  refresh?: () => void;\r\n}\r\n","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>\\r\\n      Prueba Agencia\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <div class=\\\"body\\\">\\r\\n    <form [formGroup]=\\\"formAgency\\\" class=\\\"ion-padding\\\">\\r\\n      <div class=\\\"formulario\\\">\\r\\n      <ion-grid>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Código Zip:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input type=\\\"number\\\" class=\\\"customInput\\\" formControlName=\\\"zipCode\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Dirección:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input pattern=\\\".{3,50}\\\" class=\\\"customInput\\\" type=\\\"text\\\" formControlName=\\\"address\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Localidad:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"text\\\" formControlName=\\\"location\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"1\\\" sizeLg=\\\"1\\\">\\r\\n            <ion-label>Número de Teléfono:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"11\\\" sizeLg=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"number\\\" formControlName=\\\"phoneNumber\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"9\\\" sizeLg=\\\"1\\\">\\r\\n            Activa:\\r\\n          </ion-col>\\r\\n          <ion-col sizeSm=\\\"3\\\" sizeLg=\\\"11  \\\">\\r\\n            <ion-item  lines=\\\"none\\\">\\r\\n              No<ion-toggle></ion-toggle>Si\\r\\n           </ion-item>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col sizeSm=\\\"2\\\" sizeLg=\\\"2\\\">\\r\\n            <ion-label>Compañía de Seguros:</ion-label>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col sizeSm=\\\"2\\\" sizeLg=\\\"2\\\">\\r\\n\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showPicker()\\\" *ngIf=\\\"this.insurance==null\\\">\\r\\n              Seleccionar\\r\\n            </ion-button>\\r\\n\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showPicker()\\\" *ngIf=\\\"this.insurance!=null\\\">\\r\\n              {{this.insurance.cia_Name}}\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" class=\\\"button\\\">\\r\\n              Volver\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button (click)=\\\"create()\\\" expand=\\\"block\\\" shape=\\\"round\\\" class=\\\"button\\\" [disabled]=\\\"this.formAgency.invalid||this.insurance==null\\\">\\r\\n              Crear Agencia\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n    </div>\\r\\n    </form>\\r\\n\\r\\n</div>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}