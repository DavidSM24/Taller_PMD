{"version":3,"file":"src_app_services_gift_service_ts-src_app_services_util_service_ts.js","mappings":"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","sources":["./src/app/services/gift.service.ts","./src/app/services/util.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Gift } from '../models/Gift';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GiftService {\r\n\r\n  endpoint: string = \"/gifts\";\r\n\r\n  URLDatabase: string;\r\n\r\n  constructor(public http: HttpClient) {\r\n    this.URLDatabase = environment.herokuConfig.url;\r\n  }\r\n\r\n  private async getListData(endpoint: string): Promise<Gift[]> {\r\n    let gifts: Gift[] = [];\r\n\r\n    return new Promise(resolve => {\r\n      this.http.get(endpoint).subscribe((data: any[]) => {\r\n\r\n        if (data != null && data.length > 0) {\r\n\r\n          for (let g of data) {\r\n            const tmp: Gift = {\r\n              id: g.id,\r\n              name: g.name,\r\n              points: g.points,\r\n              picture: g.picture,\r\n              exchangeGifts: [],\r\n              available: g.available\r\n            }\r\n\r\n            for (let eg of g.exchangeGifts) {\r\n              tmp.exchangeGifts.push(eg);\r\n            }\r\n\r\n            gifts.push(tmp);\r\n          }\r\n        }\r\n        console.log(data);\r\n        resolve(gifts);\r\n      }, error => {\r\n        console.log(error);\r\n      });\r\n    });\r\n  }\r\n\r\n  public async getAll(): Promise<Gift[]> {\r\n\r\n    return this.getListData(this.URLDatabase + this.endpoint);\r\n  }\r\n\r\n  public async getAllPaged(limit: number, offset: number): Promise<Gift[]> {\r\n    return this.getListData(this.URLDatabase + this.endpoint + \"/element/\" + limit + \"/page/\" + offset);\r\n  }\r\n\r\n  public async getById(id: number): Promise<Gift> {\r\n\r\n    let gift: Gift = null;\r\n\r\n    return new Promise(resolve => {\r\n      this.http.get(this.URLDatabase + this.endpoint + \"/id/\" + id).subscribe((data: any) => {\r\n\r\n        if (data.id) {\r\n          const tmp: Gift = {\r\n            id: data.id,\r\n            name: data.name,\r\n            points: data.points,\r\n            picture: data.picture,\r\n            exchangeGifts: [],\r\n            available: data.available\r\n          }\r\n\r\n          for (let eg of data.exchangeGifts) {\r\n            tmp.exchangeGifts.push(eg);\r\n          }\r\n\r\n          gift = tmp;\r\n        }\r\n\r\n        console.log(gift);\r\n\r\n        resolve(gift);\r\n      }, error => {\r\n        console.log(error);\r\n        console.log(gift);\r\n        resolve(gift);\r\n      });\r\n    });\r\n  }\r\n\r\n  public async getByNamePaged(name: string, limit: number, offset: number): Promise<Gift[]> {\r\n    return this.getListData(this.URLDatabase+ this.endpoint + \"/name/\" + name + \"/element/\" + limit + \"/page/\" + offset);\r\n  }\r\n\r\n  public async getByAvailablePaged(available: boolean, limit: number, offset: number): Promise<Gift[]> {\r\n    return this.getListData(this.URLDatabase + this.endpoint + \"/available/\" + available + \"/element/\" + limit + \"/page/\" + offset);\r\n  }\r\n\r\n  public async createOrUpdate(gift: Gift, ImageFile: any): Promise<Gift> {\r\n    console.log(gift);\r\n    if (\r\n      gift == null\r\n      || gift.name == null\r\n      || gift.name == (\"\")\r\n      || ImageFile==null\r\n    ) {\r\n      console.log(\"El campo name esta nulo o no contiene caracteres.\");\r\n      return gift\r\n    }\r\n\r\n    else {\r\n      const body:Gift = gift;\r\n      return new Promise(resolve => {\r\n\r\n        let formData = new FormData();\r\n        formData.append('g', new Blob([JSON.stringify(gift)], {\r\n          type: 'application/json'\r\n        }));\r\n        formData.append('file', ImageFile);\r\n\r\n        this.http.post(this.URLDatabase+this.endpoint, formData).subscribe((data: any) => {\r\n\r\n          console.log(data);\r\n\r\n          resolve(data);\r\n        }, error => {\r\n          console.log(error);\r\n          resolve(error);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  public delete(gift: Gift): Promise<boolean> {\r\n\r\n    return new Promise(resolve => {\r\n\r\n      this.http.delete<Gift>(this.URLDatabase + this.endpoint, { body: gift }).subscribe(() => {\r\n        resolve(true);\r\n      }, error => {\r\n        console.log(error);\r\n        resolve(false);\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LoadingController, ToastController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UtilService {\r\n\r\n  private miLoading: HTMLIonLoadingElement;\r\n  private miToast: HTMLIonToastElement;\r\n\r\n  constructor(\r\n    private loading: LoadingController,\r\n    private toast: ToastController\r\n  ) { }\r\n\r\n  async presentLoading() {\r\n    this.miLoading = await this.loading.create({\r\n      message: ''\r\n    });\r\n    await this.miLoading.present();\r\n  }\r\n\r\n  async hideLoading(){\r\n    this.miLoading.dismiss();\r\n  }\r\n\r\n  async presentToast(msg: string, clr: string) {\r\n    const miToast = await this.toast.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      color: clr\r\n    });\r\n    miToast.present();\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}