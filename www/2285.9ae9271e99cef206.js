"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2285],{2285:(M,C,c)=>{c.r(C),c.d(C,{CarRepairListPageModule:()=>L});var f=c(6019),Z=c(9010),a=c(2651),m=c(8725),p=c(4762),R=c(7584),_=c(3022),e=c(865),x=c(7928),T=c(9311);function y(n,h){1&n&&e._UZ(0,"ion-icon",33)}function v(n,h){1&n&&e._UZ(0,"ion-icon",34)}function A(n,h){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row",21),e.TgZ(1,"ion-col",22),e.TgZ(2,"ion-text",23),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().edit(o)}),e._UZ(3,"ion-icon",24),e.qZA(),e.qZA(),e.TgZ(4,"ion-col",25),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().saw(o)}),e.TgZ(5,"ion-text",26),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"ion-col",25),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().saw(o)}),e.TgZ(8,"ion-text",26),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",25),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().saw(o)}),e.TgZ(11,"ion-text",26),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",25),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().saw(o)}),e.TgZ(14,"ion-text",26),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"ion-col",25),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().saw(o)}),e.TgZ(17,"div",27),e.YNc(18,y,1,0,"ion-icon",28),e.qZA(),e.TgZ(19,"div",29),e.YNc(20,v,1,0,"ion-icon",30),e.qZA(),e.qZA(),e.TgZ(21,"ion-col",22),e.TgZ(22,"ion-text",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().showDeleteMenu(o)}),e._UZ(23,"ion-icon",32),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=h.$implicit;e.Q6J("ngClass",h.index%2==0?"normal":"colored"),e.xp6(6),e.hij(" ",t.operation," "),e.xp6(3),e.hij(" ",t.carPlate," "),e.xp6(3),e.hij(" ",t.myAgency.myInsuranceCompany.cia_Name+" - "+t.myAgency.location," "),e.xp6(3),e.hij(" ",t.clienteName," "),e.xp6(3),e.Q6J("ngIf",t.repaired),e.xp6(2),e.Q6J("ngIf",!t.repaired)}}const P=[{path:"",component:(()=>{class n{constructor(t,i,r,o,l,u,s,d){this.cS=t,this.toast=i,this.alertCtrl=r,this.modalCtrl=o,this.loading=l,this.routes=u,this.pt=s,this.authS=d,this.n=0,this.carRepairs=[],this.carRepairsStore=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,p.mG)(this,void 0,void 0,function*(){this.nItems=Math.ceil(this.pt.height()/20+10);try{yield this.loadCarRepair(),this.n=this.carRepairs.length}catch(t){}})}loadCarRepair(t){return(0,p.mG)(this,void 0,void 0,function*(){let i=[];if(0==this.carRepairs.length){t||this.presentLoading(),this.infinite.disabled=!1,this.oldInifinte=!1;try{i=yield this.cS.getAllPaged(this.nItems,0),this.carRepairs=this.carRepairs.concat(i),this.storageCarRepairs(this.carRepairs),i.length<this.nItems&&(this.infinite.disabled=!0,this.oldInifinte=!0)}catch(r){this.presentToast("Error de carga","danger","ban")}finally{t?t.target.complete():this.loading.dismiss()}}})}edit(t){return(0,p.mG)(this,void 0,void 0,function*(){const i=yield this.modalCtrl.create({component:_.K,cssClass:"fullscreen",componentProps:{carRepair:t}});yield i.present();const r=yield i.onDidDismiss();if(null!=r.data){let o=this.carRepairs.indexOf(t);this.carRepairs[o]=r.data.newCarRepair,this.carRepairsStore.forEach(l=>{if(l.id==r.data.newCarRepair.id){let u=this.carRepairsStore.indexOf(l);this.carRepairsStore[u]=this.carRepairs[o]}})}})}saw(t){return(0,p.mG)(this,void 0,void 0,function*(){return yield(yield this.modalCtrl.create({component:R.T,componentProps:{carRepair:t}})).present()})}delete(t){return(0,p.mG)(this,void 0,void 0,function*(){try{yield this.presentLoading();const i=yield this.cS.delete(t);let r=this.carRepairs.indexOf(t,0);i?(r>-1&&this.carRepairs.splice(r,1),this.carRepairsStore.forEach(o=>{if(o.id==t.id){let l=this.carRepairsStore.indexOf(o);this.carRepairsStore.splice(l,1)}}),this.presentToast("La reparaci\xf3n ha sido eliminada correctamente.","success","checkmark-circle-outline")):this.presentToast("Error al borrar la reparaci\xf3n","danger","ban")}catch(i){this.presentToast("Nose ha podido borrar la reparaci\xf3n, intentelo m\xe1s tarde","danger","ban")}finally{try{yield this.miLoading.dismiss()}catch(i){}}})}showDeleteMenu(t){return(0,p.mG)(this,void 0,void 0,function*(){const i=yield this.alertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfDesea eliminar la reparaci\xf3n?",buttons:[{text:"Eliminar",cssClass:"rojo",handler:()=>{this.delete(t)}},{text:"Cancelar",cssClass:"secondary",role:"cancel"}]});try{yield i.present()}catch(r){}})}infiniteLoad(t){return(0,p.mG)(this,void 0,void 0,function*(){let i=[];if(!this.infinite.disabled)try{i=yield this.cS.getAllPaged(this.nItems,this.carRepairs.length),this.carRepairs=this.carRepairs.concat(i),this.carRepairsStore=this.carRepairsStore.concat(i),i.length<30&&(this.infinite.disabled=!0,this.oldInifinte=!0)}catch(r){}this.infinite.complete()})}goCreatePage(){this.routes.navigateByUrl("tab-administrator/car-repair/create")}goUpdatePage(t){this.routes.navigateByUrl("tab-administrator/car-repair/update/"+t)}goSawPage(t){this.routes.navigateByUrl("tab-administrator/car-repair/saw/"+t)}presentLoading(){return(0,p.mG)(this,void 0,void 0,function*(){this.miLoading=yield this.loading.create({message:""}),yield this.miLoading.present()})}presentToast(t,i,r){return(0,p.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:t,duration:2e3,color:i,icon:r})).present()})}onSearchChange(){return(0,p.mG)(this,void 0,void 0,function*(){this.searchStr=this.sb.value;let t=new RegExp("^[ ]");try{if(this.searchStr.match(t))this.presentToast("La b\xfasqueda no puede comenzar por espacios en blanco.","danger","ban");else{let i=[],r=[],o=this.select.value,l=[];this.carRepairs=[];let u=this.searchStr.length;u>0?(yield this.presentLoading(),l=yield this.cS.getByOperationFilter(this.searchStr),l.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),l=yield this.cS.getByCarPlate(this.searchStr,9999,0),l.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),l=yield this.cS.getByClientName(this.searchStr,9999,0),l.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),l=yield this.cS.getByAgencyInfoFilter(this.searchStr),l.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),"true"==o?(i.forEach(s=>{s.repaired&&r.push(s)}),this.carRepairs=r):"false"==o?(i.forEach(s=>{s.repaired||r.push(s)}),this.carRepairs=r):this.carRepairs=i,this.infinite.disabled=!1,yield this.miLoading.dismiss()):u<1&&(yield this.presentLoading(),"true"==o?(i=yield this.cS.getByStatedPaged(!0,9999,0),i.forEach(s=>{s.repaired&&r.push(s)}),this.carRepairs=r,this.infinite.disabled=!0):"false"==o?(i=yield this.cS.getByStatedPaged(!1,9999,0),i.forEach(s=>{s.repaired||r.push(s)}),this.carRepairs=r,this.infinite.disabled=!0):(this.carRepairs=this.carRepairsStore,this.infinite.disabled=this.oldInifinte),yield this.miLoading.dismiss())}}catch(i){}})}reset(t){return(0,p.mG)(this,void 0,void 0,function*(){this.n=0,this.infinite.disabled=!1,this.carRepairs=[],this.loadCarRepair(t)})}storageCarRepairs(t){this.carRepairsStore=this.carRepairsStore.concat(t)}logout(){this.authS.logout()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.K),e.Y36(a.yF),e.Y36(a.Br),e.Y36(a.IN),e.Y36(a.HT),e.Y36(m.F0),e.Y36(a.t4),e.Y36(T.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-car-repair-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(a.ju,5),e.Gf(a.t9,5),e.Gf(a.VI,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.infinite=r.first),e.iGM(r=e.CRH())&&(i.select=r.first),e.iGM(r=e.CRH())&&(i.sb=r.first)}},decls:49,vars:2,consts:[["color","primary"],["title","Cerrar Sesi\xf3n","slot","end",2,"margin-right","1%","cursor","pointer",3,"click"],["slot","end","name","log-out-outline",1,"icon-logout",2,"zoom","1.7","pointer-events","none"],["sizeSm","12","size","9","sizeMd","12","sizeLg","9"],["placeholder","Encuentra la reparaci\xf3n que est\xe1s buscando...","inputmode","text","type","text","debounce","1000","showCancelButton","always",3,"ionChange"],["sizeMd","3","sizeSm","3","sizeLg","3",1,"selector"],[2,"height","85%","margin-top","1.1%"],["interface","popover","multiple","false",3,"ionChange"],["value","true"],["value","false"],["value","all"],[1,"header-row"],["size","1",2,"border","0px !important"],["size","2.0",2,"border","0px !important"],[2,"background-color","white",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"body"],[1,"ion-text-center"],["style","border-left: 1px solid #4b4b4d;border-right: 1px solid #4b4b4d;","let","",3,"ngClass",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],["let","",2,"border-left","1px solid #4b4b4d","border-right","1px solid #4b4b4d",3,"ngClass"],["size","1"],["title","Editar",1,"icon-div-container",3,"click"],["name","pencil",2,"color","#22388c","pointer-events","none"],["size","2",3,"click"],[1,"pointerText"],["title","Reparado"],["name","checkmark-circle","color","success","style","pointer-events: none;",4,"ngIf"],["title","Sin reparar"],["name","close-circle","color","danger","style","pointer-events: none;",4,"ngIf"],["title","Eliminar",1,"icon-div-container",3,"click"],["name","trash","color","danger",2,"pointer-events","none"],["name","checkmark-circle","color","success",2,"pointer-events","none"],["name","close-circle","color","danger",2,"pointer-events","none"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title"),e._uU(3,"Lista de Reparaciones"),e.qZA(),e.TgZ(4,"ion-buttons",1),e.NdJ("click",function(){return i.logout()}),e._UZ(5,"ion-icon",2),e.qZA(),e.qZA(),e.TgZ(6,"ion-toolbar",0),e.TgZ(7,"ion-row"),e.TgZ(8,"ion-col",3),e.TgZ(9,"ion-searchbar",4),e.NdJ("ionChange",function(){return i.onSearchChange()}),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",5),e.TgZ(11,"ion-item",6),e.TgZ(12,"ion-label"),e._uU(13,"Estado del veh\xedculo"),e.qZA(),e.TgZ(14,"ion-select",7),e.NdJ("ionChange",function(){return i.onSearchChange()}),e.TgZ(15,"ion-select-option",8),e._uU(16,"Reparado"),e.qZA(),e.TgZ(17,"ion-select-option",9),e._uU(18,"Sin reparar"),e.qZA(),e.TgZ(19,"ion-select-option",10),e._uU(20,"Todos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-row",11),e.TgZ(22,"ion-col",12),e._UZ(23,"ion-text"),e.qZA(),e.TgZ(24,"ion-col",13),e.TgZ(25,"ion-text"),e._uU(26,"Operaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",13),e.TgZ(28,"ion-text"),e._uU(29,"Matr\xedcula"),e.qZA(),e.qZA(),e.TgZ(30,"ion-col",13),e.TgZ(31,"ion-text"),e._uU(32,"Agencia"),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",13),e.TgZ(34,"ion-text"),e._uU(35,"Cliente"),e.qZA(),e.qZA(),e.TgZ(36,"ion-col",13),e.TgZ(37,"ion-text"),e._uU(38,"Reparado"),e.qZA(),e.qZA(),e.TgZ(39,"ion-col",12),e._UZ(40,"ion-text"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"ion-content",14),e.TgZ(42,"ion-refresher",15),e.NdJ("ionRefresh",function(o){return i.reset(o)}),e._UZ(43,"ion-refresher-content"),e.qZA(),e.TgZ(44,"div",16),e.TgZ(45,"ion-grid",17),e.YNc(46,A,24,7,"ion-row",18),e.qZA(),e.TgZ(47,"ion-infinite-scroll",19),e.NdJ("ionInfinite",function(o){return i.infiniteLoad(o)}),e._UZ(48,"ion-infinite-scroll-content",20),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(41),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngForOf",i.carRepairs))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.gu,a.Nd,a.wI,a.VI,a.j9,a.Ie,a.Q$,a.t9,a.QI,a.n0,a.yW,a.W2,a.nJ,a.Wo,a.jY,f.sg,a.ju,a.MB,f.mk,f.O5],styles:['ion-col[_ngcontent-%COMP%]{border-bottom:1px solid #4b4b4d}ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;text-align:center}.normal[_ngcontent-%COMP%]{background-color:#fff;font-size:1.1rem}.colored[_ngcontent-%COMP%]{background-color:#cdcccc;font-size:1.1rem}.selector[_ngcontent-%COMP%]{float:right!important}.body[_ngcontent-%COMP%]{background-color:#fff;font-family:"Roboto",sans-serif;color:#4b4b4d}.pointerText[_ngcontent-%COMP%]{cursor:pointer}']}),n})(),children:[{path:"car-repair-saw",loadChildren:()=>c.e(8592).then(c.bind(c,1723)).then(n=>n.CarRepairSawPageModule)},{path:"car-repair-update",loadChildren:()=>c.e(8592).then(c.bind(c,4998)).then(n=>n.CarRepairUpdatePageModule)},{path:"car-repair-create",loadChildren:()=>c.e(4640).then(c.bind(c,4640)).then(n=>n.CarRepairCreatePageModule)}]}];let b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),n})();var S=c(8816);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.ez,Z.u5,a.Pc,b,S.h,Z.UX]]}),n})()}}]);