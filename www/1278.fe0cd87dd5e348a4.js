"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1278],{9600:(R,Z,t)=>{t.d(Z,{T:()=>f});var g=t(4762),i=t(9010),a=t(5744),r=t(865),c=t(2651),e=t(8725),_=t(1249),T=t(6019);function A(l,m){1&l&&r._UZ(0,"ion-icon",26)}function h(l,m){1&l&&r._UZ(0,"ion-icon",27)}let f=(()=>{class l{constructor(p,n,u,o){this.modalController=p,this.formBuilder=n,this.routes=u,this.dateTimeService=o,this.validator=this.formBuilder.group({operation:["",[i.kI.required]],carPlate:["",[i.kI.required]],model:["",[i.kI.required]],brandCar:["",[i.kI.required]],clienteName:["",[i.kI.required]],nor:["",[i.kI.required]],amount:[""],asigPoints:[""],myAgency:[""],dateOrder:["",[i.kI.required]],dateRepair:[""],repaired:["",[i.kI.required]]})}ngOnInit(){this.spanishDateOrder=this.dateTimeService.formatSpanishDateString(""+this.carRepair.dateOrder),this.carRepair.dateRepair&&(this.spanishDateRepair=this.dateTimeService.formatSpanishDateString(""+this.carRepair.dateRepair)),this.formCarRepair=this.formBuilder.group({operation:[this.carRepair.operation,[i.kI.required]],carPlate:[this.carRepair.carPlate,[i.kI.required]],model:[this.carRepair.model,[i.kI.required]],brandCar:[this.carRepair.brandCar,[i.kI.required]],clientName:[this.carRepair.clienteName,[i.kI.required]],nor:[this.carRepair.nor,[i.kI.required]],amount:[this.carRepair.amount],asigPoints:[this.carRepair.asigPoints],myAgency:[this.carRepair.myAgency.myUser.name],dateOrder:[this.spanishDateOrder,[i.kI.required]],dateRepair:[this.spanishDateRepair],repaired:[this.carRepair.repaired,[i.kI.required]]})}ionViewDidEnter(){return(0,g.mG)(this,void 0,void 0,function*(){})}edit(){return(0,g.mG)(this,void 0,void 0,function*(){const p=yield this.modalController.create({component:a.K,cssClass:"my-modal-class",componentProps:{carRepair:this.carRepair}});try{return yield p.present()}catch(n){}})}closeModal(){this.modalController.dismiss()}}return l.\u0275fac=function(p){return new(p||l)(r.Y36(c.IN),r.Y36(i.qu),r.Y36(e.F0),r.Y36(_.Y))},l.\u0275cmp=r.Xpm({type:l,selectors:[["app-car-repair-saw"]],inputs:{carRepair:"carRepair"},decls:88,vars:4,consts:[[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["sizeSm","1","sizeLg","3"],["sizeSm","11","sizeLg","9"],["type","number","Disabled","","formControlName","operation",1,"customInput"],["Disabled","","type","text","formControlName","carPlate",1,"customInput"],["sizeSm","5","sizeLg","9"],["Disabled","","type","text","formControlName","model",1,"customInput"],["Disabled","","type","text","formControlName","brandCar",1,"customInput"],["Disabled","","type","text","formControlName","clientName",1,"customInput"],["Disabled","","type","number","formControlName","nor",1,"customInput"],["Disabled","","type","number","formControlName","amount",1,"customInput"],["Disabled","","type","number","formControlName","asigPoints",1,"customInput"],["Disabled","","type","text","formControlName","myAgency",1,"customInput"],["sizeSm","7","sizeLg","3"],["sizeSm","7","sizeLg","4"],["Disabled","","type","text","formControlName","dateOrder",1,"customInput"],["Disabled","","type","text","formControlName","dateRepair",1,"customInput"],["sizeSm","7","sizeLg","1.5"],["name","checkmark-circle","style","color: #39ff14; zoom: 2.0;",4,"ngIf"],["name","close-circle","style","color: red; zoom: 2.0;",4,"ngIf"],["size","6"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"click"],["name","checkmark-circle",2,"color","#39ff14","zoom","2.0"],["name","close-circle",2,"color","red","zoom","2.0"]],template:function(p,n){1&p&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-title"),r._uU(3,"CarRepairSaw"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(4,"ion-content",0),r.TgZ(5,"div",1),r.TgZ(6,"form",2),r.TgZ(7,"div",3),r.TgZ(8,"ion-grid"),r.TgZ(9,"ion-row",4),r.TgZ(10,"ion-col",5),r.TgZ(11,"ion-label"),r._uU(12,"Operaci\xf3n"),r.qZA(),r.qZA(),r.TgZ(13,"ion-col",6),r._UZ(14,"ion-input",7),r.qZA(),r.qZA(),r.TgZ(15,"ion-row",4),r.TgZ(16,"ion-col",5),r.TgZ(17,"ion-label"),r._uU(18,"Matr\xedcula"),r.qZA(),r.qZA(),r.TgZ(19,"ion-col",6),r._UZ(20,"ion-input",8),r.qZA(),r.qZA(),r.TgZ(21,"ion-row",4),r.TgZ(22,"ion-col",5),r.TgZ(23,"ion-label"),r._uU(24,"Modelo"),r.qZA(),r.qZA(),r.TgZ(25,"ion-col",9),r._UZ(26,"ion-input",10),r.qZA(),r.qZA(),r.TgZ(27,"ion-row",4),r.TgZ(28,"ion-col",5),r.TgZ(29,"ion-label"),r._uU(30,"Marca"),r.qZA(),r.qZA(),r.TgZ(31,"ion-col",9),r._UZ(32,"ion-input",11),r.qZA(),r.qZA(),r.TgZ(33,"ion-row",4),r.TgZ(34,"ion-col",5),r.TgZ(35,"ion-label"),r._uU(36,"Cliente"),r.qZA(),r.qZA(),r.TgZ(37,"ion-col",6),r._UZ(38,"ion-input",12),r.qZA(),r.qZA(),r.TgZ(39,"ion-row",4),r.TgZ(40,"ion-col",5),r.TgZ(41,"ion-label"),r._uU(42,"NOR"),r.qZA(),r.qZA(),r.TgZ(43,"ion-col",6),r._UZ(44,"ion-input",13),r.qZA(),r.qZA(),r.TgZ(45,"ion-row",4),r.TgZ(46,"ion-col",5),r.TgZ(47,"ion-label"),r._uU(48,"Coste"),r.qZA(),r.qZA(),r.TgZ(49,"ion-col",6),r._UZ(50,"ion-input",14),r.qZA(),r.qZA(),r.TgZ(51,"ion-row",4),r.TgZ(52,"ion-col",5),r.TgZ(53,"ion-label"),r._uU(54,"Puntos"),r.qZA(),r.qZA(),r.TgZ(55,"ion-col",6),r._UZ(56,"ion-input",15),r.qZA(),r.qZA(),r.TgZ(57,"ion-row",4),r.TgZ(58,"ion-col",5),r.TgZ(59,"ion-label"),r._uU(60,"Agencia"),r.qZA(),r.qZA(),r.TgZ(61,"ion-col",6),r._UZ(62,"ion-input",16),r.qZA(),r.qZA(),r.TgZ(63,"ion-row",4),r.TgZ(64,"ion-col",17),r.TgZ(65,"ion-label"),r._uU(66,"Fecha de alta"),r.qZA(),r.qZA(),r.TgZ(67,"ion-col",18),r._UZ(68,"ion-input",19),r.qZA(),r.qZA(),r.TgZ(69,"ion-row",4),r.TgZ(70,"ion-col",17),r.TgZ(71,"ion-label"),r._uU(72,"Fecha de reparaci\xf3n"),r.qZA(),r.qZA(),r.TgZ(73,"ion-col",18),r._UZ(74,"ion-input",20),r.qZA(),r.qZA(),r.TgZ(75,"ion-row",4),r.TgZ(76,"ion-col",17),r._uU(77," Reparado "),r.qZA(),r.TgZ(78,"ion-col",21),r.YNc(79,A,1,0,"ion-icon",22),r.YNc(80,h,1,0,"ion-icon",23),r.qZA(),r.qZA(),r.TgZ(81,"ion-row",4),r.TgZ(82,"ion-col",24),r.TgZ(83,"ion-button",25),r.NdJ("click",function(){return n.closeModal()}),r._uU(84," Cancelar "),r.qZA(),r.qZA(),r.TgZ(85,"ion-col",24),r.TgZ(86,"ion-button",25),r.NdJ("click",function(){return n.edit()}),r._uU(87," Actualizar "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&p&&(r.xp6(4),r.Q6J("fullscreen",!0),r.xp6(2),r.Q6J("formGroup",n.formCarRepair),r.xp6(73),r.Q6J("ngIf",n.carRepair.repaired),r.xp6(1),r.Q6J("ngIf",!n.carRepair.repaired))},directives:[c.Gu,c.sr,c.wd,c.W2,i._Y,i.JL,i.sg,c.jY,c.Nd,c.wI,c.Q$,c.pK,c.as,i.JJ,i.u,c.j9,T.O5,c.YG,c.gu],styles:['.body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.formulario[_ngcontent-%COMP%]{margin-top:1.5%;padding:2%;border-top:2px double gray;border:1px solid;border-color:"primary";border-radius:2.5rem;background-color:#fff;margin-bottom:4%}.button[_ngcontent-%COMP%]{--background: #22388c}.customInput[_ngcontent-%COMP%]{border:1px solid gray;border-color:"primary";border-radius:2.5rem}.secundaryInput[_ngcontent-%COMP%]{margin-left:5%}.date[_ngcontent-%COMP%]{margin-left:20%}']}),l})()},5744:(R,Z,t)=>{t.d(Z,{K:()=>p});var g=t(4762),i=t(9010),a=t(2651),r=t(5764),c=t(6092),e=t(865),_=t(7928),T=t(371),A=t(1249),h=t(6019);function f(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"ion-datetime",32,33),e.NdJ("ionChange",function(){e.CHM(o);const d=e.MAs(1);return e.oxw().changeDateRepair(d.value)}),e.TgZ(2,"ion-buttons",34),e.TgZ(3,"ion-button",35),e.NdJ("click",function(){return e.CHM(o),e.oxw().confirm()}),e._uU(4,"Aceptar"),e.qZA(),e.TgZ(5,"ion-button",35),e.NdJ("click",function(){return e.CHM(o),e.oxw().reset()}),e._uU(6,"Cancelar"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("value",o.stringDateOrder)}}function l(n,u){1&n&&e._UZ(0,"ion-icon",36)}function m(n,u){1&n&&e._UZ(0,"ion-icon",37)}let p=(()=>{class n{constructor(o,s,d,q,C){this.modalController=o,this.carRepairService=s,this.formBuilder=d,this.uts=q,this.dateTimeService=C,this.dateValue=""}ngOnInit(){this.carRepair.dateOrder&&(this.spanishDateOrder=this.dateTimeService.formatSpanishDateString(""+this.carRepair.dateOrder),this.formatedString=this.dateTimeService.formatString(""+this.carRepair.dateOrder),console.log(this.stringDateOrder)),this.carRepair.dateRepair&&(this.spanishDateRepair=this.dateTimeService.formatSpanishDateString(""+this.carRepair.dateRepair)),this.formCarRepair=this.formBuilder.group({operation:[this.carRepair.operation],carPlate:[this.carRepair.carPlate,[i.kI.required]],model:[this.carRepair.model,[i.kI.required]],brandCar:[this.carRepair.brandCar,[i.kI.required]],clienteName:[this.carRepair.clienteName,[i.kI.required]],nor:[this.carRepair.nor],amount:[this.carRepair.amount],asigPoints:[this.carRepair.asigPoints],myAgency:[this.carRepair.myAgency.myUser.name],dateOrder:[this.carRepair.dateOrder,[i.kI.required]],spanishDateRepair:[this.spanishDateRepair],dateRepair:[this.carRepair.dateRepair],repaired:[this.carRepair.repaired,[i.kI.required]]})}editCarRepair(){return(0,g.mG)(this,void 0,void 0,function*(){this.newCarRepair={id:this.carRepair.id,operation:this.carRepair.operation,carPlate:this.formCarRepair.get("carPlate").value,model:this.formCarRepair.get("model").value,brandCar:this.formCarRepair.get("brandCar").value,clienteName:this.formCarRepair.get("clienteName").value,dateOrder:this.formatedString,nor:this.carRepair.nor,amount:this.carRepair.amount,dateRepair:this.carRepair.dateRepair,asigPoints:this.carRepair.asigPoints,repaired:this.carRepair.repaired,myAgency:this.carRepair.myAgency},console.log(this.newCarRepair);try{this.newCarRepair=yield this.carRepairService.createOrUpdate(this.newCarRepair),this.uts.presentToast("Se ha gurdadado correctamente","success","checkmark-circle-outline"),this.modalController.dismiss({newCarRepair:this.newCarRepair})}catch(o){this.uts.presentToast("Fallo al guradar","danger","ban"),console.log(o)}})}closeModal(){this.modalController.dismiss()}confirm(){this.datetime.confirm(!0)}reset(){this.datetime.cancel(!0)}changeDateRepair(o){this.spanishDateOrder=this.dateTimeService.formatSpanishDateString(o),this.stringDateOrder=this.dateTimeService.formatString(o),this.dateValue=o,this.formatedString=this.formatDate(this.dateValue)}formatDate(o){return(0,r.Z)((0,c.Z)(o),"yyyy-MM-dd HH:mm:SS")}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(a.IN),e.Y36(_.K),e.Y36(i.qu),e.Y36(T.f),e.Y36(A.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-car-repair-update"]],viewQuery:function(o,s){if(1&o&&e.Gf(a.x4,5),2&o){let d;e.iGM(d=e.CRH())&&(s.datetime=d.first)}},inputs:{carRepair:"carRepair"},decls:90,vars:6,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["sizeSm","3.2","sizeLg","3.2"],["button","true","id","open-date-input"],["slot","end"],["trigger","open-date-input","show-backdrop","false"],["sizeSm","2","sizeLg","2"],["sizeSm","4","sizeLg","4"],["Disabled","","type","text","formControlName","spanishDateRepair",1,"customInput"],["sizeSm","10","sizeLg","10"],["Disabled","","type","number","min","0","max","99999","inputmode","numeric","formControlName","operation",1,"customInput"],["sizeSm","11","sizeLg","10"],["type","text","formControlName","carPlate",1,"customInput"],["sizeSm","5","sizeLg","10"],["type","text","formControlName","model",1,"customInput"],["type","text","formControlName","brandCar",1,"customInput"],["type","text","formControlName","clienteName",1,"customInput"],["Disabled","","type","number","formControlName","nor",1,"customInput"],["Disabled","","type","number","formControlName","amount",1,"customInput"],["Disabled","","type","number","formControlName","asigPoints",1,"customInput"],["Disabled","","type","text","formControlName","myAgency",1,"customInput"],["sizeSm","7","sizeLg","2"],["sizeSm","7","sizeLg","4"],["name","checkmark-circle","style","zoom:1.7;color: #39ff14;",4,"ngIf"],["name","close-circle","style","zoom:1.7;color: red;",4,"ngIf"],["size","6"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"click"],["color","secondary",3,"value","ionChange"],["popoverDatetime",""],["slot","buttons"],["shape","round",1,"button",3,"click"],["name","checkmark-circle",2,"zoom","1.7","color","#39ff14"],["name","close-circle",2,"zoom","1.7","color","red"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3,"Editar Reparaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"div",5),e.TgZ(8,"ion-grid"),e.TgZ(9,"ion-row",6),e.TgZ(10,"ion-col",7),e.TgZ(11,"ion-item",8),e.TgZ(12,"ion-label"),e._uU(13,"Fecha de alta:"),e.qZA(),e.TgZ(14,"ion-text",9),e._uU(15),e.qZA(),e.TgZ(16,"ion-popover",10),e.YNc(17,f,7,1,"ng-template"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"ion-col",11),e.TgZ(19,"ion-label"),e._uU(20,"Fecha de reparaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(21,"ion-col",12),e._UZ(22,"ion-input",13),e.qZA(),e.qZA(),e.TgZ(23,"ion-row",6),e.TgZ(24,"ion-col",11),e.TgZ(25,"ion-label"),e._uU(26,"Operaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",14),e._UZ(28,"ion-input",15),e.qZA(),e.qZA(),e.TgZ(29,"ion-row",6),e.TgZ(30,"ion-col",11),e.TgZ(31,"ion-label"),e._uU(32,"Matr\xedcula"),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",16),e._UZ(34,"ion-input",17),e.qZA(),e.qZA(),e.TgZ(35,"ion-row",6),e.TgZ(36,"ion-col",11),e.TgZ(37,"ion-label"),e._uU(38,"Modelo"),e.qZA(),e.qZA(),e.TgZ(39,"ion-col",18),e._UZ(40,"ion-input",19),e.qZA(),e.qZA(),e.TgZ(41,"ion-row",6),e.TgZ(42,"ion-col",11),e.TgZ(43,"ion-label"),e._uU(44,"Marca"),e.qZA(),e.qZA(),e.TgZ(45,"ion-col",18),e._UZ(46,"ion-input",20),e.qZA(),e.qZA(),e.TgZ(47,"ion-row",6),e.TgZ(48,"ion-col",11),e.TgZ(49,"ion-label"),e._uU(50,"Cliente"),e.qZA(),e.qZA(),e.TgZ(51,"ion-col",14),e._UZ(52,"ion-input",21),e.qZA(),e.qZA(),e.TgZ(53,"ion-row",6),e.TgZ(54,"ion-col",11),e.TgZ(55,"ion-label"),e._uU(56,"NOR"),e.qZA(),e.qZA(),e.TgZ(57,"ion-col",14),e._UZ(58,"ion-input",22),e.qZA(),e.qZA(),e.TgZ(59,"ion-row",6),e.TgZ(60,"ion-col",11),e.TgZ(61,"ion-label"),e._uU(62,"Coste"),e.qZA(),e.qZA(),e.TgZ(63,"ion-col",14),e._UZ(64,"ion-input",23),e.qZA(),e.qZA(),e.TgZ(65,"ion-row",6),e.TgZ(66,"ion-col",11),e.TgZ(67,"ion-label"),e._uU(68,"Puntos"),e.qZA(),e.qZA(),e.TgZ(69,"ion-col",14),e._UZ(70,"ion-input",24),e.qZA(),e.qZA(),e.TgZ(71,"ion-row",6),e.TgZ(72,"ion-col",11),e.TgZ(73,"ion-label"),e._uU(74,"Agencia"),e.qZA(),e.qZA(),e.TgZ(75,"ion-col",14),e._UZ(76,"ion-input",25),e.qZA(),e.qZA(),e.TgZ(77,"ion-row",6),e.TgZ(78,"ion-col",26),e._uU(79," Reparado "),e.qZA(),e.TgZ(80,"ion-col",27),e.YNc(81,l,1,0,"ion-icon",28),e.YNc(82,m,1,0,"ion-icon",29),e.qZA(),e.qZA(),e.TgZ(83,"ion-row",6),e.TgZ(84,"ion-col",30),e.TgZ(85,"ion-button",31),e.NdJ("click",function(){return s.closeModal()}),e._uU(86," Cancelar "),e.qZA(),e.qZA(),e.TgZ(87,"ion-col",30),e.TgZ(88,"ion-button",31),e.NdJ("click",function(){return s.editCarRepair()}),e._uU(89," Guardar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("formGroup",s.formCarRepair),e.xp6(9),e.Oqu(s.spanishDateOrder),e.xp6(66),e.Q6J("ngIf",s.carRepair.repaired),e.xp6(1),e.Q6J("ngIf",!s.carRepair.repaired))},directives:[a.Gu,a.sr,a.wd,a.W2,i._Y,i.JL,i.sg,a.jY,a.Nd,a.wI,a.Ie,a.Q$,a.yW,a.d8,a.pK,a.j9,i.JJ,i.u,a.as,h.O5,a.YG,a.x4,a.QI,a.Sm,a.gu],styles:['.body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.formulario[_ngcontent-%COMP%]{margin-top:1.5%;padding:2%;border-top:2px double gray;border:1px solid;border-color:"primary";border-radius:2.5rem;background-color:#fff;margin-bottom:4%}.button[_ngcontent-%COMP%]{--background: #22388c;color:#fff}.customInput[_ngcontent-%COMP%]{border:1px solid gray;border-color:"primary";border-radius:2.5rem}.secundaryInput[_ngcontent-%COMP%]{margin-left:5%}.date[_ngcontent-%COMP%]{margin-left:20%}.buttonDate[_ngcontent-%COMP%]{background-color:#717499}']}),n})()}}]);