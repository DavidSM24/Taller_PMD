"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1577],{1577:(k,u,o)=>{o.r(u),o.d(u,{CarRepairCreatePageModule:()=>q});var g=o(6019),i=o(9010),n=o(2651),l=o(8725),p=o(4762),m=o(5764),f=o(6092),e=o(865),C=o(7928),h=o(371),Z=o(9311),v=o(9574),T=o(1249);function b(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"ion-datetime",22,23),e.NdJ("ionChange",function(){e.CHM(r);const c=e.MAs(1);return e.oxw().changeDateRepair(c.value)}),e.TgZ(2,"ion-buttons",24),e.TgZ(3,"ion-button",25),e.NdJ("click",function(){return e.CHM(r),e.oxw().confirm()}),e._uU(4,"Aceptar"),e.qZA(),e.TgZ(5,"ion-button",25),e.NdJ("click",function(){return e.CHM(r),e.oxw().reset()}),e._uU(6,"Cancelar"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const r=e.oxw();e.Q6J("value",r.stringDateOrder)}}function R(t,s){1&t&&(e.TgZ(0,"span",26),e._uU(1," *Debe rellenar este campo. Introduzca entre 4 y 10 caracteres. "),e.qZA())}function A(t,s){1&t&&(e.TgZ(0,"span",26),e._uU(1," *Debe rellenar este campo. Introduzca entre 2 y 50 caracteres. "),e.qZA())}function y(t,s){1&t&&(e.TgZ(0,"span",26),e._uU(1," *Debe rellenar este campo. Introduzca entre 2 y 50 caracteres. "),e.qZA())}function S(t,s){1&t&&(e.TgZ(0,"span",26),e._uU(1," *Debe rellenar este campo. Introduzca entre 2 y 50 caracteres. "),e.qZA())}const P=[{path:"",component:(()=>{class t{constructor(r,a,c,d,x,I,M,O){this.carRepairService=r,this.formBuilder=a,this.pickerController=c,this.utilService=d,this.authService=x,this.agencyService=I,this.dateTimeService=M,this.router=O,this.dateValue="",this.createFormGroup()}ngOnInit(){this.myAgency=this.authService.agency,this.setDate()}onSubmit(){this.create()}create(){return(0,p.mG)(this,void 0,void 0,function*(){if(yield this.utilService.presentLoading(),null!=this.authService.agency){let r=this.formCarRepair.get("carPlate").value;r=r.toUpperCase();let a={operation:0,carPlate:r,model:this.formCarRepair.get("model").value,brandCar:this.formCarRepair.get("brandCar").value,clienteName:this.formCarRepair.get("clienteName").value,dateOrder:this.formatedString,nor:0,amount:0,dateRepair:null,asigPoints:0,repaired:!1,myAgency:this.authService.agency};try{a.carPlate.length>4?(a=yield this.carRepairService.createOrUpdate(a),a.id?(this.formCarRepair.reset(),this.utilService.presentToast("La reparaci\xf3n se ha creado correctamente.","success","checkmark-circle-outline"),this.carRepairService.added=!0,this.routeCarRepairList()):this.utilService.presentToast("Ha surgido un error al intentar crear la reparacion","danger","ban")):this.utilService.presentToast("La matr\xedcula debe tener m\xe1s de cuatro caracteres","danger","ban")}catch(c){}finally{yield this.utilService.hideLoading()}}else this.utilService.presentToast("Ha habido un error relacionado con su agencia. Int\xe9ntelo m\xe1s tarde.","danger","ban")})}createFormGroup(){this.formCarRepair=this.formBuilder.group({carPlate:["",[i.kI.required,i.kI.minLength(4),i.kI.maxLength(10)]],model:["",[i.kI.required,i.kI.minLength(2),i.kI.maxLength(50)]],brandCar:["",[i.kI.required,i.kI.minLength(2),i.kI.maxLength(50)]],clienteName:["",[i.kI.required,i.kI.minLength(2),i.kI.maxLength(50)]],dateOrder:[""],myAgency:[this.authService.agency]})}get errorControl(){return this.formCarRepair.controls}confirm(){this.datetime.confirm(!0)}reset(){this.datetime.cancel(!0)}setDate(){let r=new Date(Date.now());this.spanishDateOrder=this.dateTimeService.formatSpanishDateString(r.toISOString()),this.formatedString=this.dateTimeService.formatString(r.toISOString())}changeDateRepair(r){this.spanishDateOrder=this.dateTimeService.formatSpanishDateString(r),this.stringDateOrder=this.dateTimeService.formatString(r),this.dateValue=r,this.formatedString=this.formatDate(this.dateValue)}formatDate(r){return(0,m.Z)((0,f.Z)(r),"yyyy-MM-dd HH:mm:SS")}routeCarRepairList(){this.router.navigateByUrl("tab-user/car-repair/list")}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(C.K),e.Y36(i.qu),e.Y36(n.up),e.Y36(h.f),e.Y36(Z.e),e.Y36(v.Y),e.Y36(T.Y),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-car-repair-create"]],viewQuery:function(r,a){if(1&r&&(e.Gf(n.ho,5),e.Gf(n.x4,5)),2&r){let c;e.iGM(c=e.CRH())&&(a.toggle=c.first),e.iGM(c=e.CRH())&&(a.datetime=c.first)}},decls:51,vars:9,consts:[[3,"translucent"],["color","medium"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"formulario"],[1,"ion-align-items-center",2,"margin-left","-2% !important"],["button","true","id","open-date-input"],["trigger","open-date-input","show-backdrop","false"],[1,"ion-align-items-center"],["sizeSm","2","sizeLg","2"],["sizeSm","11","sizeLg","10"],["type","text","formControlName","carPlate","required","true",1,"customInput",2,"text-transform","uppercase"],["class","invalid",4,"ngIf"],["sizeSm","5","sizeLg","10"],["type","text","formControlName","model","required","true",1,"customInput"],["type","text","formControlName","brandCar","required","true",1,"customInput"],["sizeSm","10","sizeLg","10"],["type","text","formControlName","clienteName","required","true",1,"customInput"],["size","6"],["expand","block","type","submit","shape","round",1,"button",2,"margin-top","2% !important",3,"disabled"],["expand","block","shape","round",1,"button2",2,"margin-top","2% !important",3,"click"],["color","secondary",3,"value","ionChange"],["popoverDatetime",""],["slot","buttons"],["shape","round",1,"button",3,"click"],[1,"invalid"]],template:function(r,a){1&r&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3,"Crear Reparaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return a.create()}),e.TgZ(7,"div",5),e.TgZ(8,"ion-grid"),e.TgZ(9,"ion-row",6),e.TgZ(10,"ion-col"),e.TgZ(11,"ion-item",7),e.TgZ(12,"ion-text"),e._uU(13),e.qZA(),e.TgZ(14,"ion-popover",8),e.YNc(15,b,7,1,"ng-template"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"ion-row",9),e.TgZ(17,"ion-col",10),e.TgZ(18,"ion-label"),e._uU(19,"Matr\xedcula"),e.qZA(),e.qZA(),e.TgZ(20,"ion-col",11),e._UZ(21,"ion-input",12),e.YNc(22,R,2,0,"span",13),e.qZA(),e.qZA(),e.TgZ(23,"ion-row",9),e.TgZ(24,"ion-col",10),e.TgZ(25,"ion-label"),e._uU(26,"Modelo"),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",14),e._UZ(28,"ion-input",15),e.YNc(29,A,2,0,"span",13),e.qZA(),e.qZA(),e.TgZ(30,"ion-row",9),e.TgZ(31,"ion-col",10),e.TgZ(32,"ion-label"),e._uU(33,"Marca"),e.qZA(),e.qZA(),e.TgZ(34,"ion-col",14),e._UZ(35,"ion-input",16),e.YNc(36,y,2,0,"span",13),e.qZA(),e.qZA(),e.TgZ(37,"ion-row",9),e.TgZ(38,"ion-col",10),e.TgZ(39,"ion-label"),e._uU(40,"Cliente"),e.qZA(),e.qZA(),e.TgZ(41,"ion-col",17),e._UZ(42,"ion-input",18),e.YNc(43,S,2,0,"span",13),e.qZA(),e.qZA(),e.TgZ(44,"ion-row",9),e.TgZ(45,"ion-col",19),e.TgZ(46,"ion-button",20),e._uU(47," Guardar "),e.qZA(),e.qZA(),e.TgZ(48,"ion-col",19),e.TgZ(49,"ion-button",21),e.NdJ("click",function(){return a.routeCarRepairList()}),e._uU(50," Cancelar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("formGroup",a.formCarRepair),e.xp6(7),e.hij("Fecha de Alta: ",a.spanishDateOrder,""),e.xp6(9),e.Q6J("ngIf",a.formCarRepair.get("carPlate").invalid&&a.formCarRepair.get("carPlate").touched),e.xp6(7),e.Q6J("ngIf",a.formCarRepair.get("model").invalid&&a.formCarRepair.get("model").touched),e.xp6(7),e.Q6J("ngIf",a.formCarRepair.get("brandCar").invalid&&a.formCarRepair.get("brandCar").touched),e.xp6(7),e.Q6J("ngIf",a.formCarRepair.get("clienteName").invalid&&a.formCarRepair.get("clienteName").touched),e.xp6(3),e.Q6J("disabled",a.formCarRepair.invalid))},directives:[n.Gu,n.sr,n.wd,n.W2,i._Y,i.JL,i.sg,n.jY,n.Nd,n.wI,n.Ie,n.yW,n.d8,n.Q$,n.pK,n.j9,i.JJ,i.u,i.Q7,g.O5,n.YG,n.x4,n.QI,n.Sm],styles:['.body[_ngcontent-%COMP%]{background:#d0e5f0!important;background-size:cover;min-height:100%}.formulario[_ngcontent-%COMP%]{margin-top:1.5%;padding:2%;border-top:2px double gray;border:1px solid;border-color:"medium";border-radius:2.5rem;background-color:#fff;margin-bottom:4%}.button[_ngcontent-%COMP%]{--background: #4083cc;color:#fff}.button2[_ngcontent-%COMP%]{--background: #ff8282;color:#fff}.customInput[_ngcontent-%COMP%]{border:1px solid gray;border-color:"primary";border-radius:2.5rem}.secundaryInput[_ngcontent-%COMP%]{margin-left:5%}.date[_ngcontent-%COMP%]{margin-left:20%}.buttonDate[_ngcontent-%COMP%]{background-color:#717499}ion-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442;border-right:5px solid #a94442}ion-input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948;border-right:5px solid #42A948}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442;border-right:5px solid #a94442}select.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948;border-right:5px solid #42A948}']}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(P)],l.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,i.u5,n.Pc,_,i.u5,i.UX]]}),t})()}}]);