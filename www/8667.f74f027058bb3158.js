"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8667,922],{8667:(v,f,r)=>{r.d(f,{s:()=>A});var h=r(4762),d=r(9010),a=r(2651),e=r(865),m=r(922),p=r(371),E=r(4483),t=r(9574),s=r(6019);function g(c,_){1&c&&(e.TgZ(0,"p",19),e._uU(1," *Campo obligatorio. Seleccione una fecha v\xe1lida. "),e.qZA())}function o(c,_){if(1&c){const n=e.EpF();e.TgZ(0,"ion-button",20),e.NdJ("click",function(){return e.CHM(n),e.oxw().showAgenciesPicker()}),e._uU(1," Seleccionar "),e.qZA()}}function u(c,_){if(1&c){const n=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().showAgenciesPicker()}),e._uU(1),e.qZA()}if(2&c){const n=e.oxw();e.xp6(1),e.hij(" ",n.myagency.myInsuranceCompany.cia_Name+" - "+n.myagency.location," ")}}function b(c,_){if(1&c){const n=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().showGiftsPicker()}),e._uU(1," Seleccionar "),e.qZA()}}function Z(c,_){if(1&c){const n=e.EpF();e.TgZ(0,"ion-button",20),e.NdJ("click",function(){return e.CHM(n),e.oxw().showGiftsPicker()}),e._uU(1),e.qZA()}if(2&c){const n=e.oxw();e.xp6(1),e.hij(" ",n.mygift.name," ")}}function x(c,_){1&c&&(e.TgZ(0,"p",19),e._uU(1," *Campo obligatorio. Seleccione un regalo a canjear. "),e.qZA())}let A=(()=>{class c{constructor(n,i,l,T,y,P,U,C){this.excser=n,this.fb=i,this.uts=l,this.pickerController=T,this.giftserv=y,this.ageserv=P,this.modalCtrl=U,this.as=C,this.formEditExchange=this.fb.group({dateExchange:["",d.kI.required],observations:[""]})}ngOnInit(){try{this.mygift=this.exchange.gift,this.myagency=this.exchange.agency,this.formEditExchange=this.fb.group({dateExchange:[this.exchange.dateExchange,d.kI.required],observations:[this.exchange.observations,d.kI.required],delivered:[this.exchange.delivered,d.kI.required]})}catch(n){console.log(n)}}EditExgift(){return(0,h.mG)(this,void 0,void 0,function*(){if(null!=this.mygift&&null!=this.myagency){this.uts.presentLoading();let n={id:this.exchange.id,dateExchange:this.formEditExchange.get("dateExchange").value,observations:this.formEditExchange.get("observations").value,delivered:this.toggle.checked,agency:this.myagency,gift:this.mygift};n=yield this.excser.createOrUpdate(n),n.id?(this.formEditExchange.reset(),this.uts.presentToast("Pedido modificado correctamente.","success","checkmark-circle-outline")):this.uts.presentToast("Un error ha surgido al intentar actualiar el pedido. Compruebe la disponibilidad del regalo.","danger","ban"),this.uts.hideLoading(),this.modalCtrl.dismiss({newExchange:n})}})}showGiftsPicker(){return(0,h.mG)(this,void 0,void 0,function*(){let n={buttons:[{text:"Cancel",role:"cancel",handler:l=>{this.mygift||(this.errorGift=!0)}},{text:"Ok",handler:l=>{this.mygift=l.Regalos.value,this.errorGift=!1}}],columns:[{name:"Regalos",options:this.getGiftColumnOptions()}]};(yield this.pickerController.create(n)).present()})}getGiftColumnOptions(){let n=[];return this.gifts.forEach(i=>{n.push({text:i.name,value:i})}),n}ionViewWillEnter(){return(0,h.mG)(this,void 0,void 0,function*(){this.uts.presentLoading(),this.gifts=yield this.giftserv.getAll(),this.agencies=yield this.ageserv.getAll(),this.agencies.length<=0&&this.gifts.length<=0&&this.uts.presentToast("","danger","ban"),this.uts.hideLoading(),console.log(this.gifts),console.log(this.agencies)})}showAgenciesPicker(){return(0,h.mG)(this,void 0,void 0,function*(){let n={buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:l=>{this.myagency=l.Agencias.value}}],columns:[{name:"Agencias",options:this.getAgenciesColumnOptions()}]};(yield this.pickerController.create(n)).present()})}getAgenciesColumnOptions(){let n=[];return this.agencies.forEach(i=>{n.push({text:i.myInsuranceCompany.cia_Name+" - "+i.location,value:i})}),n}close(){this.modalCtrl.dismiss()}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(m.y),e.Y36(d.qu),e.Y36(p.f),e.Y36(a.up),e.Y36(E.R),e.Y36(t.Y),e.Y36(a.IN),e.Y36(t.Y))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-exchange-gif-update"]],viewQuery:function(n,i){if(1&n&&e.Gf(a.ho,5),2&n){let l;e.iGM(l=e.CRH())&&(i.toggle=l.first)}},inputs:{exchange:"exchange"},decls:56,vars:10,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["sizeSm","1.5","sizeLg","1.5"],["sizeSm","10.5","sizeLg","10.5"],["formControlName","dateExchange","type","date",1,"customInput"],["style","color:red;",4,"ngIf"],["formControlName","observations","type","text",1,"customInput"],["lines","none"],[3,"checked"],["size","rem"],["expand","block","shape","round",3,"click",4,"ngIf"],["disabled","true","expand","block","shape","round",3,"click",4,"ngIf"],["size","6"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"click"],[2,"color","red"],["expand","block","shape","round",3,"click"],["disabled","true","expand","block","shape","round",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3," Editar Pedido "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"div",5),e.TgZ(8,"ion-grid"),e.TgZ(9,"ion-row",6),e.TgZ(10,"ion-col",7),e.TgZ(11,"ion-label"),e._uU(12,"Fecha de Intercambio:"),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",8),e._UZ(14,"ion-input",9),e.qZA(),e.qZA(),e.TgZ(15,"ion-row",6),e.TgZ(16,"ion-col"),e.YNc(17,g,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(18,"ion-row",6),e.TgZ(19,"ion-col",7),e.TgZ(20,"ion-label"),e._uU(21,"Observaciones:"),e.qZA(),e.qZA(),e.TgZ(22,"ion-col",8),e._UZ(23,"ion-textarea",11),e.qZA(),e.qZA(),e.TgZ(24,"ion-row",6),e.TgZ(25,"ion-col",7),e._uU(26," Entregado: "),e.qZA(),e.TgZ(27,"ion-col",8),e.TgZ(28,"ion-item",12),e._uU(29," No"),e._UZ(30,"ion-toggle",13),e._uU(31,"Si "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"ion-row",6),e.TgZ(33,"ion-col",7),e.TgZ(34,"ion-label"),e._uU(35,"Agencia:"),e.qZA(),e.qZA(),e.TgZ(36,"ion-col",14),e.YNc(37,o,2,0,"ion-button",15),e.YNc(38,u,2,1,"ion-button",16),e.qZA(),e.qZA(),e.TgZ(39,"ion-row",6),e.TgZ(40,"ion-col",7),e.TgZ(41,"ion-label"),e._uU(42,"Regalo:"),e.qZA(),e.qZA(),e.TgZ(43,"ion-col",14),e.YNc(44,b,2,0,"ion-button",16),e.YNc(45,Z,2,1,"ion-button",15),e.qZA(),e.qZA(),e.TgZ(46,"ion-row",6),e.TgZ(47,"ion-col"),e.YNc(48,x,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(49,"ion-row",6),e.TgZ(50,"ion-col",17),e.TgZ(51,"ion-button",18),e.NdJ("click",function(){return i.close()}),e._uU(52," Cancelar "),e.qZA(),e.qZA(),e.TgZ(53,"ion-col",17),e.TgZ(54,"ion-button",18),e.NdJ("click",function(){return i.EditExgift()}),e._uU(55," Actualizar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("formGroup",i.formEditExchange),e.xp6(11),e.Q6J("ngIf",i.formEditExchange.get("dateExchange").invalid&&i.formEditExchange.get("dateExchange").touched),e.xp6(13),e.Q6J("checked",i.exchange.delivered),e.xp6(7),e.Q6J("ngIf",null==i.myagency),e.xp6(1),e.Q6J("ngIf",null!=i.myagency),e.xp6(6),e.Q6J("ngIf",null==i.mygift),e.xp6(1),e.Q6J("ngIf",null!=i.mygift),e.xp6(3),e.Q6J("ngIf",i.errorGift))},directives:[a.Gu,a.sr,a.wd,a.W2,d._Y,d.JL,d.sg,a.jY,a.Nd,a.wI,a.Q$,a.pK,a.j9,d.JJ,d.u,s.O5,a.g2,a.Ie,a.ho,a.w,a.YG],styles:[".body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.button[_ngcontent-%COMP%]{--background: #22388c}customInput[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#22388c!important}ion-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442;border-right:5px solid #a94442}ion-input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948;border-right:5px solid #42A948}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442;border-right:5px solid #a94442}select.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948;border-right:5px solid #42A948}"]}),c})()},922:(v,f,r)=>{r.d(f,{y:()=>m});var h=r(4762),d=r(8260),a=r(865),e=r(4522);let m=(()=>{class p{constructor(t){this.http=t,this.endpoint="/exchangeGifts",this.URLDatabase=d.N.herokuConfig.url}getListData(t){return(0,h.mG)(this,void 0,void 0,function*(){let s=[];return new Promise(g=>{this.http.get(t).subscribe(o=>{if(null!=o&&o.length>0)for(let u of o)s.push({id:u.id,dateExchange:u.dateExchange,observations:u.observations,delivered:u.delivered,agency:u.agency,gift:u.gift});console.log(o),g(s)},o=>{console.log(o)})})})}getAllPaged(t,s){return this.getListData(this.URLDatabase+this.endpoint+"/element/"+t+"/page/"+s)}getAll(){return this.getListData(this.URLDatabase+this.endpoint)}getByDateFilter(t){return this.getListData(this.URLDatabase+this.endpoint+"/date/"+t)}getByPoints(t){return this.getListData(this.URLDatabase+this.endpoint+"/points/"+t)}getByAgencyUsername(t){return this.getListData(this.URLDatabase+this.endpoint+"/auname/"+t)}getById(t){return(0,h.mG)(this,void 0,void 0,function*(){let s=null;return new Promise(g=>{this.http.get(this.URLDatabase+this.endpoint+"/id/"+t).subscribe(o=>{o.id&&(s={id:o.id,dateExchange:o.dateExchange,observations:o.observations,delivered:o.delivered,agency:o.agency,gift:o.gift}),console.log(s),g(s)},o=>{console.log(o),console.log(s),g(s)})})})}getByDeliveredPaged(t,s,g){return this.getListData(this.URLDatabase+this.endpoint+"/delivered/"+t+"/element/"+s+"/paged/"+g)}getByGiftName(t){return this.getListData(this.URLDatabase+this.endpoint+"/gname/"+t)}getByAgencyPaged(t,s,g){if(null!=t)return this.getListData(this.URLDatabase+this.endpoint+"/id_agency/"+t.id+"/element/"+s+"/paged/"+g);{let o;return o}}createOrUpdate(t){return(0,h.mG)(this,void 0,void 0,function*(){if(console.log(t),null!=t){const s={id:t.id,dateExchange:t.dateExchange,observations:t.observations,delivered:t.delivered,agency:{id:t.agency.id},gift:{id:t.gift.id}};return new Promise(g=>{this.http.post(this.URLDatabase+this.endpoint,s).subscribe(o=>{t.id=o.id,g(t)},o=>{console.log(o),g(null)})})}})}delete(t){return(0,h.mG)(this,void 0,void 0,function*(){if(null!=t){const s={id:t.id};return new Promise(g=>{this.http.delete(this.URLDatabase+this.endpoint,{body:s}).subscribe(()=>{g(!0)},o=>{console.log(o),g(!1)})})}})}}return p.\u0275fac=function(t){return new(t||p)(a.LFG(e.eN))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);