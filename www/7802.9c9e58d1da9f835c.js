"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7802],{7802:(q,m,r)=>{r.r(m),r.d(m,{GifListPageModule:()=>M});var u=r(6019),T=r(9010),s=r(2651),p=r(8725),f=r(4762),G=r(6667),i=r(865),C=r(4483),v=r(371),b=r(9311);function x(o,d){1&o&&i._UZ(0,"ion-icon",38)}function A(o,d){1&o&&i._UZ(0,"ion-icon",39)}function P(o,d){if(1&o){const e=i.EpF();i.TgZ(0,"ion-row",26),i.TgZ(1,"ion-col",27),i.TgZ(2,"ion-text"),i.TgZ(3,"div",28),i.NdJ("click",function(){const l=i.CHM(e).$implicit;return i.oxw().edit(l)}),i.TgZ(4,"ion-icon",29),i.NdJ("click",function(){const l=i.CHM(e).$implicit;return i.oxw().edit(l)}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(5,"ion-col",30),i.TgZ(6,"ion-text"),i._uU(7),i.qZA(),i.qZA(),i.TgZ(8,"ion-col",31),i.TgZ(9,"ion-text"),i._uU(10),i.qZA(),i.qZA(),i.TgZ(11,"ion-col",30),i.TgZ(12,"div",32),i.YNc(13,x,1,0,"ion-icon",33),i.qZA(),i.TgZ(14,"div",34),i.YNc(15,A,1,0,"ion-icon",35),i.qZA(),i.qZA(),i.TgZ(16,"ion-col",27),i.TgZ(17,"ion-text"),i.TgZ(18,"div",36),i.NdJ("click",function(){const l=i.CHM(e).$implicit;return i.oxw().showDeleteMenu(l)}),i.TgZ(19,"ion-icon",37),i.NdJ("click",function(){const l=i.CHM(e).$implicit;return i.oxw().showDeleteMenu(l)}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&o){const e=d.$implicit;i.Q6J("ngClass",d.index%2==0?"normal":"colored"),i.xp6(7),i.hij(" ",e.name," "),i.xp6(3),i.hij(" ",e.points," "),i.xp6(3),i.Q6J("ngIf",e.available),i.xp6(2),i.Q6J("ngIf",!e.available)}}const y=[{path:"",component:(()=>{class o{constructor(e,t,n,l,c,g){this.gs=e,this.AlertCtrl=t,this.modalCtrl=n,this.pt=l,this.uts=c,this.authS=g,this.n=0,this.gifts=[],this.oldGifts=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,f.mG)(this,void 0,void 0,function*(){this.niTems=Math.ceil(this.pt.height()/20+10),this.gs.added?(this.reset(null),this.gs.added=!1):yield this.loadgifts()})}getAdded(e){this.gifts=e}loadgifts(e){return(0,f.mG)(this,void 0,void 0,function*(){let t=[];0==this.gifts.length&&(yield this.uts.presentLoading(),this.infinite.disabled=!1,this.oldInfinite=!1,t=yield this.gs.getAllPaged(this.niTems,0),this.gifts=this.gifts.concat(t),this.gifts=this.sortList(this.gifts),this.oldGifts=[],this.oldGifts=this.oldGifts.concat(t)),t.length<this.niTems&&(this.infinite.disabled=!0,this.oldInfinite=!0),e&&e.target.complete(),yield this.uts.hideLoading()})}edit(e){return(0,f.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:G.f,cssClass:"fullscreen",componentProps:{gift:e}});yield t.present();const n=yield t.onDidDismiss();if(null!=n.data){let l=this.gifts.indexOf(e);this.gifts[l]=n.data.newGift,this.oldGifts.forEach(c=>{if(c.id==n.data.newGift.id){let g=this.oldGifts.indexOf(c);this.oldGifts[g]=this.gifts[l]}})}})}delete(e){return(0,f.mG)(this,void 0,void 0,function*(){yield this.uts.presentLoading();const t=yield this.gs.delete(e);let n=this.gifts.indexOf(e,0);yield this.uts.hideLoading(),t?(n>-1&&this.gifts.splice(n,1),this.oldGifts.forEach(l=>{if(l.id==e.id){let c=this.oldGifts.indexOf(l);this.oldGifts.splice(c,1)}}),this.uts.presentToast("Regalo eliminada correctamente.","success","checkmark-circle-outline")):this.uts.presentToast("No se pueden eliminar regalos con pedidos. Puede quitarlo de la lista para adquirirlo cambiandolo a No disponible.","danger","ban")})}showDeleteMenu(e){return(0,f.mG)(this,void 0,void 0,function*(){yield(yield this.AlertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfDesea eliminar este Regalo?",buttons:[{text:"Eliminar",cssClass:"rojo",handler:()=>{this.delete(e)}},{text:"Cancelar",cssClass:"secondary",role:"cancel"}]})).present()})}infiniteLoad(e){return(0,f.mG)(this,void 0,void 0,function*(){let t=[];this.infinite.disabled||(t=yield this.gs.getAllPaged(this.niTems,this.gifts.length),t=this.sortList(t),this.gifts=this.gifts.concat(t),this.oldGifts=this.oldGifts.concat(t),t.length<this.niTems&&(this.infinite.disabled=!0,this.oldInfinite=!0)),this.infinite.complete()})}onSearchChange(){return(0,f.mG)(this,void 0,void 0,function*(){this.searchStr=this.sb.value;let e=new RegExp("^[ ]");try{if(this.searchStr.match(e))this.uts.presentToast("La b\xfasqueda no puede comenzar por espacios en blanco.","danger","ban");else{let t=[],n=[],l=this.select.value,c=[];this.gifts=[];let g=this.searchStr.length;g>0?(yield this.uts.presentLoading(),c=yield this.gs.getByNamePaged(this.searchStr,9999,0),c.forEach(a=>{let h=!0;t.forEach(Z=>{Z.id==a.id&&(h=!1)}),h&&t.push(a)}),+this.searchStr>=0&&(c=yield this.gs.getByPoints(this.searchStr),c.forEach(a=>{let h=!0;t.forEach(Z=>{Z.id==a.id&&(h=!1)}),h&&t.push(a)})),"true"==l?(t.forEach(a=>{a.available&&n.push(a)}),this.gifts=n):"false"==l?(t.forEach(a=>{a.available||n.push(a)}),this.gifts=n):this.gifts=t,this.infinite.disabled=!0,yield this.uts.hideLoading()):g<1&&(yield this.uts.presentLoading(),"true"==l?(t=yield this.gs.getByAvailablePaged(!0,9999,0),t.forEach(a=>{a.available&&n.push(a)}),this.gifts=n,this.infinite.disabled=!0):"false"==l?(t=yield this.gs.getByAvailablePaged(!1,9999,0),t.forEach(a=>{a.available||n.push(a)}),this.gifts=n,this.infinite.disabled=!0):(this.gifts=this.oldGifts,this.infinite.disabled=this.oldInfinite),yield this.uts.hideLoading())}}catch(t){}})}reset(e){return(0,f.mG)(this,void 0,void 0,function*(){this.infinite.disabled=!1,this.oldInfinite=!1,this.gifts=[],this.loadgifts(e)})}logout(){this.authS.logout()}sortList(e){return null!=e&&e.length>1&&(e=e.sort((t,n)=>t.name>n.name?1:t.name<n.name?-1:t.id>n.id?1:t.id<n.id?-1:0)),e}count(e){}}return o.\u0275fac=function(e){return new(e||o)(i.Y36(C.R),i.Y36(s.Br),i.Y36(s.IN),i.Y36(s.t4),i.Y36(v.f),i.Y36(b.e))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-gif-list"]],viewQuery:function(e,t){if(1&e&&(i.Gf(s.ju,5),i.Gf(s.t9,5),i.Gf(s.VI,5)),2&e){let n;i.iGM(n=i.CRH())&&(t.infinite=n.first),i.iGM(n=i.CRH())&&(t.select=n.first),i.iGM(n=i.CRH())&&(t.sb=n.first)}},decls:47,vars:3,consts:[[3,"translucent"],["color","primary"],["slot","end",1,"icon-div-container",2,"margin-right","1%"],["title","Nuevo","routerLink","/tab-administrator/gift/create"],["slot","end",1,"icon-logout",2,"pointer-events","none","zoom","1.5","cursor","pointer","content","url(../../../../assets/icon/add-circle-outline.png)"],["title","Cerrar Sesi\xf3n",3,"click"],["slot","end","name","log-out-outline",1,"icon-logout",2,"pointer-events","none","zoom","1.7","cursor","pointer"],["size","9.5"],["placeholder","Encuentra el regalo que est\xe1s buscando...","debounce","600","inputmode","text","type","text","showCancelButton","always",3,"ionChange"],[2,"height","85%","margin-top","1.1%"],["interface","popover","multiple","false",3,"ionChange"],["value","true"],["value","false"],["value","all"],[1,"header-row"],["rowItem",""],["size","1",2,"border","0px !important"],["size","3.3",2,"border","0px !important"],["size","3.4",2,"border","0px"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"body"],[1,"ion-text-center"],["style","border-left: 1px solid #4b4b4d;border-right: 1px solid #4b4b4d;","let","",3,"ngClass",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],["let","",2,"border-left","1px solid #4b4b4d","border-right","1px solid #4b4b4d",3,"ngClass"],["size","1"],["title","Editar",2,"cursor","pointer",3,"click"],["name","pencil",2,"color","#22388c",3,"click"],["size","3.3"],["size","3.4"],["title","Disponible"],["name","checkmark-circle","color","success",4,"ngIf"],["title","Sin stock"],["name","close-circle","color","danger",4,"ngIf"],["title","Eliminar",2,"cursor","pointer",3,"click"],["name","trash","color","danger",3,"click"],["name","checkmark-circle","color","success"],["name","close-circle","color","danger"]],template:function(e,t){1&e&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar",1),i.TgZ(2,"ion-title"),i._uU(3,"Lista de Regalos"),i.qZA(),i.TgZ(4,"ion-buttons",2),i.TgZ(5,"div",3),i._UZ(6,"ion-icon",4),i.qZA(),i.TgZ(7,"div",5),i.NdJ("click",function(){return t.logout()}),i._UZ(8,"ion-icon",6),i.qZA(),i.qZA(),i.qZA(),i.TgZ(9,"ion-toolbar",1),i.TgZ(10,"ion-row"),i.TgZ(11,"ion-col",7),i.TgZ(12,"ion-searchbar",8),i.NdJ("ionChange",function(){return t.onSearchChange()}),i.qZA(),i.qZA(),i.TgZ(13,"ion-col"),i.TgZ(14,"ion-item",9),i.TgZ(15,"ion-label"),i._uU(16,"Disponible:"),i.qZA(),i.TgZ(17,"ion-select",10),i.NdJ("ionChange",function(){return t.onSearchChange()}),i.TgZ(18,"ion-select-option",11),i._uU(19,"Si"),i.qZA(),i.TgZ(20,"ion-select-option",12),i._uU(21,"No"),i.qZA(),i.TgZ(22,"ion-select-option",13),i._uU(23,"Todos"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(24,"ion-row",14,15),i.TgZ(26,"ion-col",16),i._UZ(27,"ion-text"),i.qZA(),i.TgZ(28,"ion-col",17),i.TgZ(29,"ion-text"),i._uU(30,"Nombre"),i.qZA(),i.qZA(),i.TgZ(31,"ion-col",18),i.TgZ(32,"ion-text"),i._uU(33,"Puntos"),i.qZA(),i.qZA(),i.TgZ(34,"ion-col",17),i.TgZ(35,"ion-text"),i._uU(36,"Disponible"),i.qZA(),i.qZA(),i.TgZ(37,"ion-col",16),i._UZ(38,"ion-text"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(39,"ion-content",19),i.TgZ(40,"ion-refresher",20),i.NdJ("ionRefresh",function(l){return t.reset(l)}),i._UZ(41,"ion-refresher-content"),i.qZA(),i.TgZ(42,"div",21),i.TgZ(43,"ion-grid",22),i.YNc(44,P,20,5,"ion-row",23),i.qZA(),i.TgZ(45,"ion-infinite-scroll",24),i.NdJ("ionInfinite",function(l){return t.infiniteLoad(l)}),i._UZ(46,"ion-infinite-scroll-content",25),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Q6J("translucent",!1),i.xp6(39),i.Q6J("fullscreen",!0),i.xp6(5),i.Q6J("ngForOf",t.gifts))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YI,p.rH,s.gu,s.Nd,s.wI,s.VI,s.j9,s.Ie,s.Q$,s.t9,s.QI,s.n0,s.yW,s.W2,s.nJ,s.Wo,s.jY,u.sg,s.ju,s.MB,u.mk,u.O5],styles:['ion-col[_ngcontent-%COMP%]{border-bottom:1px solid #4b4b4d}ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;text-align:center}.row[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem}.body[_ngcontent-%COMP%]{background-color:#fff;font-family:"Roboto",sans-serif;color:#4b4b4d}ion-icon[_ngcontent-%COMP%]{pointer-events:none}']}),o})(),children:[{path:"gift-create",loadChildren:()=>r.e(7266).then(r.bind(r,7266)).then(o=>o.GifCreatePageModule)},{path:"gift-saw",loadChildren:()=>r.e(6060).then(r.bind(r,6060)).then(o=>o.GifSawPageModule)},{path:"gift-update",loadChildren:()=>r.e(8592).then(r.bind(r,3082)).then(o=>o.GifUpdatePageModule)}]}];let L=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[[p.Bz.forChild(y)],p.Bz]}),o})();var _=r(8816);let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({providers:[v.f],imports:[[u.ez,s.Pc,L,T.u5,T.UX,_.h]]}),o})()}}]);