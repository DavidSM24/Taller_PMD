{"version":3,"file":"default-src_app_administrator_agency_agency-update_agency-update_page_ts.js","mappings":"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","sources":["./src/app/administrator/agency/agency-update/agency-update.page.ts","./src/app/services/util.service.ts","./src/app/administrator/agency/agency-update/agency-update.page.html"],"sourcesContent":["import { Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { IonToggle, ModalController, PickerColumnOption, PickerController, PickerOptions } from '@ionic/angular';\r\nimport { AgencyService } from 'src/app/services/agency.service';\r\nimport { Agency } from '../../../models/Agency';\r\nimport { UtilService } from '../../../services/util.service';\r\nimport { InsuranceCompany } from '../../../models/InsuranceCompany';\r\nimport { InsuranceCompanyService } from 'src/app/services/insurance-company.service';\r\n\r\n@Component({\r\n  selector: 'app-agency-update',\r\n  templateUrl: './agency-update.page.html',\r\n  styleUrls: ['./agency-update.page.scss'],\r\n})\r\nexport class AgencyUpdatePage implements OnInit {\r\n\r\n  @ViewChild(IonToggle) toggle: IonToggle;\r\n  @Input() agency: Agency;\r\n\r\n  public insurance:InsuranceCompany=null;\r\n  public formAgency: FormGroup;\r\n  public companies: InsuranceCompany[];\r\n\r\n  constructor(\r\n    private modalCtrl: ModalController,\r\n    private fb: FormBuilder,\r\n    private as: AgencyService,\r\n    private uts:UtilService,\r\n    private is: InsuranceCompanyService,\r\n    private pickerController:PickerController,) {\r\n      \r\n     }\r\n\r\n  ngOnInit() {\r\n    \r\n    try {\r\n    this.insurance=this.agency.myInsuranceCompany;\r\n    //this.uts.presentLoading();\r\n\r\n    console.log(this.agency);\r\n\r\n    this.formAgency = this.fb.group({\r\n      zipCode: [this.agency.zipCode, Validators.required],\r\n      address: [this.agency.address, Validators.required],\r\n      location: [this.agency.location, Validators.required],\r\n      phoneNumber: [this.agency.phoneNumber, Validators.required]\r\n    });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n\r\n    \r\n    this.companies=await this.is.getAll();\r\n    if(this.companies.length<=0){\r\n      this.uts.presentToast('Para crear agencias, deben existir compañías de seguros.','danger');\r\n    }\r\n    this.uts.hideLoading();\r\n  }\r\n\r\n  public async edit() {\r\n\r\n    this.uts.presentLoading();\r\n\r\n     let A: Agency = {\r\n       id: this.agency.id,\r\n       zipCode: this.formAgency.get(\"zipCode\").value,\r\n       address: this.formAgency.get(\"address\").value,\r\n       location: this.formAgency.get(\"location\").value,\r\n       phoneNumber: this.formAgency.get(\"phoneNumber\").value,\r\n       amount: this.agency.amount,\r\n       points: this.agency.points,\r\n       pointsRedeemed: this.agency.pointsRedeemed,\r\n       myInsuranceCompany: this.insurance,\r\n       myCarRepairs: this.agency.myCarRepairs,\r\n       myExchangesGifts: this.agency.myExchangesGifts,\r\n       myUser: this.agency.myUser,\r\n       active: this.toggle.checked\r\n     }\r\n\r\n     A = await this.as.createOrUpdate(A);\r\n     \r\n     this.uts.hideLoading();\r\n\r\n     this.modalCtrl.dismiss({\r\n       newAgency:A\r\n     })\r\n  }\r\n\r\n  close() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n  async showPicker() {\r\n    let options: PickerOptions = {\r\n      buttons: [\r\n        {\r\n          text: \"Cancel\",\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text:'Ok',\r\n          handler:(value:any) => {\r\n            this.insurance=value.Compañías.value;\r\n          }\r\n        }\r\n      ],\r\n      columns:[{\r\n        name:'Compañías',\r\n        options:this.getColumnOptions()\r\n      }]\r\n    };\r\n\r\n    let picker = await this.pickerController.create(options);\r\n    picker.present()\r\n  }\r\n\r\n  getColumnOptions(){\r\n    let options = [];\r\n    this.companies.forEach(x => {\r\n      options.push({text:x.cia_Name,value:x});\r\n    });\r\n    return options;\r\n  }\r\n\r\n}\r\n\r\nexport interface PickerColumn {\r\n  name: string;\r\n  align?: string;\r\n  selectedIndex?: number;\r\n  prevSelected?: number;\r\n  prefix?: string;\r\n  suffix?: string;\r\n  options: PickerColumnOption[];\r\n  cssClass?: string | string[];\r\n  columnWidth?: string;\r\n  prefixWidth?: string;\r\n  suffixWidth?: string;\r\n  optionsWidth?: string;\r\n  refresh?: () => void;\r\n} \r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { LoadingController, ToastController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UtilService {\r\n\r\n  private miLoading: HTMLIonLoadingElement;\r\n  private miToast: HTMLIonToastElement;\r\n\r\n  constructor(\r\n    private loading: LoadingController,\r\n    private toast: ToastController\r\n  ) { }\r\n\r\n  async presentLoading() {\r\n    this.miLoading = await this.loading.create({\r\n      message: ''\r\n    });\r\n    await this.miLoading.present();\r\n  }\r\n\r\n  async hideLoading(){\r\n    this.miLoading.dismiss();\r\n  }\r\n\r\n  async presentToast(msg: string, clr: string) {\r\n    const miToast = await this.toast.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      color: clr\r\n    });\r\n    miToast.present();\r\n  }\r\n}\r\n","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>\\r\\n      Prueba Agencia\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <div class=\\\"body\\\">\\r\\n    <form [formGroup]=\\\"formAgency\\\" class=\\\"ion-padding\\\">\\r\\n      <div class=\\\"formulario\\\">\\r\\n      <ion-grid>\\r\\n        \\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <ion-label>Cód. Zip:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"11\\\">\\r\\n            <ion-input type=\\\"number\\\" class=\\\"customInput\\\" formControlName=\\\"zipCode\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        \\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <ion-label>Dirección:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"text\\\" formControlName=\\\"address\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <ion-label>Localidad:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"text\\\" formControlName=\\\"location\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col>\\r\\n            <ion-label>Número de Teléfono:</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"11\\\">\\r\\n            <ion-input class=\\\"customInput\\\" type=\\\"number\\\" formControlName=\\\"phoneNumber\\\"></ion-input>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        \\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col size=\\\"rem\\\">\\r\\n            Activa:\\r\\n          </ion-col>\\r\\n          <ion-col>\\r\\n            <ion-item  lines=\\\"none\\\">\\r\\n              No<ion-toggle [checked]=\\\"this.agency.active\\\"></ion-toggle>Si\\r\\n           </ion-item>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        \\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col size=\\\"rem\\\">\\r\\n            <ion-label>Compañía de Seguros:</ion-label>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col>\\r\\n\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"showPicker()\\\" >\\r\\n              {{this.insurance.cia_Name}}\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button expand=\\\"block\\\" shape=\\\"round\\\" class=\\\"button\\\" (click)=\\\"close()\\\">\\r\\n              Cancelar\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-button (click)=\\\"edit()\\\" expand=\\\"block\\\" shape=\\\"round\\\" style=\\\"margin-top: 2% !important;\\\" class=\\\"button\\\" [disabled]=\\\"this.formAgency.invalid||this.insurance==null\\\">\\r\\n              Actualizar\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n    </div>\\r\\n    </form>\\r\\n\\r\\n</div>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}