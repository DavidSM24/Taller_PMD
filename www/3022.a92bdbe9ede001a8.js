"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3022],{3022:(R,u,o)=>{o.d(u,{K:()=>T});var l=o(4762),i=o(9010),a=o(2651),d=o(5764),g=o(6092),e=o(865),m=o(7928),Z=o(371),_=o(1249);function h(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"ion-datetime",32,33),e.NdJ("ionChange",function(){e.CHM(t);const n=e.MAs(1);return e.oxw().changeDateRepair(n.value)}),e.TgZ(2,"ion-buttons",34),e.TgZ(3,"ion-button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(4,"Aceptar"),e.qZA(),e.TgZ(5,"ion-button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().reset()}),e._uU(6,"Cancelar"),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("value",t.stringDateRepair)}}let T=(()=>{class s{constructor(t,r,n,p,A){this.modalController=t,this.carRepairService=r,this.formBuilder=n,this.uts=p,this.dateTimeService=A,this.dateValue=""}ngOnInit(){this.spanishDateOrder=this.dateTimeService.formatSpanishDateString(""+this.carRepair.dateOrder),this.carRepair.dateRepair&&(this.spanishDateRepair=this.dateTimeService.formatSpanishDateString(""+this.carRepair.dateRepair),this.formatedString=this.dateTimeService.formatString(""+this.carRepair.dateRepair)),this.formCarRepair=this.formBuilder.group({operation:[this.carRepair.operation,[i.kI.required]],carPlate:[this.carRepair.carPlate,[i.kI.required]],model:[this.carRepair.model,[i.kI.required]],brandCar:[this.carRepair.brandCar,[i.kI.required]],clienteName:[this.carRepair.clienteName,[i.kI.required]],nor:[this.carRepair.nor,[i.kI.required]],amount:[this.carRepair.amount],asigPoints:[this.carRepair.asigPoints],myAgency:[this.carRepair.myAgency.myUser.name],dateOrder:[this.carRepair.dateOrder,[i.kI.required]],spanishDateOrder:[this.spanishDateOrder],dateRepair:[this.carRepair.dateRepair],repaired:[this.carRepair.repaired,[i.kI.required]]})}ionViewDidEnter(){return(0,l.mG)(this,void 0,void 0,function*(){})}editCarRepair(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.uts.presentLoading();let t=!0;if(this.formCarRepair.get("asigPoints").value<1&&1==this.formCarRepair.get("repaired").value&&(t=!1,this.uts.presentToast("No se puede asignar una reparaci\xf3n como terminada a 0 puntos.","danger","ban")),t){this.newCarRepair={id:this.carRepair.id,operation:this.formCarRepair.get("operation").value,carPlate:this.carRepair.carPlate,model:this.carRepair.model,brandCar:this.carRepair.brandCar,clienteName:this.formCarRepair.get("clienteName").value,dateOrder:this.formCarRepair.get("dateOrder").value,nor:this.formCarRepair.get("nor").value,amount:this.formCarRepair.get("amount").value,dateRepair:this.formatedString,asigPoints:this.formCarRepair.get("asigPoints").value,repaired:this.formCarRepair.get("repaired").value,myAgency:this.carRepair.myAgency};try{this.newCarRepair=yield this.carRepairService.createOrUpdate(this.newCarRepair),this.newCarRepair?(this.modalController.dismiss({newCarRepair:this.newCarRepair}),this.uts.presentToast("Se ha gurdadado correctamente","success","checkmark-circle-outline")):(this.uts.presentToast("Fallo al actualizar la reparaci\xf3n. Int\xe9ntelo m\xe1s tarde.","danger","ban"),this.closeModal())}catch(r){this.uts.presentToast("Fallo al actualizar la reparaci\xf3n. Int\xe9ntelo m\xe1s tarde.","danger","ban"),console.log(r)}}this.uts.hideLoading()})}closeModal(){this.modalController.dismiss()}confirm(){this.datetime.confirm(!0)}reset(){this.datetime.cancel(!0)}formatDate(t){return(0,d.Z)((0,g.Z)(t),"yyyy-MM-dd HH:mm:SS")}changeDateRepair(t){this.spanishDateRepair=this.dateTimeService.formatSpanishDateString(t),this.stringDateRepair=this.dateTimeService.formatString(t),this.dateValue=t,this.formatedString=this.formatDate(this.dateValue)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(a.IN),e.Y36(m.K),e.Y36(i.qu),e.Y36(Z.f),e.Y36(_.Y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-car-repair-update"]],viewQuery:function(t,r){if(1&t&&e.Gf(a.x4,5),2&t){let n;e.iGM(n=e.CRH())&&(r.datetime=n.first)}},inputs:{carRepair:"carRepair"},decls:92,vars:4,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["sizeSm","2","sizeLg","2"],["sizeSm","4","sizeLg","4"],["Disabled","","type","text","formControlName","spanishDateOrder",1,"customInput"],["sizeSm","3.2","sizeLg","6"],["button","true","id","open-date-input"],["slot","end"],["trigger","open-date-input","show-backdrop","false"],["sizeSm","10","sizeLg","10"],["type","number","min","0","max","99999","inputmode","numeric","formControlName","operation",1,"customInput"],["sizeSm","11","sizeLg","10"],["Disabled","","type","text","formControlName","carPlate",1,"customInput"],["sizeSm","5","sizeLg","10"],["Disabled","","type","text","formControlName","model",1,"customInput"],["Disabled","","type","text","formControlName","brandCar",1,"customInput"],["type","text","formControlName","clienteName",1,"customInput"],["type","number","formControlName","nor",1,"customInput"],["type","number","formControlName","amount",1,"customInput"],["type","number","formControlName","asigPoints",1,"customInput"],["Disabled","","type","text","formControlName","myAgency",1,"customInput"],["sizeSm","7","sizeLg","2"],["sizeSm","7","sizeLg","4"],["lines","none"],["formControlName","repaired"],["size","6"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"click"],["color","secondary",3,"value","ionChange"],["popoverDatetime",""],["slot","buttons"],["shape","round",1,"button",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3,"Editar Reparaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"div",5),e.TgZ(8,"ion-grid"),e.TgZ(9,"ion-row",6),e.TgZ(10,"ion-col",7),e.TgZ(11,"ion-label"),e._uU(12,"Fecha de alta: "),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",8),e._UZ(14,"ion-input",9),e.qZA(),e.TgZ(15,"ion-col",10),e.TgZ(16,"ion-item",11),e.TgZ(17,"ion-label"),e._uU(18,"Fecha de reparaci\xf3n:"),e.qZA(),e.TgZ(19,"ion-text",12),e._uU(20),e.qZA(),e.TgZ(21,"ion-popover",13),e.YNc(22,h,7,1,"ng-template"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"ion-row",6),e.TgZ(24,"ion-col",7),e.TgZ(25,"ion-label"),e._uU(26,"Operaci\xf3n: "),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",14),e._UZ(28,"ion-input",15),e.qZA(),e.qZA(),e.TgZ(29,"ion-row",6),e.TgZ(30,"ion-col",7),e.TgZ(31,"ion-label"),e._uU(32,"Matr\xedcula: "),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",16),e._UZ(34,"ion-input",17),e.qZA(),e.qZA(),e.TgZ(35,"ion-row",6),e.TgZ(36,"ion-col",7),e.TgZ(37,"ion-label"),e._uU(38,"Modelo: "),e.qZA(),e.qZA(),e.TgZ(39,"ion-col",18),e._UZ(40,"ion-input",19),e.qZA(),e.qZA(),e.TgZ(41,"ion-row",6),e.TgZ(42,"ion-col",7),e.TgZ(43,"ion-label"),e._uU(44,"Marca: "),e.qZA(),e.qZA(),e.TgZ(45,"ion-col",18),e._UZ(46,"ion-input",20),e.qZA(),e.qZA(),e.TgZ(47,"ion-row",6),e.TgZ(48,"ion-col",7),e.TgZ(49,"ion-label"),e._uU(50,"Cliente: "),e.qZA(),e.qZA(),e.TgZ(51,"ion-col",14),e._UZ(52,"ion-input",21),e.qZA(),e.qZA(),e.TgZ(53,"ion-row",6),e.TgZ(54,"ion-col",7),e.TgZ(55,"ion-label"),e._uU(56,"NOR: "),e.qZA(),e.qZA(),e.TgZ(57,"ion-col",14),e._UZ(58,"ion-input",22),e.qZA(),e.qZA(),e.TgZ(59,"ion-row",6),e.TgZ(60,"ion-col",7),e.TgZ(61,"ion-label"),e._uU(62,"Coste: "),e.qZA(),e.qZA(),e.TgZ(63,"ion-col",14),e._UZ(64,"ion-input",23),e.qZA(),e.qZA(),e.TgZ(65,"ion-row",6),e.TgZ(66,"ion-col",7),e.TgZ(67,"ion-label"),e._uU(68,"Puntos: "),e.qZA(),e.qZA(),e.TgZ(69,"ion-col",14),e._UZ(70,"ion-input",24),e.qZA(),e.qZA(),e.TgZ(71,"ion-row",6),e.TgZ(72,"ion-col",7),e.TgZ(73,"ion-label"),e._uU(74,"Agencia: "),e.qZA(),e.qZA(),e.TgZ(75,"ion-col",14),e._UZ(76,"ion-input",25),e.qZA(),e.qZA(),e.TgZ(77,"ion-row",6),e.TgZ(78,"ion-col",26),e._uU(79," Reparado: "),e.qZA(),e.TgZ(80,"ion-col",27),e.TgZ(81,"ion-item",28),e._uU(82," No"),e._UZ(83,"ion-toggle",29),e._uU(84,"Si "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"ion-row",6),e.TgZ(86,"ion-col",30),e.TgZ(87,"ion-button",31),e.NdJ("click",function(){return r.closeModal()}),e._uU(88," Cancelar "),e.qZA(),e.qZA(),e.TgZ(89,"ion-col",30),e.TgZ(90,"ion-button",31),e.NdJ("click",function(){return r.editCarRepair()}),e._uU(91," Guardar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("formGroup",r.formCarRepair),e.xp6(14),e.Oqu(r.spanishDateRepair))},directives:[a.Gu,a.sr,a.wd,a.W2,i._Y,i.JL,i.sg,a.jY,a.Nd,a.wI,a.Q$,a.pK,a.j9,i.JJ,i.u,a.Ie,a.yW,a.d8,a.as,a.ho,a.w,a.YG,a.x4,a.QI,a.Sm],styles:[".body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.button[_ngcontent-%COMP%]{--background: #22388c;color:#fff}.secundaryInput[_ngcontent-%COMP%]{margin-left:5%}.date[_ngcontent-%COMP%]{margin-left:20%}.buttonDate[_ngcontent-%COMP%]{background-color:#717499}"]}),s})()}}]);