"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2285],{2285:(M,m,c)=>{c.r(m),c.d(m,{CarRepairListPageModule:()=>L});var f=c(6019),C=c(9010),a=c(2651),u=c(8725),h=c(4762),Z=c(7584),R=c(3022),e=c(865),_=c(7928),T=c(9311);function x(o,p){1&o&&e._UZ(0,"ion-icon",33)}function y(o,p){1&o&&e._UZ(0,"ion-icon",34)}function v(o,p){if(1&o){const i=e.EpF();e.TgZ(0,"ion-row",21),e.TgZ(1,"ion-col",22),e.TgZ(2,"ion-text",23),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().edit(n)}),e._UZ(3,"ion-icon",24),e.qZA(),e.qZA(),e.TgZ(4,"ion-col",25),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().saw(n)}),e.TgZ(5,"ion-text",26),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"ion-col",25),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().saw(n)}),e.TgZ(8,"ion-text",26),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",25),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().saw(n)}),e.TgZ(11,"ion-text",26),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",25),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().saw(n)}),e.TgZ(14,"ion-text",26),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"ion-col",25),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().saw(n)}),e.TgZ(17,"div",27),e.YNc(18,x,1,0,"ion-icon",28),e.qZA(),e.TgZ(19,"div",29),e.YNc(20,y,1,0,"ion-icon",30),e.qZA(),e.qZA(),e.TgZ(21,"ion-col",22),e.TgZ(22,"ion-text",31),e.NdJ("click",function(){const n=e.CHM(i).$implicit;return e.oxw().showDeleteMenu(n)}),e._UZ(23,"ion-icon",32),e.qZA(),e.qZA(),e.qZA()}if(2&o){const i=p.$implicit;e.xp6(6),e.hij(" ",i.operation," "),e.xp6(3),e.hij(" ",i.carPlate," "),e.xp6(3),e.hij(" ",i.myAgency.myInsuranceCompany.cia_Name+" - "+i.myAgency.location," "),e.xp6(3),e.hij(" ",i.clienteName," "),e.xp6(3),e.Q6J("ngIf",i.repaired),e.xp6(2),e.Q6J("ngIf",!i.repaired)}}const A=[{path:"",component:(()=>{class o{constructor(i,t,r,n,l,s,d,g){this.cS=i,this.toast=t,this.alertCtrl=r,this.modalCtrl=n,this.loading=l,this.routes=s,this.pt=d,this.authS=g,this.n=0,this.carRepairs=[],this.carRepairsStore=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,h.mG)(this,void 0,void 0,function*(){this.nItems=Math.ceil(this.pt.height()/20+10);try{yield this.loadCarRepair(),this.n=this.carRepairs.length}catch(i){}})}loadCarRepair(i){return(0,h.mG)(this,void 0,void 0,function*(){let t=[];if(0==this.carRepairs.length){i||this.presentLoading(),this.infinite.disabled=!1,this.oldInifinte=!1;try{t=yield this.cS.getAllPaged(this.nItems,0),this.carRepairs=this.carRepairs.concat(t),this.storageCarRepairs(this.carRepairs),t.length<this.nItems&&(this.infinite.disabled=!0,this.oldInifinte=!0)}catch(r){console.log(r),this.presentToast("Error de carga","danger","ban")}finally{i?i.target.complete():this.loading.dismiss()}}})}edit(i){return(0,h.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:R.K,cssClass:"fullscreen",componentProps:{carRepair:i}});yield t.present();const r=yield t.onDidDismiss();if(null!=r.data){let n=this.carRepairs.indexOf(i);this.carRepairs[n]=r.data.newCarRepair,this.carRepairsStore.forEach(l=>{if(l.id==r.data.newCarRepair.id){let s=this.carRepairsStore.indexOf(l);this.carRepairsStore[s]=this.carRepairs[n]}})}})}saw(i){return(0,h.mG)(this,void 0,void 0,function*(){return yield(yield this.modalCtrl.create({component:Z.T,componentProps:{carRepair:i}})).present()})}delete(i){return(0,h.mG)(this,void 0,void 0,function*(){try{yield this.presentLoading();const t=yield this.cS.delete(i);let r=this.carRepairs.indexOf(i,0);t?(r>-1&&this.carRepairs.splice(r,1),this.carRepairsStore.forEach(n=>{if(n.id==i.id){let l=this.carRepairsStore.indexOf(n);this.carRepairsStore.splice(l,1)}}),this.presentToast("La reparaci\xf3n ha sido eliminada correctamente.","success","checkmark-circle-outline")):this.presentToast("Error al borrar la reparaci\xf3n","danger","ban")}catch(t){this.presentToast("Nose ha podido borrar la reparaci\xf3n, intentelo m\xe1s tarde","danger","ban")}finally{try{yield this.miLoading.dismiss()}catch(t){}}})}showDeleteMenu(i){return(0,h.mG)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfDesea eliminar la reparaci\xf3n?",buttons:[{text:"Eliminar",cssClass:"rojo",handler:()=>{this.delete(i)}},{text:"Cancelar",cssClass:"secondary",role:"cancel"}]});try{yield t.present()}catch(r){console.log(r)}})}infiniteLoad(i){return(0,h.mG)(this,void 0,void 0,function*(){let t=[];if(!this.infinite.disabled)try{t=yield this.cS.getAllPaged(this.nItems,this.carRepairs.length),this.carRepairs=this.carRepairs.concat(t),this.carRepairsStore=this.carRepairsStore.concat(t),t.length<30&&(this.infinite.disabled=!0,this.oldInifinte=!0)}catch(r){console.log(r)}})}goCreatePage(){this.routes.navigateByUrl("tab-administrator/car-repair/create")}goUpdatePage(i){this.routes.navigateByUrl("tab-administrator/car-repair/update/"+i)}goSawPage(i){this.routes.navigateByUrl("tab-administrator/car-repair/saw/"+i)}presentLoading(){return(0,h.mG)(this,void 0,void 0,function*(){this.miLoading=yield this.loading.create({message:""}),yield this.miLoading.present()})}presentToast(i,t,r){return(0,h.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:i,duration:2e3,color:t,icon:r})).present()})}onSearchChange(){return(0,h.mG)(this,void 0,void 0,function*(){let i=[],t=[],r=this.select.value;this.searchStr=this.sb.value;let n=[];this.carRepairs=[];let l=this.searchStr.length;l>0?(yield this.presentLoading(),n=yield this.cS.getByOperationFilter(this.searchStr),n.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),n=yield this.cS.getByCarPlate(this.searchStr,9999,0),n.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),n=yield this.cS.getByClientName(this.searchStr,9999,0),n.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),n=yield this.cS.getByAgencyInfoFilter(this.searchStr),n.forEach(s=>{let d=!0;i.forEach(g=>{g.id==s.id&&(d=!1)}),d&&i.push(s)}),"true"==r?(i.forEach(s=>{s.repaired&&t.push(s)}),this.carRepairs=t):"false"==r?(i.forEach(s=>{s.repaired||t.push(s)}),this.carRepairs=t):this.carRepairs=i,this.infinite.disabled=!1,yield this.miLoading.dismiss()):l<1&&(i=i.concat(this.carRepairsStore),this.infinite.disabled=this.oldInifinte,"true"==r?(i.forEach(s=>{s.repaired&&t.push(s)}),this.carRepairs=t):"false"==r?(i.forEach(s=>{s.repaired||t.push(s)}),this.carRepairs=t):this.carRepairs=i,this.infinite.disabled=this.oldInifinte,yield this.miLoading.dismiss())})}reset(i){return(0,h.mG)(this,void 0,void 0,function*(){this.n=0,this.infinite.disabled=!1,this.carRepairs=[],this.loadCarRepair(i)})}storageCarRepairs(i){this.carRepairsStore=this.carRepairsStore.concat(i)}logout(){this.authS.logout()}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(_.K),e.Y36(a.yF),e.Y36(a.Br),e.Y36(a.IN),e.Y36(a.HT),e.Y36(u.F0),e.Y36(a.t4),e.Y36(T.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-car-repair-list"]],viewQuery:function(i,t){if(1&i&&(e.Gf(a.ju,5),e.Gf(a.t9,5),e.Gf(a.VI,5)),2&i){let r;e.iGM(r=e.CRH())&&(t.infinite=r.first),e.iGM(r=e.CRH())&&(t.select=r.first),e.iGM(r=e.CRH())&&(t.sb=r.first)}},decls:49,vars:2,consts:[["color","primary"],["title","Cerrar Sesi\xf3n","slot","end",2,"margin-right","1%","cursor","pointer",3,"click"],["slot","end","name","log-out-outline",1,"icon-logout",2,"zoom","1.7","pointer-events","none"],["sizeSm","9.5","sizeLg","9.5"],["placeholder","Encuentra la reparaci\xf3n que est\xe1s buscando...","inputmode","text","type","text","debounce","1000","showCancelButton","always",3,"ionChange"],["sizeSm","2.5","sizeLg","2.5",1,"selector"],[2,"height","85%","margin-top","1.1%"],["interface","popover","multiple","false",3,"ionChange"],["value","true"],["value","false"],["value","all"],[1,"header-row"],["size","1",2,"border","0px !important"],["size","2.0",2,"border","0px !important"],[2,"background-color","white",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"body"],[1,"ion-text-center"],["let","","class","row",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],["let","",1,"row"],["size","1"],["title","Editar",1,"icon-div-container",3,"click"],["name","pencil",2,"color","#22388c","pointer-events","none"],["size","2",3,"click"],[1,"pointerText"],["title","Reparado"],["name","checkmark-circle","style","color: #39ff14;pointer-events: none;",4,"ngIf"],["title","Sin reparar"],["name","close-circle","style","color: red; pointer-events: none;",4,"ngIf"],["title","Eliminar",1,"icon-div-container",3,"click"],["name","trash","color","danger",2,"pointer-events","none"],["name","checkmark-circle",2,"color","#39ff14","pointer-events","none"],["name","close-circle",2,"color","red","pointer-events","none"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title"),e._uU(3,"Lista de Reparaciones"),e.qZA(),e.TgZ(4,"ion-buttons",1),e.NdJ("click",function(){return t.logout()}),e._UZ(5,"ion-icon",2),e.qZA(),e.qZA(),e.TgZ(6,"ion-toolbar",0),e.TgZ(7,"ion-row"),e.TgZ(8,"ion-col",3),e.TgZ(9,"ion-searchbar",4),e.NdJ("ionChange",function(){return t.onSearchChange()}),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",5),e.TgZ(11,"ion-item",6),e.TgZ(12,"ion-label"),e._uU(13,"Estado del veh\xedculo"),e.qZA(),e.TgZ(14,"ion-select",7),e.NdJ("ionChange",function(){return t.onSearchChange()}),e.TgZ(15,"ion-select-option",8),e._uU(16,"Reparado"),e.qZA(),e.TgZ(17,"ion-select-option",9),e._uU(18,"Sin reparar"),e.qZA(),e.TgZ(19,"ion-select-option",10),e._uU(20,"Todos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-row",11),e.TgZ(22,"ion-col",12),e._UZ(23,"ion-text"),e.qZA(),e.TgZ(24,"ion-col",13),e.TgZ(25,"ion-text"),e._uU(26,"Operaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",13),e.TgZ(28,"ion-text"),e._uU(29,"Matr\xedcula"),e.qZA(),e.qZA(),e.TgZ(30,"ion-col",13),e.TgZ(31,"ion-text"),e._uU(32,"Agencia"),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",13),e.TgZ(34,"ion-text"),e._uU(35,"Cliente"),e.qZA(),e.qZA(),e.TgZ(36,"ion-col",13),e.TgZ(37,"ion-text"),e._uU(38,"Reparado"),e.qZA(),e.qZA(),e.TgZ(39,"ion-col",12),e._UZ(40,"ion-text"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"ion-content",14),e.TgZ(42,"ion-refresher",15),e.NdJ("ionRefresh",function(n){return t.reset(n)}),e._UZ(43,"ion-refresher-content"),e.qZA(),e.TgZ(44,"div",16),e.TgZ(45,"ion-grid",17),e.YNc(46,v,24,6,"ion-row",18),e.qZA(),e.TgZ(47,"ion-infinite-scroll",19),e.NdJ("ionInfinite",function(n){return t.infiniteLoad(n)}),e._UZ(48,"ion-infinite-scroll-content",20),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(41),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngForOf",t.carRepairs))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.gu,a.Nd,a.wI,a.VI,a.j9,a.Ie,a.Q$,a.t9,a.QI,a.n0,a.yW,a.W2,a.nJ,a.Wo,a.jY,f.sg,a.ju,a.MB,f.O5],styles:['ion-col[_ngcontent-%COMP%]{border-bottom:1px solid #4b4b4d}ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;font-size:1.2rem;text-align:center}.row[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem}.selector[_ngcontent-%COMP%]{float:right!important}.body[_ngcontent-%COMP%]{background-color:#fff;font-family:"Roboto",sans-serif;color:#4b4b4d}.pointerText[_ngcontent-%COMP%]{cursor:pointer}']}),o})(),children:[{path:"car-repair-saw",loadChildren:()=>c.e(8592).then(c.bind(c,1723)).then(o=>o.CarRepairSawPageModule)},{path:"car-repair-update",loadChildren:()=>c.e(8592).then(c.bind(c,4998)).then(o=>o.CarRepairUpdatePageModule)},{path:"car-repair-create",loadChildren:()=>c.e(4640).then(c.bind(c,4640)).then(o=>o.CarRepairCreatePageModule)}]}];let P=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),o})();var S=c(8816);let L=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,C.u5,a.Pc,P,S.h,C.UX]]}),o})()}}]);