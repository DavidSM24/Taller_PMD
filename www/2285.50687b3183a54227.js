"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2285],{2285:(w,p,s)=>{s.r(p),s.d(p,{CarRepairListPageModule:()=>v});var h=s(6019),u=s(9010),a=s(2651),g=s(8725),l=s(4762),f=s(7584),m=s(3022),e=s(865),C=s(7928),Z=s(9311);function R(o,d){1&o&&e._UZ(0,"ion-icon",29)}function T(o,d){1&o&&e._UZ(0,"ion-icon",30)}function _(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"ion-row",21),e.TgZ(1,"ion-col",22),e.TgZ(2,"ion-text"),e.TgZ(3,"ion-icon",23),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().edit(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-col",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().saw(n)}),e.TgZ(5,"ion-text",25),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"ion-col",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().saw(n)}),e.TgZ(8,"ion-text",25),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().saw(n)}),e.TgZ(11,"ion-text",25),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().saw(n)}),e.YNc(14,R,1,0,"ion-icon",26),e.YNc(15,T,1,0,"ion-icon",27),e.qZA(),e.TgZ(16,"ion-col",22),e.TgZ(17,"ion-text"),e.TgZ(18,"ion-icon",28),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().showDeleteMenu(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(6),e.hij(" ",t.operation," "),e.xp6(3),e.hij(" ",t.carPlate," "),e.xp6(3),e.hij(" ",t.myAgency.myUser.name," "),e.xp6(2),e.Q6J("ngIf",t.repaired),e.xp6(1),e.Q6J("ngIf",!t.repaired)}}const x=[{path:"",component:(()=>{class o{constructor(t,i,r,n,c,P,L,M){this.cS=t,this.toast=i,this.alertCtrl=r,this.modalCtrl=n,this.loading=c,this.routes=P,this.pt=L,this.authS=M,this.n=0,this.carRepairs=[],this.carRepairsStore=[],this.searchStr=""}ngOnInit(){}ionViewWillEnter(){return(0,l.mG)(this,void 0,void 0,function*(){this.nItems=Math.ceil(this.pt.height()/20+10);try{yield this.loadCarRepair(),this.n=this.carRepairs.length}catch(t){}})}loadCarRepair(t){return(0,l.mG)(this,void 0,void 0,function*(){let i=[];if(0==this.carRepairs.length){t||this.presentLoading(),this.infinite.disabled=!1;try{i=yield this.cS.getAllPaged(this.nItems,0),this.carRepairs=this.carRepairs.concat(i),this.storageCarRepairs(),i.length<this.nItems&&(this.infinite.disabled=!0)}catch(r){console.log(r),this.presentToast("Error de carga","danger")}finally{t?t.target.complete():this.loading.dismiss()}}})}edit(t){return(0,l.mG)(this,void 0,void 0,function*(){const i=yield this.modalCtrl.create({component:m.K,cssClass:"fullscreen",componentProps:{carRepair:t}});yield i.present();const r=yield i.onDidDismiss();if(null!=r.data){let n=this.carRepairs.indexOf(t);this.carRepairs[n]=r.data.newCarRepair}})}saw(t){return(0,l.mG)(this,void 0,void 0,function*(){return yield(yield this.modalCtrl.create({component:f.T,componentProps:{carRepair:t}})).present()})}delete(t){return(0,l.mG)(this,void 0,void 0,function*(){try{yield this.presentLoading();const i=yield this.cS.delete(t);let r=this.carRepairs.indexOf(t,0);i?(r>-1&&this.carRepairs.splice(r,1),this.presentToast("La reparaci\xf3n ha sido eliminada correctamente.","success")):this.presentToast("Error al borrar la reparaci\xf3n","danger")}catch(i){this.presentToast("Nose ha podido borrar la reparaci\xf3n, intentelo m\xe1s tarde","danger")}finally{try{yield this.miLoading.dismiss()}catch(i){}}})}showDeleteMenu(t){return(0,l.mG)(this,void 0,void 0,function*(){const i=yield this.alertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfDesea eliminar la reparaci\xf3n?",buttons:[{text:"Eliminar",cssClass:"rojo",handler:()=>{this.delete(t)}},{text:"Cancelar",cssClass:"secondary",role:"cancel"}]});try{yield i.present()}catch(r){console.log(r)}})}infiniteLoad(t){return(0,l.mG)(this,void 0,void 0,function*(){let i=[];if(!this.infinite.disabled)try{i=yield this.cS.getAllPaged(this.nItems,this.carRepairs.length),this.carRepairs=this.carRepairs.concat(i),i.length<30&&(this.infinite.disabled=!0)}catch(r){console.log(r)}})}goCreatePage(){this.routes.navigateByUrl("tab-administrator/car-repair/create")}goUpdatePage(t){this.routes.navigateByUrl("tab-administrator/car-repair/update/"+t)}goSawPage(t){this.routes.navigateByUrl("tab-administrator/car-repair/saw/"+t)}presentLoading(){return(0,l.mG)(this,void 0,void 0,function*(){this.miLoading=yield this.loading.create({message:""}),yield this.miLoading.present()})}presentToast(t,i){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:t,duration:2e3,color:i})).present()})}onSearchChange(t){return(0,l.mG)(this,void 0,void 0,function*(){this.searchStr=t.detail.value,console.log(this.searchStr);let i=[];const r=t.detail.value,n=this.searchStr.length;if(n>1)this.carRepairsStore.forEach(c=>{(c.brandCar.includes(r)||c.clienteName.includes(r)||c.operation.toLocaleString().includes(r)||c.myAgency.myUser.name.includes(r))&&i.push(c)}),this.carRepairs=i;else if(n<1)try{yield this.reset()}catch(c){}})}setCarByStatus(t){return(0,l.mG)(this,void 0,void 0,function*(){let i=[];const r=t.detail.value;"false".match(r)?(this.carRepairsStore.forEach(n=>{n.repaired||i.push(n)}),this.carRepairs=i):"true".match(r)?(this.carRepairsStore.forEach(n=>{n.repaired&&i.push(n)}),console.log(i),this.carRepairs=i):"all".match(r)&&this.reset()})}reset(t){return(0,l.mG)(this,void 0,void 0,function*(){this.n=0,this.infinite.disabled=!1,this.carRepairs=[],this.loadCarRepair(t)})}storageCarRepairs(){this.carRepairsStore=this.carRepairs}logout(){this.authS.logout()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.K),e.Y36(a.yF),e.Y36(a.Br),e.Y36(a.IN),e.Y36(a.HT),e.Y36(g.F0),e.Y36(a.t4),e.Y36(Z.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-car-repair-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(a.ju,5),2&t){let r;e.iGM(r=e.CRH())&&(i.infinite=r.first)}},decls:46,vars:2,consts:[["color","primary"],["slot","end",2,"margin-right","1%"],["slot","end","name","log-out-outline",1,"icon-logout",2,"zoom","1.7","cursor","pointer",3,"click"],[1,"ion-align-items-center"],["sizeSm","9.5","sizeLg","9.5"],["placeholder","Encuentra la reparaci\xf3n que est\xe1s buscando...","inputmode","text","type","text","debounce","1000","showCancelButton","always",3,"ionChange"],["sizeSm","2.5","sizeLg","2.5",1,"selector"],["interface","popover","multiple","false",3,"ionChange"],["value","true"],["value","false"],["value","all"],[1,"header-row"],["size","1",2,"border","0px !important"],["size","2.5",2,"border","0px !important"],[2,"background-color","white",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"body"],[1,"ion-text-center"],["let","","class","row",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""],["let","",1,"row"],["size","1"],["name","pencil",2,"color","#22388c","cursor","pointer",3,"click"],["size","2.5",3,"click"],[1,"pointerText"],["name","checkmark-circle","style","color: #39ff14;",4,"ngIf"],["name","close-circle","style","color: red;",4,"ngIf"],["name","trash","color","danger",2,"cursor","pointer",3,"click"],["name","checkmark-circle",2,"color","#39ff14"],["name","close-circle",2,"color","red"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-title"),e._uU(3,"Lista de Reparaciones"),e.qZA(),e.TgZ(4,"ion-buttons",1),e.TgZ(5,"ion-icon",2),e.NdJ("click",function(){return i.logout()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-toolbar",0),e.TgZ(7,"ion-row",3),e.TgZ(8,"ion-col",4),e.TgZ(9,"ion-searchbar",5),e.NdJ("ionChange",function(n){return i.onSearchChange(n)}),e.qZA(),e.qZA(),e.TgZ(10,"ion-col",6),e.TgZ(11,"ion-item"),e.TgZ(12,"ion-label"),e._uU(13,"Estado del veh\xedculo"),e.qZA(),e.TgZ(14,"ion-select",7),e.NdJ("ionChange",function(n){return i.setCarByStatus(n)}),e.TgZ(15,"ion-select-option",8),e._uU(16,"Reparado"),e.qZA(),e.TgZ(17,"ion-select-option",9),e._uU(18,"Sin reparar"),e.qZA(),e.TgZ(19,"ion-select-option",10),e._uU(20,"Todos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-row",11),e.TgZ(22,"ion-col",12),e._UZ(23,"ion-text"),e.qZA(),e.TgZ(24,"ion-col",13),e.TgZ(25,"ion-text"),e._uU(26,"Operaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",13),e.TgZ(28,"ion-text"),e._uU(29,"Matr\xedcula"),e.qZA(),e.qZA(),e.TgZ(30,"ion-col",13),e.TgZ(31,"ion-text"),e._uU(32,"Agencia"),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",13),e.TgZ(34,"ion-text"),e._uU(35,"Reparado"),e.qZA(),e.qZA(),e.TgZ(36,"ion-col",12),e._UZ(37,"ion-text"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"ion-content",14),e.TgZ(39,"ion-refresher",15),e.NdJ("ionRefresh",function(n){return i.reset(n)}),e._UZ(40,"ion-refresher-content"),e.qZA(),e.TgZ(41,"div",16),e.TgZ(42,"ion-grid",17),e.YNc(43,_,19,5,"ion-row",18),e.qZA(),e.TgZ(44,"ion-infinite-scroll",19),e.NdJ("ionInfinite",function(n){return i.infiniteLoad(n)}),e._UZ(45,"ion-infinite-scroll-content",20),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(38),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngForOf",i.carRepairs))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.gu,a.Nd,a.wI,a.VI,a.j9,a.Ie,a.Q$,a.t9,a.QI,a.n0,a.yW,a.W2,a.nJ,a.Wo,a.jY,h.sg,a.ju,a.MB,h.O5],styles:['ion-col[_ngcontent-%COMP%]{border-bottom:1px solid #4b4b4d}ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#4b4b4d!important}.header-row[_ngcontent-%COMP%]{border-radius:0%;border:0px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:#fff!important;font-size:1.2rem;text-align:center}.row[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem}.selector[_ngcontent-%COMP%]{float:right!important}.body[_ngcontent-%COMP%]{background-color:#fff;font-family:"Roboto",sans-serif;color:#4b4b4d}.pointerText[_ngcontent-%COMP%]{cursor:pointer}']}),o})(),children:[{path:"car-repair-saw",loadChildren:()=>s.e(8592).then(s.bind(s,1723)).then(o=>o.CarRepairSawPageModule)},{path:"car-repair-update",loadChildren:()=>s.e(8592).then(s.bind(s,4998)).then(o=>o.CarRepairUpdatePageModule)},{path:"car-repair-create",loadChildren:()=>s.e(4640).then(s.bind(s,4640)).then(o=>o.CarRepairCreatePageModule)}]}];let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(x)],g.Bz]}),o})();var A=s(8816);let v=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.ez,u.u5,a.Pc,y,A.h,u.UX]]}),o})()}}]);