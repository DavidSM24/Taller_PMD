"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2995,922],{922:(Z,b,c)=>{c.d(b,{y:()=>m});var p=c(4762),g=c(8260),a=c(865),f=c(4522);let m=(()=>{class t{constructor(e){this.http=e,this.endpoint="/exchangeGifts",this.URLDatabase=g.N.herokuConfig.url}getListData(e){return(0,p.mG)(this,void 0,void 0,function*(){let r=[];return new Promise(l=>{this.http.get(e).subscribe(o=>{if(null!=o&&o.length>0)for(let h of o)r.push({id:h.id,dateExchange:h.dateExchange,observations:h.observations,delivered:h.delivered,agency:h.agency,gift:h.gift});console.log(o),l(r)},o=>{console.log(o)})})})}getAllPaged(e,r){return this.getListData(this.URLDatabase+this.endpoint+"/element/"+e+"/page/"+r)}getAll(){return this.getListData(this.URLDatabase+this.endpoint)}getByDateFilter(e){return this.getListData(this.URLDatabase+this.endpoint+"/date/"+e)}getByPoints(e){return this.getListData(this.URLDatabase+this.endpoint+"/points/"+e)}getByAgencyUsername(e){return this.getListData(this.URLDatabase+this.endpoint+"/auname/"+e)}getById(e){return(0,p.mG)(this,void 0,void 0,function*(){let r=null;return new Promise(l=>{this.http.get(this.URLDatabase+this.endpoint+"/id/"+e).subscribe(o=>{o.id&&(r={id:o.id,dateExchange:o.dateExchange,observations:o.observations,delivered:o.delivered,agency:o.agency,gift:o.gift}),console.log(r),l(r)},o=>{console.log(o),console.log(r),l(r)})})})}getByDeliveredPaged(e,r,l){return this.getListData(this.URLDatabase+this.endpoint+"/delivered/"+e+"/element/"+r+"/paged/"+l)}getByGiftName(e){return this.getListData(this.URLDatabase+this.endpoint+"/gname/"+e)}getByAgencyPaged(e,r,l){if(null!=e)return this.getListData(this.URLDatabase+this.endpoint+"/id_agency/"+e.id+"/element/"+r+"/paged/"+l);{let o;return o}}createOrUpdate(e){return(0,p.mG)(this,void 0,void 0,function*(){if(console.log(e),null!=e){const r={id:e.id,dateExchange:e.dateExchange,observations:e.observations,delivered:e.delivered,agency:{id:e.agency.id},gift:{id:e.gift.id}};return new Promise(l=>{this.http.post(this.URLDatabase+this.endpoint,r).subscribe(o=>{e.id=o.id,l(e)},o=>{console.log(o),l(null)})})}})}delete(e){return(0,p.mG)(this,void 0,void 0,function*(){if(null!=e){const r={id:e.id};return new Promise(l=>{this.http.delete(this.URLDatabase+this.endpoint,{body:r}).subscribe(()=>{l(!0)},o=>{console.log(o),l(!1)})})}})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(f.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2995:(Z,b,c)=>{c.r(b),c.d(b,{Tab5PageModule:()=>P});var p=c(6019),g=c(9010),a=c(2651),f=c(8725),m=c(4762),t=c(865),v=c(922),e=c(371),r=c(4483),l=c(9574);function o(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().showAgenciesPicker()}),t._uU(1," Seleccionar "),t.qZA()}}function h(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().showAgenciesPicker()}),t._uU(1),t.qZA()}if(2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.myagency.zipCode," ")}}function T(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().showGiftsPicker()}),t._uU(1," Seleccionar "),t.qZA()}}function _(i,d){if(1&i){const n=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().showGiftsPicker()}),t._uU(1),t.qZA()}if(2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.mygift.name," ")}}const y=[{path:"",component:(()=>{class i{constructor(n,s,u,x,E,L){this.exser=n,this.fb=s,this.uts=u,this.pickerController=x,this.giftserv=E,this.ageserv=L,this.mygift=null,this.formExchange=this.fb.group({dateEchange:["",g.kI.required],observations:["",g.kI.required]})}CreateExgift(){return(0,m.mG)(this,void 0,void 0,function*(){if(null!=this.mygift&&null!=this.myagency){let n={dateExchange:this.formExchange.get("dateEchange").value,observations:this.formExchange.get("observations").value,delivered:this.toggle.checked,agency:this.myagency,gift:this.mygift};this.uts.presentLoading();try{yield this.exser.createOrUpdate(n),this.uts.presentToast("Regalo agregada correctamente","success","checkmark-circle-outline"),this.formExchange.reset()}catch(s){this.uts.presentToast("Error agregando Regalo","danger","ban")}}})}showGiftsPicker(){return(0,m.mG)(this,void 0,void 0,function*(){let n={buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:u=>{this.mygift=u.Regalos.value}}],columns:[{name:"Regalos",options:this.getGiftColumnOptions()}]};(yield this.pickerController.create(n)).present()})}getGiftColumnOptions(){let n=[];return this.gifts.forEach(s=>{n.push({text:s.name,value:s})}),n}ionViewWillEnter(){return(0,m.mG)(this,void 0,void 0,function*(){this.uts.presentLoading(),this.gifts=yield this.giftserv.getAll(),this.agencies=yield this.ageserv.getAll(),this.agencies.length<=0&&this.gifts.length<=0&&this.uts.presentToast("","danger","ban"),this.uts.hideLoading(),console.log(this.gifts),console.log(this.agencies)})}showAgenciesPicker(){return(0,m.mG)(this,void 0,void 0,function*(){let n={buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:u=>{this.myagency=u.Agencias.value}}],columns:[{name:"Agencias",options:this.getAgenciesColumnOptions()}]};(yield this.pickerController.create(n)).present()})}getAgenciesColumnOptions(){let n=[];return this.agencies.forEach(s=>{n.push({text:s.zipCode,value:s})}),n}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(v.y),t.Y36(g.qu),t.Y36(e.f),t.Y36(a.up),t.Y36(r.R),t.Y36(l.Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tab5"]],viewQuery:function(n,s){if(1&n&&t.Gf(a.ho,5),2&n){let u;t.iGM(u=t.CRH())&&(s.toggle=u.first)}},decls:47,vars:7,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["sizeSm","1","sizeLg","1"],["sizeSm","11","sizeLg","11"],["formControlName","dateEchange","type","date",1,"customInput"],["formControlName","observations","type","text",1,"customInput"],["sizeSm","9","sizeLg","1"],["sizeSm","3","sizeLg","11  "],["lines","none"],["sizeSm","2","sizeLg","2"],["expand","block","shape","round",3,"click",4,"ngIf"],["size","12"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"click"],["expand","block","shape","round",3,"click"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-header",0),t.TgZ(1,"ion-toolbar",1),t.TgZ(2,"ion-title"),t._uU(3," Prueba Exchanges Gift "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"ion-content",2),t.TgZ(5,"div",3),t.TgZ(6,"form",4),t.TgZ(7,"div",5),t.TgZ(8,"ion-grid"),t.TgZ(9,"ion-row",6),t.TgZ(10,"ion-col",7),t.TgZ(11,"ion-label"),t._uU(12,"Fecha de Intercambio:"),t.qZA(),t.qZA(),t.TgZ(13,"ion-col",8),t._UZ(14,"ion-input",9),t.qZA(),t.qZA(),t.TgZ(15,"ion-row",6),t.TgZ(16,"ion-col",7),t.TgZ(17,"ion-label"),t._uU(18,"Observaciones:"),t.qZA(),t.qZA(),t.TgZ(19,"ion-col",8),t._UZ(20,"ion-textarea",10),t.qZA(),t.qZA(),t.TgZ(21,"ion-row",6),t.TgZ(22,"ion-col",11),t._uU(23," Entregado: "),t.qZA(),t.TgZ(24,"ion-col",12),t.TgZ(25,"ion-item",13),t._uU(26," No"),t._UZ(27,"ion-toggle"),t._uU(28,"Si "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"ion-row",6),t.TgZ(30,"ion-col",14),t.TgZ(31,"ion-label"),t._uU(32,"Agencia:"),t.qZA(),t.qZA(),t.TgZ(33,"ion-col",14),t.YNc(34,o,2,0,"ion-button",15),t.YNc(35,h,2,1,"ion-button",15),t.qZA(),t.qZA(),t.TgZ(36,"ion-row",6),t.TgZ(37,"ion-col",14),t.TgZ(38,"ion-label"),t._uU(39,"Regalo:"),t.qZA(),t.qZA(),t.TgZ(40,"ion-col",14),t.YNc(41,T,2,0,"ion-button",15),t.YNc(42,_,2,1,"ion-button",15),t.qZA(),t.qZA(),t.TgZ(43,"ion-row",6),t.TgZ(44,"ion-col",16),t.TgZ(45,"ion-button",17),t.NdJ("click",function(){return s.CreateExgift()}),t._uU(46," Crear Regalo Intercambio "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(2),t.Q6J("formGroup",s.formExchange),t.xp6(28),t.Q6J("ngIf",null==s.myagency),t.xp6(1),t.Q6J("ngIf",null!=s.myagency),t.xp6(6),t.Q6J("ngIf",null==s.mygift),t.xp6(1),t.Q6J("ngIf",null!=s.mygift))},directives:[a.Gu,a.sr,a.wd,a.W2,g._Y,g.JL,g.sg,a.jY,a.Nd,a.wI,a.Q$,a.pK,a.j9,g.JJ,g.u,a.g2,a.Ie,a.ho,a.w,p.O5,a.YG],styles:['.body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.formulario[_ngcontent-%COMP%]{margin-top:1.5%;padding:2%;border-top:2px double gray;border:1px solid;border-color:"primary";border-radius:2.5rem;background-color:#fff;margin-bottom:4%}.button[_ngcontent-%COMP%]{--background: #22388c}.customInput[_ngcontent-%COMP%]{border:1px solid gray;border-color:"primary"}']}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.Bz.forChild(y)],f.Bz]}),i})(),P=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[l.Y,r.R],imports:[[p.ez,g.u5,a.Pc,A,g.u5,g.UX]]}),i})()}}]);