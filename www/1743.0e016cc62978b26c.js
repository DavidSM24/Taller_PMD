"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1743],{1743:(L,u,c)=>{c.r(u),c.d(u,{UserCreatePageModule:()=>N});var d=c(6019),n=c(9010),r=c(2651),g=c(8725),l=c(4762),e=c(865),m=c(7524),p=c(9574),Z=c(7639),f=c(371);function h(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. El c\xf3digo zip debe tener una longitud exacta de 3 caracteres. "),e.qZA())}function A(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *La contrase\xf1a debe contener entre 5 y 10 caracteres, incluyendo una min\xfasucla, may\xfascula, n\xfamero y s\xedmbolo. "),e.qZA())}function T(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe introducir un formato de correo v\xe1lido. Longitud de 4 a 50 caracteres. "),e.qZA())}function _(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe introducir entre 3 y 100 caracteres. "),e.qZA())}function U(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe introducir entre 2 y 21 caracteres. "),e.qZA())}function q(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe introducir entre 4 y 50 caracteres. "),e.qZA())}function C(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe introducir entre 4 y 50 caracteres. "),e.qZA())}function b(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe introducir un n\xfamero de telefono de 9 d\xedgitos exactos. "),e.qZA())}function y(o,a){if(1&o){const i=e.EpF();e.TgZ(0,"ion-button",35),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).showPicker()}),e._uU(1," Seleccionar "),e.qZA()}}function v(o,a){if(1&o){const i=e.EpF();e.TgZ(0,"ion-button",35),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).showPicker()}),e._uU(1),e.qZA()}if(2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.insurance.cia_Name," ")}}function x(o,a){1&o&&(e.TgZ(0,"p",23),e._uU(1," *Campo obligatorio. Debe seleccionar una compa\xf1\xeda de seguros. "),e.qZA())}function k(o,a){if(1&o){const i=e.EpF();e.TgZ(0,"form",24),e.TgZ(1,"div",25),e.TgZ(2,"ion-grid"),e.TgZ(3,"h2"),e._uU(4,"Datos de la Agencia"),e.qZA(),e.TgZ(5,"ion-row",6),e.TgZ(6,"ion-col",7),e.TgZ(7,"ion-label"),e._uU(8,"C\xf3digo Zip:"),e.qZA(),e.qZA(),e.TgZ(9,"ion-col",8),e._UZ(10,"ion-input",26),e.qZA(),e.qZA(),e.TgZ(11,"ion-row",6),e.TgZ(12,"ion-col"),e.YNc(13,U,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(14,"ion-row",6),e.TgZ(15,"ion-col",7),e.TgZ(16,"ion-label"),e._uU(17,"Direcci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(18,"ion-col",8),e._UZ(19,"ion-input",27),e.qZA(),e.qZA(),e.TgZ(20,"ion-row",6),e.TgZ(21,"ion-col"),e.YNc(22,q,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(23,"ion-row",6),e.TgZ(24,"ion-col",7),e.TgZ(25,"ion-label"),e._uU(26,"Localidad:"),e.qZA(),e.qZA(),e.TgZ(27,"ion-col",8),e._UZ(28,"ion-input",28),e.qZA(),e.qZA(),e.TgZ(29,"ion-row",6),e.TgZ(30,"ion-col"),e.YNc(31,C,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(32,"ion-row",6),e.TgZ(33,"ion-col",7),e.TgZ(34,"ion-label"),e._uU(35,"N\xfamero de Tel\xe9fono:"),e.qZA(),e.qZA(),e.TgZ(36,"ion-col",8),e._UZ(37,"ion-input",29),e.qZA(),e.qZA(),e.TgZ(38,"ion-row",6),e.TgZ(39,"ion-col"),e.YNc(40,b,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(41,"ion-row",6),e.TgZ(42,"ion-col",30),e._uU(43," Activa: "),e.qZA(),e.TgZ(44,"ion-col",31),e.TgZ(45,"ion-item",18),e.NdJ("click",function(){return e.CHM(i),e.oxw().changeActive()}),e._uU(46," No"),e._UZ(47,"ion-toggle"),e._uU(48,"Si "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"ion-row",6),e.TgZ(50,"ion-col",32),e.TgZ(51,"ion-label"),e._uU(52,"Compa\xf1\xeda de Seguros:"),e.qZA(),e.qZA(),e.TgZ(53,"ion-col",33),e.YNc(54,y,2,0,"ion-button",34),e.YNc(55,v,2,1,"ion-button",34),e.qZA(),e.qZA(),e.TgZ(56,"ion-row",6),e.TgZ(57,"ion-col"),e.YNc(58,x,2,0,"p",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("formGroup",i.formAgency),e.xp6(13),e.Q6J("ngIf",i.formAgency.get("zipCode").invalid&&i.formAgency.get("zipCode").touched),e.xp6(9),e.Q6J("ngIf",i.formAgency.get("address").invalid&&i.formAgency.get("address").touched),e.xp6(9),e.Q6J("ngIf",i.formAgency.get("location").invalid&&i.formAgency.get("location").touched),e.xp6(9),e.Q6J("ngIf",i.formAgency.get("phoneNumber").invalid&&i.formAgency.get("phoneNumber").touched),e.xp6(14),e.Q6J("ngIf",null==i.insurance),e.xp6(1),e.Q6J("ngIf",null!=i.insurance),e.xp6(3),e.Q6J("ngIf",!i.admin&&i.errorCompany)}}const I=[{path:"",component:(()=>{class o{constructor(i,t,s,w,J,z){this.usserv=i,this.as=t,this.is=s,this.fb=w,this.uts=J,this.pickerController=z,this.admin=!1,this.active=!1,this.insurance=null,this.formUser=this.fb.group({code:["",[n.kI.required,n.kI.pattern("[0-9]{1,3}")]],password:["",[n.kI.required,n.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[ -/:-@[-`{-~]).{5,10}$")]],email:["",[n.kI.required,n.kI.email,n.kI.minLength(4),n.kI.maxLength(50)]],name:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]]}),this.formAgency=this.fb.group({zipCode:["",[n.kI.required,n.kI.pattern("[0-9]{2,21}")]],address:["",[n.kI.required,n.kI.maxLength(50),n.kI.minLength(4)]],location:["",[n.kI.required,n.kI.maxLength(50),n.kI.minLength(4)]],phoneNumber:["",[n.kI.required,n.kI.pattern("[0-9]{9}")]]})}ionViewWillEnter(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.uts.presentLoading(),this.companies=[],this.companies=yield this.is.getAll(),this.companies.length<=0&&(this.uts.presentToast("Para crear agencias, deben existir compa\xf1\xedas de seguros. Solo podr\xe1 crear usuarios administradores.","danger","ban"),this.admin=!0,this.toggle.checked=!0,this.toggle.disabled=!0),yield this.uts.hideLoading()})}CreateUser(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.uts.presentLoading();let i=yield this.usserv.getByCode(this.formUser.get("code").value);if(yield this.uts.hideLoading(),i)this.uts.presentToast("Ya existe un usuario con ese c\xf3digo, prueba con otro diferente.","danger","ban");else{yield this.uts.presentLoading();try{let t={code:this.formUser.get("code").value,password:this.formUser.get("password").value,administrator:this.admin,email:this.formUser.get("email").value,name:this.formUser.get("name").value};try{if(t=yield this.usserv.createOrUpdate(t),this.admin&&this.uts.presentToast("Usuario agregado correctamente","success","checkmark-circle-outline"),this.formUser.reset(),!this.admin&&null!=this.insurance){let s={zipCode:this.formAgency.get("zipCode").value,address:this.formAgency.get("address").value,location:this.formAgency.get("location").value,phoneNumber:this.formAgency.get("phoneNumber").value,amount:0,points:0,pointsRedeemed:0,myInsuranceCompany:this.insurance,myCarRepairs:[],myExchangesGifts:[],myUser:t,active:this.active};console.log(s),s=yield this.as.createOrUpdate(s),this.as.added=!0,s.id?(this.formAgency.reset(),this.uts.presentToast("La agencia se ha creado correctamente.","success","checkmark-circle-outline")):this.uts.presentToast("Un error ha surgido al intentar crear la agencia.","danger","ban")}}catch(s){this.uts.presentToast("Ha habido un error al crear el usuario. Compruebe longitud: c\xf3digo (<=3), contrase\xf1a: (<=10).","danger","ban")}}catch(t){yield this.uts.hideLoading(),console.log(t)}yield this.uts.hideLoading()}})}showPicker(){return(0,l.mG)(this,void 0,void 0,function*(){let i={buttons:[{text:"Cancel",role:"cancel",handler:s=>{this.insurance||(this.errorCompany=!0)}},{text:"Ok",handler:s=>{this.insurance=s.Compa\u00f1\u00edas.value,this.errorCompany=!1}}],columns:[{name:"Compa\xf1\xedas",options:this.getColumnOptions()}]};(yield this.pickerController.create(i)).present()})}getColumnOptions(){let i=[];return this.companies.forEach(t=>{i.push({text:t.cia_Name,value:t})}),i}changeAdmin(){this.admin=!this.admin}changeActive(){this.active=!this.active}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(m.K),e.Y36(p.Y),e.Y36(Z.r),e.Y36(n.qu),e.Y36(f.f),e.Y36(r.up))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-create"]],viewQuery:function(i,t){if(1&i&&e.Gf(r.ho,5),2&i){let s;e.iGM(s=e.CRH())&&(t.toggle=s.first)}},decls:67,vars:9,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"body"],[1,"ion-padding",3,"formGroup"],[1,"formulario"],[1,"ion-align-items-center"],["size","1.3"],["size","10.7"],["type","number","formControlName","code",1,"customInput"],["style","color:red;",4,"ngIf"],["type","password","formControlName","password",1,"customInput"],["type","text","formControlName","email",1,"customInput"],["type","text","formControlName","name",1,"customInput"],[1,"ion-padding"],[1,"formulario",2,"margin-top","-0.5% !important","margin-left","1.5%","margin-right","1.5%"],["sizeSm","10","sizeLg","2"],["sizeSm","2","sizeLg","11  "],["lines","none",3,"click"],["style","margin-top: -2% !important;",3,"formGroup",4,"ngIf"],["size","6"],["expand","block","shape","round","routerLink","/tab-administrator/agency/list",1,"button"],["expand","block","shape","round",1,"button",2,"margin-top","2% !important",3,"disabled","click"],[2,"color","red"],[2,"margin-top","-2% !important",3,"formGroup"],[2,"margin-bottom","0% !important"],["type","number","formControlName","zipCode",1,"customInput"],["type","text","formControlName","address",1,"customInput"],["type","text","formControlName","location",1,"customInput"],["type","number","formControlName","phoneNumber",1,"customInput"],["sizeSm","9","sizeLg","1"],["sizeSm","3","sizeLg","11  "],["sizeSm","2","sizeLg","2"],["size","rem"],["expand","block","shape","round",3,"click",4,"ngIf"],["expand","block","shape","round",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar",1),e.TgZ(2,"ion-title"),e._uU(3," Creacion de Usuario "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"div",5),e.TgZ(8,"ion-grid"),e.TgZ(9,"h2"),e._uU(10,"Datos del Usuario"),e.qZA(),e.TgZ(11,"ion-row",6),e.TgZ(12,"ion-col",7),e.TgZ(13,"ion-label"),e._uU(14,"Code:"),e.qZA(),e.qZA(),e.TgZ(15,"ion-col",8),e._UZ(16,"ion-input",9),e.qZA(),e.qZA(),e.TgZ(17,"ion-row",6),e.TgZ(18,"ion-col"),e.YNc(19,h,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(20,"ion-row",6),e.TgZ(21,"ion-col",7),e.TgZ(22,"ion-label"),e._uU(23,"Contrase\xf1a:"),e.qZA(),e.qZA(),e.TgZ(24,"ion-col",8),e._UZ(25,"ion-input",11),e.qZA(),e.qZA(),e.TgZ(26,"ion-row",6),e.TgZ(27,"ion-col"),e.YNc(28,A,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(29,"ion-row",6),e.TgZ(30,"ion-col",7),e.TgZ(31,"ion-label"),e._uU(32,"Email:"),e.qZA(),e.qZA(),e.TgZ(33,"ion-col",8),e._UZ(34,"ion-input",12),e.qZA(),e.qZA(),e.TgZ(35,"ion-row",6),e.TgZ(36,"ion-col"),e.YNc(37,T,2,0,"p",10),e.qZA(),e.qZA(),e.TgZ(38,"ion-row",6),e.TgZ(39,"ion-col",7),e.TgZ(40,"ion-label"),e._uU(41,"Name:"),e.qZA(),e.qZA(),e.TgZ(42,"ion-col",8),e._UZ(43,"ion-input",13),e.qZA(),e.qZA(),e.TgZ(44,"ion-row",6),e.TgZ(45,"ion-col"),e.YNc(46,_,2,0,"p",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",14),e.TgZ(48,"div",15),e.TgZ(49,"ion-row",6),e.TgZ(50,"ion-col",16),e._uU(51," Administrador: "),e.qZA(),e.TgZ(52,"ion-col",17),e.TgZ(53,"ion-item",18),e.NdJ("click",function(){return t.changeAdmin()}),e._uU(54," No"),e._UZ(55,"ion-toggle"),e._uU(56,"Si "),e.qZA(),e.qZA(),e.qZA(),e._UZ(57,"br"),e.YNc(58,k,59,8,"form",19),e.TgZ(59,"ion-grid"),e.TgZ(60,"ion-row"),e.TgZ(61,"ion-col",20),e.TgZ(62,"ion-button",21),e._uU(63," Cancelar "),e.qZA(),e.qZA(),e.TgZ(64,"ion-col",20),e.TgZ(65,"ion-button",22),e.NdJ("click",function(){return t.CreateUser()}),e._uU(66," Crear "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("formGroup",t.formUser),e.xp6(13),e.Q6J("ngIf",t.formUser.get("code").invalid&&t.formUser.get("code").touched),e.xp6(9),e.Q6J("ngIf",t.formUser.get("password").invalid&&t.formUser.get("password").touched),e.xp6(9),e.Q6J("ngIf",t.formUser.get("email").invalid&&t.formUser.get("email").touched),e.xp6(9),e.Q6J("ngIf",t.formUser.get("name").invalid&&t.formUser.get("name").touched),e.xp6(12),e.Q6J("ngIf",!t.admin),e.xp6(7),e.Q6J("disabled",!t.admin&&t.formAgency.invalid||t.formUser.invalid||!t.admin&&t.formAgency.invalid||!t.admin&&null==t.insurance))},directives:[r.Gu,r.sr,r.wd,r.W2,n._Y,n.JL,n.sg,r.jY,r.Nd,r.wI,r.Q$,r.pK,r.as,n.JJ,n.u,d.O5,r.j9,r.Ie,r.ho,r.w,r.YG,r.YI,g.rH],styles:['.body[_ngcontent-%COMP%]{background:#717499;background-size:cover;min-height:100%}.button[_ngcontent-%COMP%]{--background: #22388c}.admincss[_ngcontent-%COMP%]{margin-left:1.5%;margin-right:1.5%;border-top:2px double gray;border:1px solid;border-color:"primary";border-radius:2.5rem;background-color:#fff}ion-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442;border-right:5px solid #a94442}ion-input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948;border-right:5px solid #42A948}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442;border-right:5px solid #a94442}select.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948;border-right:5px solid #42A948}']}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(I)],g.Bz]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,n.u5,r.Pc,P,n.UX]]}),o})()}}]);