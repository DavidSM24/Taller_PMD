{"version":3,"file":"src_app_administrator_carRepair_car-repair-list_car-repair-list_module_ts.js","mappings":"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","sources":["./src/app/administrator/carRepair/car-repair-list/car-repair-list-routing.module.ts","./src/app/administrator/carRepair/car-repair-list/car-repair-list.module.ts","./src/app/administrator/carRepair/car-repair-list/car-repair-list.page.ts","./src/app/administrator/carRepair/car-repair-list/car-repair-list.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CarRepairListPage } from './car-repair-list.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CarRepairListPage,\r\n    children:[\r\n      {\r\n        path: 'car-repair-saw',\r\n        loadChildren: () => import('../car-repair-saw/car-repair-saw.module').then( m => m.CarRepairSawPageModule)\r\n      },\r\n      {\r\n        path: 'car-repair-update',\r\n        loadChildren: () => import('../car-repair-update/car-repair-update.module').then( m => m.CarRepairUpdatePageModule)\r\n      },\r\n      {\r\n        path: 'car-repair-create',\r\n        loadChildren: () => import('../car-repair-create/car-repair-create.module').then( m => m.CarRepairCreatePageModule)\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CarRepairListPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CarRepairListPageRoutingModule } from './car-repair-list-routing.module';\r\n\r\nimport { CarRepairListPage } from './car-repair-list.page';\r\nimport { Ng2SearchPipeModule } from 'ng2-search-filter';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CarRepairListPageRoutingModule,\r\n\r\n    Ng2SearchPipeModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [CarRepairListPage]\r\n})\r\nexport class CarRepairListPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, IonInfiniteScroll, LoadingController, ModalController, Platform, ToastController } from '@ionic/angular';\r\nimport { CarRepair } from 'src/app/models/CarRepair';\r\nimport { CarRepairService } from 'src/app/services/car-repair.service';\r\nimport { CarRepairSawPage } from '../car-repair-saw/car-repair-saw.page';\r\nimport { CarRepairUpdatePage } from '../car-repair-update/car-repair-update.page';\r\n\r\n@Component({\r\n  selector: 'app-car-repair-list',\r\n  templateUrl: './car-repair-list.page.html',\r\n  styleUrls: ['./car-repair-list.page.scss'],\r\n})\r\nexport class CarRepairListPage implements OnInit {\r\n\r\n  @ViewChild(IonInfiniteScroll) infinite: IonInfiniteScroll;\r\n\r\n  private n:number=0;\r\n  public carRepairs:CarRepair[]=[];\r\n  private searchStr:string=\"\";\r\n  private miLoading:HTMLIonLoadingElement;\r\n  private nItems:number; //variable que almacena el número de elemetenos que caben dentro de la página\r\n\r\n  constructor(\r\n    private cS:CarRepairService,\r\n    private toast:ToastController,\r\n    private alertCtrl:AlertController,\r\n    private modalCtrl:ModalController,\r\n    private loading:LoadingController,\r\n    private routes:Router,\r\n    private pt:Platform//para saber el dispositivo\r\n\r\n  ) {\r\n\r\n   }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async ionViewWillEnter(){\r\n    this.nItems=Math.ceil(this.pt.height()/20+10);\r\n    try {\r\n      await this.loadCarRepair();\r\n      this.n=this.carRepairs.length;\r\n    } catch (error) {\r\n      \r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Método que carga las reparaciones de la base de datos\r\n   * se llama la primera vez que carga la página\r\n   * @param event \r\n   */\r\n  public async loadCarRepair(event?){\r\n\r\n    let newCarRepair:CarRepair[]=[];\r\n\r\n    if(this.carRepairs.length==0){\r\n\r\n        if(!event){\r\n          this.presentLoading();\r\n        }\r\n\r\n      this.infinite.disabled=false;\r\n\r\n      try{\r\n      newCarRepair=await this.cS.getAllPaged(this.nItems,0);\r\n      this.carRepairs=this.carRepairs.concat(newCarRepair);\r\n      if(newCarRepair.length<this.nItems){\r\n      this.infinite.disabled=true;\r\n        console.log(this.carRepairs);\r\n      }\r\n      }catch(error){\r\n        console.log(error);\r\n        this.presentToast(\"Error de carga\",\"danger\");\r\n      }finally{\r\n        if(event){\r\n         \r\n          event.target.complete();\r\n    \r\n        }else{\r\n          this.loading.dismiss();\r\n        }\r\n      }\r\n    }   \r\n  }\r\n\r\n\r\n  /**\r\n   * Método que actualiza una reparación mediante un modal\r\n   * @param carRepair Reparación que se quiera modificar\r\n   */\r\n  public async edit(carRepair:CarRepair){\r\n\r\n    const modal = await this.modalCtrl.create({\r\n      component: CarRepairUpdatePage,\r\n      //hoja de estilos\r\n      cssClass: 'my-modal-class',\r\n      //pasar datos al modal\r\n      \r\n      componentProps: {\r\n        'carRepair':carRepair\r\n        \r\n        \r\n      }\r\n    });\r\n   \r\n  \r\n    return await modal.present();\r\n\r\n  }\r\n  public async saw(carRepair:CarRepair){\r\n\r\n    const modal = await this.modalCtrl.create({\r\n      component: CarRepairSawPage,\r\n      //hoja de estilos\r\n      cssClass: 'my-modal-class',\r\n      //pasar datos al modal\r\n      \r\n      componentProps: {\r\n        'carRepair':carRepair\r\n        \r\n        \r\n      }\r\n    });\r\n   \r\n  \r\n    return await modal.present();\r\n\r\n  }\r\n\r\n  /**\r\n   * Método que borra una reparación de la base de datos\r\n   * @param carRepair reparación que se quiera eliminar\r\n   */\r\n\r\n\r\n  public async delete(carRepair:CarRepair){\r\n    try {\r\n    await this.presentLoading();\r\n    const result:boolean=await this.cS.delete(carRepair);//borra la reparación y guarda si se ha borrado\r\n    let i=this.carRepairs.indexOf(carRepair,0);//se comprueba si la reparación esta en la lista\r\n    if(result){\r\n      if(i>-1){\r\n        this.carRepairs.splice(i,1);//borra la reparación de la lista\r\n      }\r\n\r\n      this.presentToast(\"La reparación ha sido eliminada correctamente.\",\"success\");\r\n    }else{\r\n      this.presentToast(\"Error al borrar la reparación\",\"danger\");\r\n    }\r\n    } catch (error) {\r\n      this.presentToast(\"Nose ha podido borrar la reparación, intentelo más tarde\",\"danger\");\r\n    }finally{\r\n      try {\r\n        await this.miLoading.dismiss();\r\n      } catch (error) {\r\n        \r\n      }\r\n    }    \r\n  }\r\n\r\n  /**\r\n   * Método que muestra una alerta cuando se quiere borrar una reparación\r\n   * @param carRepair reparación que se quiere borrar\r\n   */\r\n  public async showDeleteMenu(carRepair:CarRepair){\r\n    const alert=await this.alertCtrl.create({\r\n      header:'Confirmación',\r\n      message:'¿Desea eliminar la reparación?',\r\n      buttons:[\r\n        {\r\n          text:'Eliminar',\r\n          cssClass:'rojo',\r\n          handler:()=>{\r\n            this.delete(carRepair);\r\n          }\r\n        },\r\n        {\r\n          text:'Cancelar',\r\n          cssClass:'secundary',\r\n          role:'cancel'\r\n\r\n        }\r\n      ]\r\n    });\r\n\r\n    try {\r\n\r\n      await alert.present();\r\n\r\n    } catch (error) {\r\n      console.log(error);           \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método que carga más reparaciones cuando se llega al final de la pantalla\r\n   * @param $event \r\n   */\r\n  public async infiniteLoad($event){\r\n\r\n    let newCarRepairs:CarRepair[]=[];\r\n\r\n    if(!this.infinite.disabled){\r\n\r\n      try {\r\n        newCarRepairs=await this.cS.getAllPaged(this.nItems,this.carRepairs.length);\r\n        this.carRepairs=this.carRepairs.concat(newCarRepairs);\r\n        if(newCarRepairs.length<30){\r\n          this.infinite.disabled=true;\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.log(error);\r\n        \r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Método que te redirige a la página de crear\r\n   */\r\n  public goCreatePage(){\r\n    this.routes.navigateByUrl('tab-administrator/car-repair/create');\r\n  }\r\n\r\n  /**\r\n   * Método que redirige a la página de actualizar reparaciones\r\n   */\r\n  public goUpdatePage(id:number){\r\n    this.routes.navigateByUrl('tab-administrator/car-repair/update/'+id);\r\n  }\r\n\r\n  /**\r\n   * Método que redirige a la página de ver\r\n   */\r\n  public goSawPage(id:number){\r\n    this.routes.navigateByUrl('tab-administrator/car-repair/saw/'+id);\r\n\r\n  }\r\n\r\n\r\n  public async presentLoading() {\r\n    this.miLoading = await this.loading.create({\r\n      message: ''\r\n    });\r\n    await this.miLoading.present();\r\n  }\r\n\r\n  public async presentToast(msg: string, clr: string) {\r\n    const miToast = await this.toast.create({\r\n      message: msg,\r\n      duration: 2000,\r\n      color: clr\r\n    });\r\n    miToast.present();\r\n  }\r\n\r\n  /**\r\n   * Método que se activa cuando se escribe algo en la barra de búsqueda\r\n   * Para buscar reparaciones por matrícula, dueño del coche, operación \r\n   * y nombre de la agencia\r\n   * @param event \r\n   */\r\n  public async onSearchChange(event) {\r\n    this.searchStr = event.detail.value;\r\n    console.log(this.searchStr);\r\n    let carR:CarRepair[]=[]\r\n    const value:string=event.detail.value;\r\n    const length=this.searchStr.length;\r\n    if(length>1){\r\n      this.carRepairs.forEach(repair=>{\r\n        if(repair.brandCar.includes(value)||repair.clienteName.includes(value)\r\n        ||repair.operation.toLocaleString().includes(value)\r\n        ||repair.myAgency.myUser.name.includes(value)){\r\n          carR.push(repair);\r\n        }\r\n        });\r\n        this.carRepairs=carR;\r\n    }else if(length<1){\r\n      try {\r\n        await this.reset();\r\n        \r\n      } catch (error) {\r\n        \r\n      }\r\n     \r\n\r\n    } \r\n  }\r\n\r\n  /**\r\n   * Método que reinicia la lista de reparaciones\r\n   * @param event \r\n   */\r\n  public async reset(event?){\r\n    this.n=0;\r\n    this.infinite.disabled=false;\r\n    this.carRepairs=[];\r\n    this.loadCarRepair(event);\r\n  }\r\n\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>CarRepairList</ion-title>\\r\\n\\r\\n    <ion-buttons style=\\\"margin-right: 1%;\\\" slot=\\\"end\\\">\\r\\n      <ion-icon class=\\\"icon-logout\\\"  slot=\\\"end\\\" name=\\\"add-circle\\\" style=\\\"zoom:1.5\\\" (click)=\\\"goCreatePage()\\\"></ion-icon>\\r\\n      <ion-icon class=\\\"icon-logout\\\" slot=\\\"end\\\" name=\\\"person\\\" style=\\\"zoom:1.5\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n\\r\\n    \\r\\n  </ion-toolbar>\\r\\n\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-searchbar placeholder=\\\"Encuentra la reparación que estás buscando...\\\" inputmode=\\\"text\\\" type=\\\"text\\\"\\r\\n    debounce=\\\"1000\\\" (ionChange)=\\\"onSearchChange($event)\\\" showCancelButton=\\\"always\\\"></ion-searchbar>\\r\\n\\r\\n    <ion-row class=\\\"header-row\\\">\\r\\n      <ion-col size=\\\"1\\\" style=\\\"border: 0px !important;\\\">\\r\\n        <ion-text></ion-text>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col size=\\\"2.5\\\" style=\\\"border: 0px !important;\\\">\\r\\n        <ion-text>Operación</ion-text>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col  size=\\\"2.5\\\" style=\\\"border: 0px !important;\\\">\\r\\n        <ion-text>Matrícula</ion-text>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col size=\\\"2.5\\\" style=\\\"border: 0px !important;\\\">\\r\\n        <ion-text>Agencia</ion-text>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col size=\\\"2.5\\\" style=\\\"border: 0px !important;\\\">\\r\\n        <ion-text>Reparado</ion-text>\\r\\n      </ion-col>\\r\\n      \\r\\n      <ion-col size=\\\"1\\\" style=\\\"border: 0px !important;\\\">\\r\\n        <ion-text></ion-text>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n  </ion-toolbar>\\r\\n  \\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" style=\\\"background-color: white;\\\">\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"reset($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <div class=\\\"body\\\">\\r\\n  \\r\\n\\r\\n  <ion-grid class=\\\"ion-text-center\\\">\\r\\n\\r\\n    <ion-row let *ngFor=\\\"let carRepair of this.carRepairs\\\" class=\\\"row\\\" >\\r\\n      \\r\\n      <ion-col size=\\\"1\\\">\\r\\n        <ion-text>\\r\\n          <ion-icon name=\\\"pencil\\\" style=\\\"color:#22388c;cursor:pointer\\\" (click)=\\\"edit(carRepair)\\\"></ion-icon>\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n\\r\\n      \\r\\n      <ion-col size=\\\"2.5\\\" (click)=\\\"saw(carRepair)\\\">\\r\\n        <ion-text class=\\\"pointerText\\\">\\r\\n            {{carRepair.operation}}\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n      \\r\\n      <ion-col size=\\\"2.5\\\"(click)=\\\"saw(carRepair)\\\">\\r\\n        <ion-text class=\\\"pointerText\\\">\\r\\n            {{carRepair.carPlate}}\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n\\r\\n        <ion-col size=\\\"2.5\\\"(click)=\\\"saw(carRepair)\\\">\\r\\n          <ion-text class=\\\"pointerText\\\">\\r\\n            {{carRepair.myAgency.myUser.name}}\\r\\n          </ion-text>\\r\\n        </ion-col>\\r\\n  \\r\\n        <ion-col size=\\\"2.5\\\"(click)=\\\"saw(carRepair)\\\">\\r\\n          <ion-text class=\\\"pointerText\\\">\\r\\n            {{carRepair.repaired}} \\r\\n          </ion-text>\\r\\n        </ion-col>\\r\\n\\r\\n        <ion-col size=\\\"1\\\">\\r\\n          <ion-text>\\r\\n            <ion-icon name=\\\"trash\\\" color=\\\"danger\\\" style=\\\"cursor: pointer;\\\" (click)=\\\"showDeleteMenu(carRepair)\\\"></ion-icon>\\r\\n          </ion-text>\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n  </ion-grid>\\r\\n\\r\\n\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"infiniteLoad($event)\\\">\\r\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</div>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}