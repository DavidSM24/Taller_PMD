"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7062],{7062:(L,c,n)=>{n.r(c),n.d(c,{LoginPageModule:()=>y});var f=n(6019),i=n(9010),d=n(2651),g=n(8725),p=n(4762),t=n(865),u=n(7524),h=n(371),m=n(9311),x=n(9574);const b=[{path:"",component:(()=>{class e{constructor(o,s,r,l,P,Z){this.fb=o,this.us=s,this.uts=r,this.authS=l,this.router=P,this.as=Z,this.complete=!1,this.formLogin=this.fb.group({code:["",i.kI.required,i.kI.pattern("[0-9]*")],pass:["",i.kI.required]})}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){})}ionViewWillEnter(){try{if(this.authS.isLogged()){console.log(this.authS.isLogged());try{this.authS.user.administrator?(this.uts.presentToast("Ha iniciado sesi\xf3n con el usuario "+this.authS.user.name+".","success","person"),this.router.navigate(["/tab-administrator/agency/list"])):this.authS.user.administrator||(this.uts.presentToast("Ha iniciado sesi\xf3n con el usuario "+this.authS.user.name+".","success","person"),this.router.navigate(["/tab-user/gift/list"]))}catch(o){}}this.complete=!0}catch(o){console.log(o)}}login(){return(0,p.mG)(this,void 0,void 0,function*(){if(""==this.formLogin.get("code").value||""==this.formLogin.get("pass").value)this.uts.presentToast("Debe rellenar todos los campos.","danger","ban");else{let o,s=!1;yield this.uts.presentLoading();try{let r=yield this.formLogin.get("code").value;if(o=yield this.us.getByCode(r),o.id&&this.formLogin.get("pass").value==o.password&&(s=!0),yield this.uts.hideLoading(),s)try{this.authS.user=o,yield this.authS.keepSession(),console.log("inciando..."),this.authS.user.administrator?this.router.navigate(["/tab-administrator/agency/list"]):this.authS.user.administrator||(this.authS.agency=yield this.as.getByUsercode(o.code),console.log(this.authS.agency),this.router.navigate(["/tab-user/gift/list"]))}catch(l){console.log(l)}else this.uts.presentToast("Usuario o contrase\xf1a incorrecta...","danger","ban");yield this.uts.hideLoading()}catch(r){yield this.uts.hideLoading(),this.uts.presentToast("Usuario o contrase\xf1a incorrecta...","danger","ban")}}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(i.qu),t.Y36(u.K),t.Y36(h.f),t.Y36(m.e),t.Y36(g.F0),t.Y36(x.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:1,consts:[[2,"background-color","white","width","100%","height","100%"],[1,"login"],["src","../../assets/images/logo.png"],[3,"formGroup"],[1,"group"],["for","code",1,"label",2,"margin-bottom","3% !important"],["id","code","type","number","formControlName","code",1,"input",3,"keyup.enter"],["for","pass",1,"label",2,"margin-bottom","3% !important"],["id","pass","type","password","data-type","pass","formControlName","pass",1,"input",3,"keyup.enter"],[1,"wrapper"],[1,"link_wrapper"],[3,"click"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 268.832 268.832"],["d","M265.17 125.577l-80-80c-4.88-4.88-12.796-4.88-17.677 0-4.882 4.882-4.882 12.796 0 17.678l58.66 58.66H12.5c-6.903 0-12.5 5.598-12.5 12.5 0 6.903 5.597 12.5 12.5 12.5h213.654l-58.66 58.662c-4.88 4.882-4.88 12.796 0 17.678 2.44 2.44 5.64 3.66 8.84 3.66s6.398-1.22 8.84-3.66l79.997-80c4.883-4.882 4.883-12.796 0-17.678z"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div"),t.TgZ(2,"div",1),t._UZ(3,"ion-img",2),t.TgZ(4,"form",3),t.TgZ(5,"h1"),t._uU(6,"Login"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"label",5),t._uU(9,"C\xf3digo"),t.qZA(),t.TgZ(10,"input",6),t.NdJ("keyup.enter",function(){return s.login()}),t.qZA(),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"label",7),t._uU(13,"Contrase\xf1a"),t.qZA(),t.TgZ(14,"input",8),t.NdJ("keyup.enter",function(){return s.login()}),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",10),t.TgZ(17,"a",11),t.NdJ("click",function(){return s.login()}),t._uU(18,"Iniciar"),t.qZA(),t.TgZ(19,"div",12),t.O4$(),t.TgZ(20,"svg",13),t._UZ(21,"path",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(4),t.Q6J("formGroup",s.formLogin))},directives:[d.Xz,i._Y,i.JL,i.sg,i.wV,i.Fj,i.JJ,i.u],styles:['@import"https://fonts.googleapis.com/css?family=Open+Sans";.wrapper[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;top:0;bottom:0}.link_wrapper[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]{display:block;width:250px;height:50px;line-height:50px;font-weight:bold;text-decoration:none;background:#333;text-align:center;color:#fff;text-transform:uppercase;letter-spacing:1px;border:3px solid #333;transition:all .35s}.icon[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid transparent;position:absolute;transform:rotate(45deg);right:0;top:0;z-index:-1;transition:all .35s}.icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;position:absolute;top:calc(50% - 15px);left:calc(50% - 15px);transform:rotate(-45deg);fill:#2f0fbe;transition:all .35s}a[_ngcontent-%COMP%]:hover{width:200px;border:3px solid #2f0fbe;background:transparent;color:#2f0fbe}*[_ngcontent-%COMP%]{-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box}html[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}body[_ngcontent-%COMP%]{width:100%;height:100%;font-family:"Open Sans",sans-serif;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#3E1D6D",endColorstr="#092756",GradientType=1)}.login[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin:-200px 0 0 -150px;width:300px;height:300px}.login[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#203b8c;text-shadow:0 0 10px rgba(0,0,0,.3);letter-spacing:1px;text-align:center}input[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;background:rgba(0,0,0,.3);border:none;outline:none;padding:10px;font-size:13px;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.3);border:1px solid rgba(0,0,0,.3);border-radius:4px;box-shadow:inset 0 -5px 45px #64646433,0 1px 1px #fff3;transition:box-shadow .5s ease}label[_ngcontent-%COMP%]{color:#000}input[_ngcontent-%COMP%]:focus{box-shadow:inset 0 -5px 45px #64646466,0 1px 1px #fff3}.disabled[_ngcontent-%COMP%]{opacity:.5!important}']}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(b)],g.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[u.K,h.f],imports:[[f.ez,i.u5,d.Pc,v,i.u5,i.UX]]}),e})()}}]);