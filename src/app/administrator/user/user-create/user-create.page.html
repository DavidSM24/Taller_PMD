<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      Creacion de Usuario
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="body">

    <form [formGroup]="formUser" class="ion-padding">

      <div class="formulario">
      <ion-grid>

        <h2>Datos del Usuario</h2>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Code:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="number" formControlName="code"></ion-input>
          </ion-col>
        </ion-row>


        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formUser.get('code').invalid&&formUser.get('code').touched">
              *Campo obligatorio. El código zip debe tener una longitud exacta de 3 caracteres.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Contraseña:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="password" formControlName="password"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formUser.get('password').invalid&&formUser.get('password').touched">
              *La contraseña debe contener entre 5 y 10 caracteres, incluyendo una minúsucla, mayúscula, número y símbolo.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Email:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="text" formControlName="email"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formUser.get('email').invalid&&formUser.get('email').touched">
              *Campo obligatorio. Debe introducir un formato de correo válido. Longitud de 4 a 50 caracteres.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Name:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="text" formControlName="name"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formUser.get('name').invalid&&formUser.get('name').touched">
              *Campo obligatorio. Debe introducir entre 3 y 100 caracteres.
            </p>
          </ion-col>
        </ion-row>

      </ion-grid>
    </div>
    </form>

    <div class="ion-padding">
    <div class="formulario" style="margin-top:-0.5% !important;margin-left:1.5%;margin-right:1.5%">
      <ion-row class="ion-align-items-center">
        <ion-col sizeSm="10" sizeLg="2">
          Administrador:
        </ion-col>
        <ion-col sizeSm="2" sizeLg="11  ">
          <ion-item  lines="none" (click)="changeAdmin()">
            No<ion-toggle></ion-toggle>Si
         </ion-item>
        </ion-col>
      </ion-row>

      <br>

    <form *ngIf="!(this.admin)" [formGroup]="formAgency" style="margin-top: -2% !important;">
      <div style="margin-bottom: 0% !important;">
      <ion-grid>

        <h2>Datos de la Agencia</h2>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Código Zip:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input type="number" class="customInput" formControlName="zipCode"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formAgency.get('zipCode').invalid&&formAgency.get('zipCode').touched">
              *Campo obligatorio. Debe introducir entre 2 y 21 caracteres.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Dirección:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="text" formControlName="address"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formAgency.get('address').invalid&&formAgency.get('address').touched">
              *Campo obligatorio. Debe introducir entre 4 y 50 caracteres.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Localidad:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="text" formControlName="location"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formAgency.get('location').invalid&&formAgency.get('location').touched">
              *Campo obligatorio. Debe introducir entre 4 y 50 caracteres.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="1.3" sizeMd="1.3" sizeLg="1.3">
            <ion-label>Número de Teléfono:</ion-label>
          </ion-col>
          <ion-col sizeSm="10.7" sizeMd="10.7" sizeLg="10.7">
            <ion-input class="customInput" type="number" formControlName="phoneNumber"></ion-input>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="this.formAgency.get('phoneNumber').invalid&&formAgency.get('phoneNumber').touched">
              *Campo obligatorio. Debe introducir un número de telefono de 9 dígitos exactos.
            </p>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="9" sizeLg="1">
            Activa:
          </ion-col>
          <ion-col sizeSm="3" sizeLg="11  ">
            <ion-item  lines="none" (click)="changeActive()">
              No<ion-toggle></ion-toggle>Si
           </ion-item>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col sizeSm="2" sizeLg="2">
            <ion-label>Compañía de Seguros:</ion-label>
          </ion-col>

          <ion-col size="rem">

            <ion-button expand="block" shape="round" (click)="showPicker()" *ngIf="this.insurance==null">
              Seleccionar
            </ion-button>

            <ion-button expand="block" shape="round" (click)="showPicker()" *ngIf="this.insurance!=null">
              {{this.insurance.cia_Name}}
            </ion-button>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col>
            <p style="color:red;" *ngIf="!this.admin&&this.errorCompany">
              *Campo obligatorio. Debe seleccionar una compañía de seguros.
            </p>
          </ion-col>
        </ion-row>

      </ion-grid>
    </div>
    </form>

    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <ion-button expand="block" shape="round" class="button" routerLink="/tab-administrator/agency/list">
            Cancelar
          </ion-button>
        </ion-col>

        <ion-col size="6">
          <ion-button (click)="CreateUser()" expand="block" shape="round" style="margin-top: 2% !important;" class="button" [disabled]="((!this.admin)&&this.formAgency.invalid)||this.formUser.invalid||((!this.admin)&&this.formAgency.invalid)||((!this.admin)&&this.insurance==null)">
            Crear
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</div>
</div>
</ion-content>
